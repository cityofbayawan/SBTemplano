!function(){function e(){return{restrict:"E",templateUrl:"apps/donDonations/jwo-congregation-picker.html",controller:"jwoCongregationPickerController",controllerAs:"ctrl",bindToController:!0,scope:{api:"="}}}function o(e,o,n,t,i,r,c){function g(e){if(!e||!e.weekday||!e.time)return"";var o=new Date;o.setUTCDate(o.getUTCDate()-o.getUTCDay()+e.weekday);var n=e.time.split(":");return o.setUTCHours(n[0],n[1],0,0),t("formatDate")(o,"WEEKDAY_TIME",!0)}function a(){return s.deferredCongregation=n.defer(),u(),s.deferredCongregation.promise}function u(){s.searching=!1,s.congregations=[],s.congregationResults=[],s.congregation=null,s.congSelection=null,s.visible=!0}function l(){s.congLoadComplete=!1,s.congregation=null,s.circuit={},angular.isArray(s.congSelection)&&1===s.congSelection.length&&(s.congregation=s.congSelection[0],o(i.routes.DONOR_CIRCUIT).get({congGuid:s.congregation.congGuid},function(e){s.congregation.midweekMtg=g(s.congregation.midweekMeetingTime),s.congregation.weekendMtg=g(s.congregation.weekendMeetingTime),angular.isObject(e)&&e.hasOwnProperty("circuitGuid")&&e.circuitGuid&&(e.circuitPartGuid?(s.congregation.circuitGuid=e.circuitPartGuid,s.congregation.circuitName=e.circuitPartName):(s.congregation.circuitGuid=e.circuitGuid,s.congregation.circuitName=e.circuitName)),s.congLoadComplete=!0}))}function d(e){s.deferredCongregation.resolve(e),s.visible=!1}var s=this;s.returnCongregation=d,s.showCongregation=l,s.api={getCongregation:a},function(){e.CORE=i,e.t=c,s.donateCountryCode=r.donateCountryCode,s.congregationResults=[],s.userLanguageCode=r.userLanguageCode,e.$watch("ctrl.congSelection",function(){l()})}()}angular.module("jwoCongregationPicker",["jwoModal","jwoTypeahead","jwoText"]).controller("jwoCongregationPickerController",o).directive("jwoCongregationPicker",e),o.$inject=["$scope","$resource","$q","$filter","CORE","DATA","LITERALS"]}();
//# sourceMappingURL=../../maps/apps/donDonations/jwo-congregation-picker.js.map
