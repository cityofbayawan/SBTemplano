!function(){"use strict";function n(n,o,t,i,e,c,u,a,r,d,g){function s(n){if(n=n||!1,g.userAnonymous&&!n)return void v.accountModal.getAction(g.donationType.CIRC_ONETIME).then(function(n){R(n)});if(null!==v.circuit){var o=g.userAnonymous?"DONATEANON:DONATEANON:":"DONATEONETIME:DONATEONETIME:";return A(v.circuit.circuitGuid),document.getElementById("CircuitCongGUID")&&(document.getElementById("CircuitCongGUID").value=v.congregation.congGuid),document.getElementById("frmDonationType").action=g.userAnonymous?g.anonymousDonationUrl:g.myDonationsUrl,void submitAction("frmDonationType",o+g.donationType.CIRC_ONETIME)}v.congregationPicker.getCongregation().then(function(n){C(n),s(!0)})}function l(n){if(n=n||!1,g.userAnonymous&&!n)return void v.accountModal.getAction(g.donationType.CONG_ONETIME).then(function(n){R(n)});if(null!==v.congregation){var o=g.userAnonymous?"DONATEANON:DONATEANON:":"DONATEONETIME:DONATEONETIME:";return A(v.congregation.congGuid),document.getElementById("frmDonationType").action=g.userAnonymous?g.anonymousDonationUrl:g.myDonationsUrl,void submitAction("frmDonationType",o+g.donationType.CONG_ONETIME)}v.congregationPicker.getCongregation().then(function(n){C(n),A(v.congregation.congGuid),l(!0)})}function D(){if(g.userAnonymous)return void v.accountModal.getAction(g.donationType.CONG_RECUR).then(function(n){R(n)});if(!g.hasRecurringDonationCong){A(v.congregation.congGuid),document.getElementById("frmDonationType").action=g.myDonationsUrl;var n=g.hasPaymentInfo?"ADDRECURR:ADDRECURR:":"DONATERECURR:DONATERECURR:";submitAction("frmDonationType",n+g.donationType.CONG_RECUR)}}function y(n){if(n=n||!1,g.userAnonymous&&!n)return void v.accountModal.getAction(g.donationType.RC_ONETIME).then(function(n){R(n)});if(null!==v.convention){var o=g.userAnonymous?"DONATEANON:DONATEANON:":"DONATEONETIME:DONATEONETIME:";return A(v.convention.conventionGuid),document.getElementById("frmDonationType").action=g.userAnonymous?g.anonymousDonationUrl:g.myDonationsUrl,void submitAction("frmDonationType",o+g.donationType.RC_ONETIME)}v.conventionPicker.getConvention().then(function(n){N(n),A(v.convention.conventionGuid),y(!0)})}function E(){if(A(""),g.userAnonymous)return void v.accountModal.getAction(g.donationType.WW_ONETIME).then(function(n){R(n)});document.getElementById("frmDonationType").action=g.myDonationsUrl,submitAction("frmDonationType","DONATEONETIME:DONATEONETIME:"+g.donationType.WW_ONETIME)}function T(){if(A(""),g.userAnonymous)return void v.accountModal.getAction(g.donationType.WW_RECUR).then(function(n){R(n)});if(!g.hasRecurringDonationWW){document.getElementById("frmDonationType").action=g.myDonationsUrl;var n=g.hasPaymentInfo?"ADDRECURR:ADDRECURR:":"DONATERECURR:DONATERECURR:";submitAction("frmDonationType",n+g.donationType.WW_RECUR)}}function m(){if(g.userAnonymous)return!1;v.congregationPicker.getCongregation().then(function(n){C(n),v.selectedDonationTypeID==g.donationType.CIRC_ONETIME?(A(v.circuit.circuitGuid),document.getElementById("CircuitCongGUID")&&(document.getElementById("CircuitCongGUID").value=v.congregation.congGuid)):A(v.congregation.congGuid),v.savingData=!0,i(d.routes.DONOR_PROFILE).get(null,function(n){if(n.hasOwnProperty("congGuid")){var o={congGuid:v.congregation.congGuid};i(d.routes.DONOR_PROFILE,null,{update:{method:"PUT"}}).update(o,function(){v.savingData=!1},function(){v.savingData=!1,i(d.routes.DONOR_PROFILE).get(null,function(n){C(n),A(n.hasOwnProperty("congGuid")?n.congGuid:"")})})}})})}function O(n){v.circuit={},null!=n.circuitGuid?(v.circuit.circuitGuid=n.circuitGuid,v.circuit.circuitName=n.circuitName):(v.loadingCircuit=!0,i(d.routes.DONOR_CIRCUIT).get({congGuid:n.congGuid},function(n){angular.isObject(n)&&n.hasOwnProperty("circuitGuid")&&n.circuitGuid&&(v.circuit=n,n.circuitPartGuid?(v.circuit.circuitGuid=n.circuitPartGuid,v.circuit.circuitName=n.circuitPartName):(v.circuit.circuitGuid=n.circuitGuid,v.circuit.circuitName=n.circuitName),v.loadingCircuit=!1)}))}function C(n){v.congregation=null,v.circuit=null,angular.isObject(n)&&n.hasOwnProperty("congGuid")&&n.congGuid&&(v.congregation=n,O(n))}function f(){v.conventionPicker.getConvention().then(function(n){N(n),A(v.convention.conventionGuid)})}function N(n){if(v.convention=null,angular.isObject(n)&&n.hasOwnProperty("conventionGuid")&&(v.convention=n,n.hasOwnProperty("beginDate"))){var o=e("formatDate")(n.beginDate,"LONG_DATE");v.convention.formattedBeginDate=r.textWordNumberOrData.replace("[date]",o)}}function A(n){document.getElementById("TransOrgUnitGUID")&&(document.getElementById("TransOrgUnitGUID").value=n)}function p(n){v.sectionCollapsed[n]=!v.sectionCollapsed[n]}function I(){v.editingDonationCountry=!v.editingDonationCountry}function R(n){switch(n.action){case"login":t.location.href=g.logInDonateUrl;break;case"create":t.location.href=g.createAccountUrl+"?selDonCntctCountryID="+g.donateCountryId+"&selDonationTypeID="+n.donationType;break;case"continue":if(n.donationType==g.donationType.CONG_ONETIME){var o=!0;c(l,0,!0,o)}if(n.donationType==g.donationType.CIRC_ONETIME){var o=!0;c(s,0,!0,o)}if(n.donationType==g.donationType.RC_ONETIME){var o=!0;c(y,0,!0,o)}n.donationType==g.donationType.WW_ONETIME&&(t.location.href=g.oneTimeDonateUrl+"&txtAction=DONATEANON:DONATEANON:"+n.donationType)}}var v=this;v.donateWorldwideOnce=E,v.donateWorldwideRecurr=T,v.donateCircuit=s,v.donateConvention=y,v.donateCongregation=l,v.donateCongRecurr=D,v.toggleLocationEdit=I,v.selectConvention=f,v.selectCongregation=m,v.toggleCollapse=p,function(){n.t=r,v.editingDonationCountry=0==g.donateCountryId||g.invalidCountry,v.hasRecurringDonationActive=g.hasRecurringDonationActive,v.hasRecurringDonationWW=g.hasRecurringDonationWW,v.hasRecurringDonationCong=g.hasRecurringDonationCong,v.donateCountryId=g.donateCountryId,v.invalidCountry=g.invalidCountry,v.userAnonymous=g.userAnonymous,v.userSignup=g.userSignup,v.anonymousCongSelection=g.anonymousCongSelection,v.selectedDonationTypeID=g.selectedDonationTypeId,v.savingData=!1,v.loadingCircuit=!1,N(g.convention),v.userAnonymous||v.userSignup?C(v.anonymousCongSelection):i(d.routes.DONOR_PROFILE).get(null,function(n){C(n)}),v.sectionCollapsed=[];for(var o=0;o<=10;o++)v.sectionCollapsed[o]=!0;var t=n.$watch("vm.forceExpandOnlineDonation",function(){angular.isDefined(v.forceExpandOnlineDonation)&&(v.sectionCollapsed[1]=!v.forceExpandOnlineDonation,t())});v.appInitComplete=!0}()}angular.module("donDonations").controller("DonationsController",n),n.$inject=["$scope","$location","$window","$resource","$filter","$timeout","$sce","$q","LITERALS","CORE","DATA"]}();
//# sourceMappingURL=../../maps/apps/donDonations/donDonations.ctrl.js.map
