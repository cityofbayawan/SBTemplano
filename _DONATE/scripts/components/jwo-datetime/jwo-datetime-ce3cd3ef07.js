!function(){"use strict";function calculateYearsFromDate(e,t){return function(a){var r=t("getISODate")(a);if(r&&(a=r),isNaN(Date.parse(a)))return"";var i=new Date(a),n=t("currentDate")(),l=n.getTime()-i.getTime(),o=l/1e3/60/60/24/365.242199;o=i.getMonth()==n.getMonth()&&i.getDate()==n.getDate()?Math.round(o):Math.floor(10*o)/10;var c=o.toFixed(1),s=e.languageNumerals;for(var D in s)c=c.replace(new RegExp(D,"g"),s[D]);return c}}function currentDate(e){return function(){var t=new Date(e.currentUTCDate);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}}function getISODate(e){return function(t){if(angular.isUndefined(t)&&!t)return"";if(!new RegExp(e.regExpDateInput).test(t))return"";var a=e.timePatterns.NUMERIC_DATE;a=a.replace("%Y","yyyy"),a=a.replace("%m","MM"),a=a.replace("%d","dd");var r=t.substr(a.indexOf("yyyy"),4),i=t.substr(a.indexOf("MM"),2),n=t.substr(a.indexOf("dd"),2),l=parseInt(r),o=parseInt(i),c=parseInt(n),s=!1;if(2==o){var D=1==new Date(l,1,29).getMonth();s=c<=28||29==c&&D}else s=[4,6,9,11].indexOf(o)>=0?c<=30:c<=31;return s?r+"-"+i+"-"+n:""}}function formatDate(e,t){return function(a,r,i){var n=t("getISODate")(a);if(n&&(a=n),isNaN(Date.parse(a)))return"";var l=e.timePatterns;if(!l.hasOwnProperty(r))return"";var o=new Date(a),c=e.timeMonthDays,s=e.timeMonths,D=e.timeWeekDays,u=e.timeMeridiems,f=e.languageNumerals,p=o.getUTCFullYear(),m=o.getUTCMonth()+1,g=o.getUTCDate(),M=0===o.getUTCDay()?7:o.getUTCDay(),d=o.getUTCHours(),w=o.getUTCMinutes(),j=o.getUTCSeconds(),v=(o.getUTCMilliseconds(),0==d?12:d);v>12&&(v-=12);var O=l[r],h=O;h=h.replace("%Y",p),h=h.replace("%m",("0"+m).slice(-2)),h=h.replace("%e",(" "+g).slice(-2)),h=h.replace("%-e",g),h=h.replace("%d",("0"+g).slice(-2)),h=h.replace("%l",v),h=h.replace("%I",("0"+v).slice(-2)),h=h.replace("%H",("0"+d).slice(-2)),h=h.replace("%M",("0"+w).slice(-2)),h=h.replace("%S",("0"+j).slice(-2));var T=d<12?u[0].MeridiemSfx:u[1].MeridiemSfx;if(h=h.replace("%p",T),h=h.replace("%au",D[M].WeekDayUpAbbr),h=h.replace("%al",D[M].WeekDayLoAbbr),h=h.replace("%Au",D[M].WeekDayUpName),h=h.replace("%Alu",D[M].WeekDayLocUpName),h=h.replace("%All",D[M].WeekDayLocLoName),h=h.replace("%Al",D[M].WeekDayLoName),h=h.replace("%bu",s[m].MonthUpAbbr),h=h.replace("%bl",s[m].MonthLoAbbr),h=h.replace("%Bnu",s[m].MonthNomUpName),h=h.replace("%Bnl",s[m].MonthNomLoName),h=h.replace("%Bgu",s[m].MonthGenUpName),h=h.replace("%Bgl",s[m].MonthGenLoName),h=h.replace("%Blu",s[m].MonthLocUpName),h=h.replace("%Bll",s[m].MonthLocLoName),h=h.replace("%Bnc",s[m].MonthNomCapsName),h=h.replace("%ds",g+c[g].MonthDaySfx),h=h.replace("%1ds",1==g?g+c[g].MonthDaySfx:g),!i)for(var $ in f)h=h.replace(new RegExp($,"g"),f[$]);return h}}function jwoValidDate(e,t){return{restrict:"A",require:"ngModel",link:function(e,a,r,i){i.$validators.jwoValidDate=function(e,a){return!!t("getISODate")(e)}}}}function jwoMinDate(e,t){return{restrict:"A",require:"ngModel",link:function(e,a,r,i){i.$validators.jwoMinDate=function(e,a){if(!r.jwoMinDate)return!1;var i=r.jwoMinDate;i=i.replace(/"/gi,"");var n=new Date(i),l=t("getISODate")(e),o=new Date(l);return o.setTime(o.getTime()+60*o.getTimezoneOffset()*1e3),n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3),o>=n}}}}function jwoMaxDate(e,t){return{restrict:"A",require:"ngModel",link:function(e,a,r,i){i.$validators.jwoMaxDate=function(e,a){if(!r.jwoMaxDate)return!1;var i=r.jwoMaxDate;i=i.replace(/"/gi,"");var n=new Date(i),l=t("getISODate")(e),o=new Date(l);return o.setTime(o.getTime()+60*o.getTimezoneOffset()*1e3),n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3),new Date(l)<=n}}}}function jwoValidBaptismDate(CORE,$filter){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ctrl){var strBirthDate=null;if(attrs.jwoValidBaptismDate){var options=eval("("+attrs.jwoValidBaptismDate+")");options.birthDate&&scope.$watch(options.birthDate,function(e){strBirthDate=$filter("getISODate")(e),ctrl.$validate()})}ctrl.$validators.jwoValidBaptismDate=function(e,t){var a=$filter("getISODate")(e);return!strBirthDate||!a||new Date(a)>=new Date(strBirthDate)}}}}angular.module("jwoDatetime",[]).filter("calculateYearsFromDate",calculateYearsFromDate).filter("currentDate",currentDate).filter("getISODate",getISODate).filter("formatDate",formatDate).directive("jwoMaxDate",jwoMaxDate).directive("jwoMinDate",jwoMinDate).directive("jwoValidBaptismDate",jwoValidBaptismDate).directive("jwoValidDate",jwoValidDate),calculateYearsFromDate.$inject=["CORE","$filter"],currentDate.$inject=["CORE"],getISODate.$inject=["CORE"],formatDate.$inject=["CORE","$filter"],jwoValidDate.$inject=["CORE","$filter"],jwoMinDate.$inject=["CORE","$filter"],jwoMaxDate.$inject=["CORE","$filter"],jwoValidBaptismDate.$inject=["CORE","$filter"]}();
//# sourceMappingURL=../../maps/components/jwo-datetime/jwo-datetime.js.map
