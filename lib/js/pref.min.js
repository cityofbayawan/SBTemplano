!function(a,b){"use strict";a(function(){function c(){a.get(sprintf("/%s/wol/libraryname/%s/%s/%s/%s",b.getUILanguage(),b.getRsConfigSymbol(),b.getLibrarySymbol(),b.getRsConfigSymbol(),b.getLibrarySymbol()),function(b){a("#primaryLibrary").html(b.replace("{route}","li"))}),a.get(sprintf("/%s/wol/libraryname/%s/%s/%s/%s",b.getUILanguage(),b.getRsConfigSymbol(),b.getLibrarySymbol(),null,null),function(c){a("#syncLibrary").html(c.replace("{route}","sysl").replace("{locale}",b.getLibraryLocale()).replace("{rsconf}",b.getRsConfigSymbol()).replace("{library}",b.getLibrarySymbol()))}),e.prop("checked",e.val()),f.prop("checked",f.val()),a("input[name=videoRes]").val([b.utilities.getVideoResolution()]),a("input[name=p]").val([b.utilities.getSearchProximity()]),b.fontSizeManager.reset(),b.utilities.updateFontSize(!1)}var d=a(".requireJavaScript");d.show(),b.cookiesEnabled()||(a("#preferencesNoCookies").show(),d.hide());var e=a("#audioPlayerContainer").find("input"),f=a("#audioContinuousPlayContainer").find("input");a("#fontSizeLarger").on("click",function(){return b.fontSizeManager.increment()&&b.utilities.updateFontSize(!1),!1}),a("#fontSizeSmaller").on("click",function(){return b.fontSizeManager.decrement()&&b.utilities.updateFontSize(!1),!1}),a("#resetPreferences").on("click",function(a){a.preventDefault(),b.utilities.removeCookie("locale"),b.utilities.removeCookie("rsconf"),b.utilities.removeCookie("lib"),b.utilities.removeCookie("lang"),b.utilities.removeCookie("ckLang"),b.utilities.removeCookie("synclocale"),b.utilities.removeCookie("syncrsconf"),b.utilities.removeCookie("synclib"),b.utilities.removeCookie("synclang"),b.utilities.removeCookie("audioPlayer"),b.utilities.removeCookie("audioContinuousPlay"),b.utilities.removeCookie("jwplayer.qualityLabel"),b.utilities.removeCookie("prox"),b.utilities.removeCookie("rank"),b.utilities.removeCookie("fontScale"),c()}),a("#savePreferences").on("click",function(c){c.preventDefault(),e.prop("checked")?b.enableFeature("audioPlayer"):b.disableFeature("audioPlayer"),f.prop("checked")?b.enableFeature("audioContinuousPlay"):b.disableFeature("audioContinuousPlay"),b.utilities.setCookie("jwplayer.qualityLabel",a("#videoResolutionSelector").find("[name=videoRes]:checked").attr("value")),b.utilities.setCookie("prox",a("#proximitySelector").find("[name=p]:checked").attr("value")),b.utilities.setCookie("rank",a("#rankSelector").find("[name=r]:checked").attr("value")),b.utilities.updateFontSize(!0);var d=URI().query(!0).url;window.location=d||a("#savePreferences").data("homeUrl")}),a.getJSON(sprintf("/wol/libraryname/%s/%s",b.utilities.getCookie("rsconf")||b.getRsConfigSymbol(),b.utilities.getCookie("lib")||b.getLibrarySymbol()),function(c){c.locale=b.getUILanguage(),c.rsconf=b.getRsConfigSymbol(),c.lib=b.getLibrarySymbol(),c.route="li",a("#primaryLibrary").html(Handlebars.templates.LibraryName(c))}),a.getJSON(sprintf("/wol/libraryname/%s/%s",b.utilities.getCookie("syncrsconf")||b.utilities.getCookie("rsconf")||b.getRsConfigSymbol(),b.utilities.getCookie("synclib")||b.utilities.getCookie("lib")||b.getLibrarySymbol()),function(c){c.locale=b.getUILanguage(),c.rsconf=b.getRsConfigSymbol(),c.lib=b.getLibrarySymbol(),c.route="sysl",b.utilities.getCookie("syncrsconf")&&b.utilities.getCookie("synclib")||(c.libraryName="-"),a("#syncLibrary").html(Handlebars.templates.LibraryName(c).replace("{locale}",b.getLibraryLocale()).replace("{rsconf}",b.getRsConfigSymbol()).replace("{library}",b.getLibrarySymbol()))}),e.prop("checked",b.audioPlayerVisible),f.prop("checked",b.utilities.audioContinuousPlayEnabled),a("input[name=videoRes]").val([b.utilities.getVideoResolution()]),a("input[name=p]").val([b.utilities.getSearchProximity()]),b.utilities.updateFontSize(!1)})}(jQuery,app);
