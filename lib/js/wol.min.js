"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return null!==this&&null!==a&&this.slice(0,a.length)===a}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(a){return null!==this&&null!==a&&this.slice(-a.length)===a}),"function"!=typeof String.prototype.replaceToken&&(String.prototype.replaceToken=function(a,b){if(null!==this&&null!==a){var c="{"+a+"}",d=new RegExp(c,"g");return this.replace(d,b)}return this}),"function"!=typeof jQuery.cachedScript&&(jQuery.cachedScript=function(a,b){"use strict";return b=$.extend(b||{},{dataType:"script",cache:!0,url:a}),jQuery.ajax(b)}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(a){if(null==this)throw new TypeError('"this" is null or not defined');var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var d=arguments[1],e=0;e<c;){var f=b[e];if(a.call(d,f,e,b))return e;e++}return-1}}),$.settle||($.settle=function(a){"use strict";var b;return b=Array.isArray(a)?a:Array.prototype.slice.call(arguments),$.when.apply($,b.map(function(a){return(!a||"object"!=typeof a&&"function"!=typeof a||"function"!=typeof a.then)&&(a=$.Deferred().resolve(a)),a.then(function(a){return a},function(a){return $.Deferred().resolve(new Error(a))})})).then(function(){return Array.prototype.slice.call(arguments)})});var wolConstants={TOKENS_BibleBookName:"BibleBookName",TOKENS_BibleBookNameAndChapter:"BibleBookNameAndChapter",TOKENS_BibleChapter:"BibleChapter",TOKENS_StartingBibleChapter:"StartingBibleChapter",TOKENS_EndingBibleChapter:"EndingBibleChapter",TOKENS_BibleVerse:"BibleVerse",TOKENS_StartingBibleVerse:"StartingBibleVerse",TOKENS_EndingBibleVerse:"EndingBibleVerse",TOKENS_DateTime:"DateTime",TOKENS_LanguageCount:"LanguageCount",TOKENS_LanguageName:"LanguageName",TOKENS_LibraryName:"LibraryName",TOKENS_AlternateSuggestion:"AlternateSuggestion",TOKENS_LanguageLink:"LanguageLink",TOKENS_Link:"Link",TOKENS_URL:"URL",TOKENS_TotalLanguages:"TotalLanguages",TOKENS_PublicationSymbol:"PublicationSymbol",TOKENS_PageNumber:"PageNumber",TOKENS_StartingPageNumber:"StartingPageNumber",TOKENS_EndingPageNumber:"EndingPageNumber",TOKENS_ResultsCount:"ResultsCount",TOKENS_ResultsPageCount:"ResultsPageCount",TOKENS_ResultsPageNumber:"ResultsPageNumber",TOKENS_SearchCategory:"SearchCategory",TOKENS_Proximity:"Proximity",TOKENS_DocumentAbbreviation:"DocumentAbbreviation"};!function(a){function b(b){var c=0,d=0;b.clientX&&b.clientY||(b=b.originalEvent),b||(b=window.event),b.pageX||b.pageY?(c=b.pageX,d=b.pageY):(b.clientX||b.clientY)&&(c=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d=b.clientY+document.body.scrollTop+document.documentElement.scrollTop);var e=a(window).scrollTop(),f=/(Chrome\/38\.0\.2125\.67 )/,g=/(Android)/;return f.test(navigator.userAgent)&&g.test(navigator.userAgent)&&(d-=e),{x:c,y:d}}a.fn.pointLink=function(c,d){function e(a){var e=this.href||a.target.href||a.currentTarget.href;return!d(e)||(a._clickorhoverlink_FromTouch=g,c(e,b(a),a),!1)}function f(a){return"touch"===a.originalEvent.pointerType||void 0===a.originalEvent.pointerType&&(app.WindowsPhone||app.iOS||app.Android)}var g=!1,h=(a(this),a(this).find('a:not([role="navigation"] a, .selectionList a, .noTooltips a, a.noTooltips, .itemCaption a, .search a, .topic a, .caption a, a.galleryItem, .docNav a, a.fb)'));h.on("pointerover",function(a){return!!(g=f(a))||e(a)}),h.on("pointerup",function(a){return!g||e(a)}),h.on("pointermove",function(a){return g=!1,!0});var i=0,j=0,k=0,l=0;return h.on("click mouseover",function(a){var b=!1;return"mouseover"===a.type?(i=a.timeStamp,k=a.pageX,l=a.pageY,!0):("click"===a.type&&(j=a.timeStamp,f(a)?(g=!0,b=e(a)):j-100<i?(g=!0,b=e(a)):a.pageX===k&&a.pageY===l?(g=!0,b=e(a)):(b=!g,g=!1)),b)}),this}}(jQuery),function(a){var b=!1;if("function"==typeof define&&define.amd&&(define(a),b=!0),"object"==typeof exports&&(module.exports=a(),b=!0),!b){var c=window.Cookies,d=window.Cookies=a();d.noConflict=function(){return window.Cookies=c,d}}}(function(){function a(){for(var a=0,b={};a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b}function b(c){function d(b,e,f){var g;if("undefined"!=typeof document){if(arguments.length>1){if(f=a({path:"/"},d.defaults,f),"number"==typeof f.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*f.expires),f.expires=h}f.expires=f.expires?f.expires.toUTCString():"";try{g=JSON.stringify(e),/^[\{\[]/.test(g)&&(e=g)}catch(a){}e=c.write?c.write(e,b):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(String(b)),b=b.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),b=b.replace(/[\(\)]/g,escape);var i="";for(var j in f)f[j]&&(i+="; "+j,!0!==f[j]&&(i+="="+f[j]));return document.cookie=b+"="+e+i}b||(g={});for(var k=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,m=0;m<k.length;m++){var n=k[m].split("="),o=n.slice(1).join("=");'"'===o.charAt(0)&&(o=o.slice(1,-1));try{var p=n[0].replace(l,decodeURIComponent);if(o=c.read?c.read(o,p):c(o,p)||o.replace(l,decodeURIComponent),this.json)try{o=JSON.parse(o)}catch(a){}if(b===p){g=o;break}b||(g[p]=o)}catch(a){}}return g}}return d.set=d,d.get=function(a){return d.call(d,a)},d.getJSON=function(){return d.apply({json:!0},[].slice.call(arguments))},d.defaults={},d.remove=function(b,c){d(b,"",a(c,{expires:-1}))},d.withConverter=b,d}return b(function(){})}),function(a){a.fn.insertTag=function(b,c,d,e,f){function g(b){return a.support.leadingWhitespace?b:b.replace(/^ /,"&#xA0;")}var h=function(b){var c=a(),d=a(b);return d.length>0&&function a(b){var d;if(3===b.nodeType)"\n"!==b.nodeValue&&c.push(b);else for(d=0;d<b.childNodes.length;d++)a(b.childNodes[d])}(d[0]),c}(this);return function(){var i,j,k,l,m,n,o=h.length,p=0;for(i=0;i<o;i++){if(j=a(h[i]),m=j.text(),k=b-p,b<p+m.length){c<p+m.length?(l=c-p,m===m.substr(k,l-k)&&m.length===j.parent().text().length?j.parent().addClass(f):(n=g(m.substr(0,k)),n+=d,n+=g(m.substr(k,l-k)),n+=e,n+=g(m.substr(l)),j.replaceWith(n))):m===m.substr(k)&&m.length===j.parent().text().length?j.parent().addClass(f):(n=g(m.substr(0,k)),n+=d,n+=g(m.substr(k)),n+=e,j.replaceWith(n)),p+=m.length,i++;break}p+=m.length}for(;i<o;i++)if(j=a(h[i]),m=j.text(),p<c){if(c<p+m.length){if(m===m.substr(0,l)&&m.length===j.parent().text().length){j.parent().addClass(f);break}l=c-p,n=d,n+=g(m.substr(0,l)),n+=e,n+=g(m.substr(l)),j.replaceWith(n);break}m===j.parent().text()?j.parent().addClass(f):(n=d,n+=g(m),n+=e,j.replaceWith(n)),p+=m.length}}(),this}}(jQuery),function(a){a.fn.jumpTo=function(b,c){var d={marginTop:0,marginBottom:0,positionRatio:.05};if(b=a.extend(d,b),this.length>0){var e,f=a(this),g=(a(window).height()-b.marginTop-b.marginBottom)*b.positionRatio+b.marginTop;return f.is(":visible")?e=f.offset().top:(f.show(),e=f.offset().top,f.css("display","")),a("html, body").animate({scrollTop:e-(a("#regionMain").offset().top+g)},"medium"),!0}return!1}}(jQuery),/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||n<f)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120==0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a){"use strict";var b=(Modernizr.touchevents,!1);!function(){var a=navigator.userAgent.match(/(?:iPad|iPhone|iPod);.*?OS (\d+)_/i);if(a){var c=Number(a[1]);b=c<=5}}();var c=function(a){return"MSPointerDown"===a.type||"MSPointerUp"===a.type||"MSPointerMove"===a.type||"pointerdown"===a.type||"pointerup"===a.type||"pointermove"===a.type},d=function(a){var b;return c(a)?(b=a.target.parentNode.offsetLeft,a.originalEvent.clientX-b):(b=a.target.parentNode.offsetLeft,a.originalEvent.touches&&a.originalEvent.touches.length>0?a.originalEvent.touches[0].pageX-window.scrollX-b:a.originalEvent.changedTouches[0].pageX-window.scrollX-b)},e=function(a){var b;return c(a)?(b=a.target.parentNode.offsetTop,a.originalEvent.clientY-b):(b=a.target.parentNode.offsetTop,a.originalEvent.touches&&a.originalEvent.touches.length>0?a.originalEvent.touches[0].pageY-window.scrollY-b:a.originalEvent.changedTouches[0].pageY-window.scrollY-b)};a.fn.singleclickortap=function(){var c,f,g,h,i=0;"string"==typeof arguments[i]&&(c=arguments[i],i++),"function"==typeof arguments[i+1]&&(f=arguments[i],i++),"function"==typeof arguments[i]&&(g=arguments[i],i++),"object"==typeof arguments[i]&&(h=arguments[i],i++);var j={hasTimeout:!0,acceptableClickRange:20};if(h=a.extend(j,h),b)this.on("click",c,f,g);else if(app.isPointerDevice){var k,l,m=!1,n=null;this.on("pointerdown",c,f,function(a){m=!1,window.clearTimeout(n),n=setTimeout(function(){m=!0,n=null},1e3),k=d(a),l=e(a)}).on("pointerup",c,f,function(a){window.clearTimeout(n),n=null;var b=d(a),c=e(a),f=Math.abs(b-k),i=Math.abs(c-l);!m&&f<h.acceptableClickRange&&i<h.acceptableClickRange&&g(a)})}else{var o,p=0;this.on("mousedown",c,f,function(a){o=a}).on("click",c,f,function(a){if(o||(o=a),1===++p){var b=Math.abs(a.clientX-o.clientX),c=Math.abs(a.clientY-o.clientY);h.hasTimeout?setTimeout(function(){1===p&&b<h.acceptableClickRange&&c<h.acceptableClickRange&&g(a),p=0},300):(1===p&&b<h.acceptableClickRange&&c<h.acceptableClickRange&&g(a),p=0)}})}return this}}(jQuery),function(a,b){"use strict";function c(c,d){d=d+"_"+Math.floor(1e4*Math.random());var e=c.data("json-src"),h=c.data("img-src"),i=c.attr("id")||"",j=c.attr("class")||"",k=new r(e,!0);return k.setPageID(i+d),k.setPosterImage(h),k.listFileTypes().fail(function(b){a(c.selector).parent().find(".videoErrorNotice").hide().removeClass("hidden").fadeIn(t);a(".tooltip "+c.selector).remove()}).then(function(a){return k.getPlaylist().build(null,a[0].name)}).then(function(e){var f=b.utilities.getVideoResolution();a(c.selector).closest(".tooltip").length>0&&(f="240p");for(var g=0;g<e[0].sources.length;g++)if(e[0].sources[g].label===f){e[0].sources[g].default=!0;break}var h=c.hasClass("constrainedHeight"),k=c.css("height"),l=c.css("width"),m=a('<div class="jwPlayerHolder"/>');m.addClass(j);var n,o;i===v?n="100%":h?(n="100%",o="inherit"):(n=k,o=l),m.css("height",n).css("width",o),c.replaceWith(m);var p=a("<div/>");return p.attr("id",i||"player-"+d),p.appendTo(m),new q(p,e,!0)}).then(function(c){a(".accessibilityControls").remove(),f(c),b.utilities.isSignLanguage()&&b.utilities.signLanguageVideoEnabled()&&c.player.onReady(function(){s.length>0?(c.playSettings=s[0],s={}):c.playSettings=c.playSettings||{autoPlay:!1,startTime:0,stopTime:0},c.playSettings.autoPlay&&g(c,c.playSettings.startTime,c.playSettings.stopTime),c.player.onTime(function(a){c.playSettings.stopTime>0&&a.position>c.playSettings.stopTime&&(c.player.pause(),c.playSettings.stopTime=0)}),c.player.onSeek(function(){c.playSettings.seekViaAPI||(c.playSettings.stopTime=0),c.playSettings.seekViaAPI=!1}),c.player.onPlay(function(){b.mediaMarker.autoScrollEnabled=!0,b.media.lastSelector=c.playSettings.startTime})})})}function d(b){a(b).find("video").each(function(b){var d=a(this);n(d),c(d,b)})}function e(a){a="object"==typeof a?a.id:a,Object.keys(b.video.mediaPlayers).forEach(function(c){document.getElementById(c)&&c!==a||(b.video.mediaPlayers[c].player.pause(),b.video.mediaPlayers[c].player.destroyPlayer(),delete b.video.mediaPlayers[c])})}function f(a){e(),a&&(b.video.mediaPlayers[a.id]=a)}function g(a,c,d){b.utilities.isSignLanguage()&&a.player.setMute(!0),a.cue(c,d),a.player.play(!0)}function h(a,c,d,e){e=e&&b.utilities.isSignLanguage(),a?(a.playSettings=a.playSettings||{},a.playSettings.startTime=c,a.playSettings.stopTime=d,a.playSettings.seekViaAPI=!0,e?g(a,c,d):a.cue(c,d)):s=[{autoPlay:!!e,startTime:c,stopTime:d,seekViaAPI:!0}]}function i(){var d=a("#videoUrl");if(d.length>0){var e=a("#videoWrapper"),f=d.data("json-src"),g=d.data("img-src");if(""!==f){a("#regionMain").addClass("hasVideoPlayer");var h=e.find("video");h.data("json-src",f).data("img-src",g).addClass("jwPlayerHolder").addClass("placeholder").addClass("constrainedHeight");var i=a("#videoMarkers");i.length>0&&(b.video.videoMarkers=i.data("json-markers")),e.fadeIn(t),c(h).then(function(){l().player.onTime(function(a){b.mediaMarker.updateVideoPosition(a.position)}),j(),a(document).on("texthighlighted",function(){j()}),a(document).on("textunhighlighted",function(){p()&&b.video.mediaPlayers[l().id].player.pause()})})}}}function j(){var c=b.highlightManager.getHighlightedElements(),d=c.map(function(a,c){var d=b.utilities.getFirstActionableIdInScope(!1,[c]);return b.isBibleDocument()?b.getVerseNumberFromIDAttribute(d):b.getParagraphIDFromIDAttribute(d)}).get();d=d.filter(function(a,b){return this.indexOf(a)===b},d);var e=[];if(d.forEach(function(a){null!=b.video.videoMarkers[a]&&e.push(b.video.videoMarkers[a])}),e.length>0){e.sort(function(a,b){return parseFloat(a.startTime)-parseFloat(b.startTime)});var f=e[0].startTime,g=e[e.length-1],i=g.startTime+g.duration;h(l(),f,i,!0)}else c.length>0&&a("#"+l().id).parent().siblings(".videoNoticeContainer").find(".noMarkerNotice").fadeIn(t).delay(u/2).fadeOut(u/2)}function k(d,e,f,g){var i=e+f;if(a("[id="+d+"]").length>1)return void setTimeout(function(){k(d,e,f,g)},10);var j=a("#"+d);n(j),c(j).then(function(){h(b.video.mediaPlayers[d],e,i,g)})}function l(){return b.video.mediaPlayers[v]}function m(){var a={};return Object.keys(b.video.mediaPlayers).forEach(function(c){a[c]=b.video.mediaPlayers[c].player.getState()}),a}function n(a){var b=parseInt(a.parent().width(),10),c=9*b/16;a.css("width",b+"px").css("height",c+"px").addClass("jwPlayerHolder").addClass("placeholder")}function o(){a("#article").find("video").each(function(){var b=a(this);n(b),n(b)})}function p(){return"PLAYING"===m()[l().id]}var q=jscore.module.require("MediaPlayer"),r=(jscore.module.require("MediaPlaylist"),jscore.module.require("PubMediaResource")),s=[],t=250,u=3e3,v="player-shared";"function"!=typeof q.prototype.cue&&(q.prototype.cue=function(a,b){if(!(a<=0&&b<=0)){var c=this,d=!0;this.player.onPlay(function(){if(!0===d){var e=!0,f=!0;c.player.onSeek(function(){d=!1}),c.player.onTime(function(){if(!0===f){c.player.getPosition()+1<a?c.player.seek(a):f=!1}}),c.player.onBufferChange(function(){!0===e&&(c.player.play(!0),e=!1)}),c.playSettings.stopTime=b,c.player.seek(a)}})}}),b.video={setupVideoPlaceHolder:o,setupEmbeddedVideoPlayer:d,destroyPlayers:e,mediaPlayers:{},videoMarkers:{},cueVideoForPlayback:h,setupSharedPlayer:i,getSharedPlayer:l,setupTooltipPlayer:k,getPlayersState:m,isPlayerPlaying:p}}(jQuery,app),function(a){a.fn.wolTooltip=function(b,c,d,e){e=a.extend({},e);var f,g,h=a(this),i=a("<div/>").addClass(d).attr("dir",e.rtl?"rtl":"ltr"),j=navigator.pointerEnabled,k=!!navigator.userAgent.match(/(iPad|iPhone|iPod);/i),l=!!(navigator.userAgent.match(/IEMobile/)||navigator.userAgent.match(/Trident/)&&j);e.fontScale&&i.css("font-size",100*e.fontScale+"%"),l&&(i.css("overflow-y","auto"),a(document).css("overflow-y","auto")),a(".tooltip").each(function(){a(this).hide().find(".closeBtn").click()}),f=i.append(h).window({complete:function(){a(e.target).off(".tooltip"),f=void 0,e.complete&&e.complete()},rendered:function(){k&&i.css("-webkit-overflow-scrolling","touch"),app.images.placeholders()},css:{top:c,left:b},modal:!1,rtl:e.rtl,parent:a(e.target).closest("#regionMain")}),i.on("mouseenter",function(b){i.on("mousewheel",function(b,c){var d=a(this);return!(0<c&&d.prop("scrollTop")<=0)&&(!(c<0&&d.prop("scrollTop")+d.prop("offsetHeight")>=d.prop("scrollHeight"))&&void 0)})}),f.form.find(".closeBtn").on("click",function(){f.close()});var m="scroll.tooltip pointermove.tooltip pointerenter.tooltip pointerdown.tooltip pointerover.tooltip mousewheel.tooltip DOMMouseScroll.tooltip";return a(e.target).on(m,function(a){a.stopPropagation()}),i.on(m,function(a){a.stopPropagation()}),a(document).on("scroll.tooltip mousewheel.tooltip pointermove.tooltip pointerdown.tooltip",function(b){var c=b.originalEvent&&b.originalEvent.pointerType&&"mouse"===b.originalEvent.pointerType,d="scroll"===b.type,h="pointerdown"===b.type,j="pointermove"===b.type,k=c&&j||d||!c&&!j||h;f&&k?g=setTimeout(function(){var b=a(e.target).is(":hover")||i.is(":hover"),g=k&&(!b&&c||d&&!b&&c||!c&&!d||h);if(f&&g){var l=app.video.getPlayersState();if(Object.keys(l).some(function(a){return"PLAYING"===l[a]&&f.form.find("#"+a).length>0})&&j)return;f.close()}},500):0===a(".tooltip").length&&a(document).off(".tooltip")}),this}}(jQuery),function(a){a.fn.typingSuggestionList=function(b,c,d,e){function f(a){return 9===a||13===a||27===a||37===a||38===a||39===a||40===a}function g(){return n}function h(){d.fadeOut(function(){n=void 0,o=void 0,p=void 0,e.hideComplete()})}function i(f){var g=++q;f&&a.getJSON(b(f),function(b){var h;if(!(q>g||0===b.items.length)){n=b.items,o=-1,p=f,h="<ul>",a.each(n,function(a,b){this.label?h+='<li data-index="'+a+'">'+this.caption+' <span class="caption">'+this.label+"</span></li>":h+='<li data-index="'+a+'">'+this.caption+"</li>"}),h+="</ul>",r.html(h),r.find("li").on("click",function(){location.href=c(n[a(this).data("index")])}),r.find("li").on("mouseenter",function(){var b=r.find("li");b.removeClass("sgSel"),o=b.index(this),a(this).addClass("sgSel")});var i=s[0].getBoundingClientRect();d.css({width:s.innerWidth(),left:i.left,top:i.top+s.height()}),d.show(),e.showComplete()}})}function j(b){a.trim(b).length&&i(b)}function k(a){if(13===a){if(g()&&-1!==o)return r.find("li").eq(o).click(),!1}else{if(27===a)return g()?(s.val(p),h()):s.val(""),!1;if(9===a||38===a||40===a)return!g()||(o>-1&&r.find("li").eq(o).removeClass("sgSel"),38===a?-1===o?o=n.length-1:o-=1:9!==a&&40!==a||(o===n.length-1?o=-1:o+=1),-1===o?s.val(p):(r.find("li").eq(o).addClass("sgSel"),s.val(n[o].query)),!1)}}function l(){return-1!==s.val().indexOf(";")}function m(a){var b=s.val();0===b.length||l()?h():f(a)||j(b)}var n,o,p,q=0,r=a("<div/>"),s=a(this),t={showComplete:function(){},hideComplete:function(){}};return e=a.extend(t,e),d.append(r),s.keydown(function(a){return k(a.keyCode)}).keyup(function(a){m(a.keyCode)}).blur(function(){h()}),this}}(jQuery),function(a){a.fn.window=function(b){function c(){l=a(window).height(),m=a(window).width(),n=a(document).scrollLeft(),o=a(document).scrollTop(),p=a(document).height(),q=a(document).width()}function d(){g.fadeOut({duration:"fast",always:function(){g.remove(),g=void 0}}),b.modal&&h.fadeOut({duration:"fast",always:function(){h.remove(),h=void 0}}),a(document).off("keyup",i),b.complete()}function e(){var a=g;if(b.css.top){var c=l/2+o,d=o+l;if(b.css.top+a.outerHeight()<d)return b.css.top+b.offset;if(b.css.top-a.outerHeight()>o)return b.css.top-a.outerHeight()-b.offset;var e=l/2-2*b.offset;return a.children().first().height(e),c>b.css.top?b.css.top+b.offset:b.css.top-e-b.offset}return o+l/2-a.outerHeight()/2}function f(){return b.css.left?b.rtl?b.css.left-g.outerWidth()<n?n:b.css.left-g.outerWidth():b.css.left+g.outerWidth()+b.offset>n+m?n+m-g.outerWidth()-b.offset:b.css.left+b.offset:n+m/2-g.outerWidth()/2}var g,h,i,j={ok:function(){return!0},css:{},init:function(){},complete:function(){},rendered:function(){},offset:12,modal:!0,modalTransparency:.2,rtl:!1},k={width:"auto",height:"auto"},l=a(window).height(),m=a(window).width(),n=a(document).scrollLeft(),o=a(document).scrollTop(),p=a(document).height(),q=a(document).width(),r=this;return i=function(a){27===a.keyCode?d():13===a.keyCode&&b.ok()&&d()},b=a.extend(j,b),b.css=a.extend(k,b.css),r.css(b.css),g=r.wrapAll("<div/>").parent().wrapAll("<div/>").parent().css({position:"absolute","z-index":999,overflow:"visible",height:"auto"}),b.modal&&(h=a("<div/>").css({position:"absolute","z-index":998,height:p,width:q,top:0,left:0,background:"black"}).on("touchstart touchmove touchend MSPointerDown MSPointerMove MSPointerUp",function(a){a.stopPropagation()}).on("click",function(a){d()})),a(document).on("keyup",i),a(window).on("resize",function(){c(),g&&g.css({top:e(),left:f()}),h&&h.css({height:p,width:q,top:0,left:0}),b.rendered()}),a(function(){var d=a("body");b.parent&&(d=a(b.parent)),b.modal&&h.appendTo(d).fadeTo(0,b.modalTransparency),c(),g.appendTo(d).css({top:e(),left:f()}).fadeIn("fast",b.init),b.rendered()}),{close:d,form:g}}}(jQuery),/*! @license
 jQuery Waypoints - v2.0.5
 Copyright (c) 2011-2014 Caleb Troughton
 Licensed under the MIT license.
 https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
 */
function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},b=[].slice;!function(a,b){"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(c){return b(c,a)}):b(a.jQuery,a)}(window,function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return e=c(d),l=a.call(d,"ontouchstart")>=0,h={horizontal:{},vertical:{}},i=1,k={},j="waypoints-context-id",o="resize.waypoints",p="scroll.waypoints",q=1,r="waypoints-waypoint-ids",s="waypoint",t="waypoints",f=function(){function a(a){var b=this;this.$element=a,this.element=a[0],this.didResize=!1,this.didScroll=!1,this.id="context"+i++,this.oldScroll={x:a.scrollLeft(),y:a.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[j]=this.id,k[this.id]=this,a.bind(p,function(){var a;if(!b.didScroll&&!l)return b.didScroll=!0,a=function(){return b.doScroll(),b.didScroll=!1},d.setTimeout(a,c[t].settings.scrollThrottle)}),a.bind(o,function(){var a;if(!b.didResize)return b.didResize=!0,a=function(){return c[t]("refresh"),b.didResize=!1},d.setTimeout(a,c[t].settings.resizeThrottle)})}return a.prototype.doScroll=function(){var a,b=this;return a={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!l||a.vertical.oldScroll&&a.vertical.newScroll||c[t]("refresh"),c.each(a,function(a,d){var e,f,g;return g=[],f=d.newScroll>d.oldScroll,e=f?d.forward:d.backward,c.each(b.waypoints[a],function(a,b){var c,e;return d.oldScroll<(c=b.offset)&&c<=d.newScroll?g.push(b):d.newScroll<(e=b.offset)&&e<=d.oldScroll?g.push(b):void 0}),g.sort(function(a,b){return a.offset-b.offset}),f||g.reverse(),c.each(g,function(a,b){if(b.options.continuous||a===g.length-1)return b.trigger([e])})}),this.oldScroll={x:a.horizontal.newScroll,y:a.vertical.newScroll}},a.prototype.refresh=function(){var a,b,d,e=this;return d=c.isWindow(this.element),b=this.$element.offset(),this.doScroll(),a={horizontal:{contextOffset:d?0:b.left,contextScroll:d?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:d?0:b.top,contextScroll:d?0:this.oldScroll.y,contextDimension:d?c[t]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},c.each(a,function(a,b){return c.each(e.waypoints[a],function(a,d){var e,f,g,h,i;if(e=d.options.offset,g=d.offset,f=c.isWindow(d.element)?0:d.$element.offset()[b.offsetProp],c.isFunction(e)?e=e.apply(d.element):"string"==typeof e&&(e=parseFloat(e),d.options.offset.indexOf("%")>-1&&(e=Math.ceil(b.contextDimension*e/100))),d.offset=f-b.contextOffset+b.contextScroll-e,(!d.options.onlyOnScroll||null==g)&&d.enabled)return null!==g&&g<(h=b.oldScroll)&&h<=d.offset?d.trigger([b.backward]):null!==g&&g>(i=b.oldScroll)&&i>=d.offset?d.trigger([b.forward]):null===g&&b.oldScroll>=d.offset?d.trigger([b.forward]):void 0})})},a.prototype.checkEmpty=function(){if(c.isEmptyObject(this.waypoints.horizontal)&&c.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([o,p].join(" ")),delete k[this.id]},a}(),g=function(){function a(a,b,d){var e,f;"bottom-in-view"===d.offset&&(d.offset=function(){var a;return a=c[t]("viewportHeight"),c.isWindow(b.element)||(a=b.$element.height()),a-c(this).outerHeight()}),this.$element=a,this.element=a[0],this.axis=d.horizontal?"horizontal":"vertical",this.callback=d.handler,this.context=b,this.enabled=d.enabled,this.id="waypoints"+q++,this.offset=null,this.options=d,b.waypoints[this.axis][this.id]=this,h[this.axis][this.id]=this,e=null!=(f=this.element[r])?f:[],e.push(this.id),this.element[r]=e}return a.prototype.trigger=function(a){if(this.enabled)return null!=this.callback&&this.callback.apply(this.element,a),this.options.triggerOnce?this.destroy():void 0},a.prototype.disable=function(){return this.enabled=!1},a.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},a.prototype.destroy=function(){return delete h[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},a.getWaypointsByElement=function(a){var b,d;return(d=a[r])?(b=c.extend({},h.horizontal,h.vertical),c.map(d,function(a){return b[a]})):[]},a}(),n={init:function(a,b){return b=c.extend({},c.fn[s].defaults,b),null==b.handler&&(b.handler=a),this.each(function(){var a,d,e,h;return a=c(this),e=null!=(h=b.context)?h:c.fn[s].defaults.context,c.isWindow(e)||(e=a.closest(e)),e=c(e),d=k[e[0][j]],d||(d=new f(e)),new g(a,d,b)}),c[t]("refresh"),this},disable:function(){return n._invoke.call(this,"disable")},enable:function(){return n._invoke.call(this,"enable")},destroy:function(){return n._invoke.call(this,"destroy")},prev:function(a,b){return n._traverse.call(this,a,b,function(a,b,c){if(b>0)return a.push(c[b-1])})},next:function(a,b){return n._traverse.call(this,a,b,function(a,b,c){if(b<c.length-1)return a.push(c[b+1])})},_traverse:function(a,b,e){var f,g;return null==a&&(a="vertical"),null==b&&(b=d),g=m.aggregate(b),f=[],this.each(function(){var b;return b=c.inArray(this,g[a]),e(f,b,g[a])}),this.pushStack(f)},_invoke:function(a){return this.each(function(){var b;return b=g.getWaypointsByElement(this),c.each(b,function(b,c){return c[a](),!0})}),this}},c.fn[s]=function(){var a,d;return d=arguments[0],a=2<=arguments.length?b.call(arguments,1):[],n[d]?n[d].apply(this,a):c.isFunction(d)?n.init.apply(this,arguments):c.isPlainObject(d)?n.init.apply(this,[null,d]):d?c.error("The "+d+" method does not exist in jQuery Waypoints."):c.error("jQuery Waypoints needs a callback function or handler option.")},c.fn[s].defaults={context:d,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},m={refresh:function(){return c.each(k,function(a,b){return b.refresh()})},viewportHeight:function(){var a;return null!=(a=d.innerHeight)?a:e.height()},aggregate:function(a){var b,d,e;return b=h,a&&(b=null!=(e=k[c(a)[0][j]])?e.waypoints:void 0),b?(d={horizontal:[],vertical:[]},c.each(d,function(a,e){return c.each(b[a],function(a,b){return e.push(b)}),e.sort(function(a,b){return a.offset-b.offset}),d[a]=c.map(e,function(a){return a.element}),d[a]=c.unique(d[a])}),d):[]},above:function(a){return null==a&&(a=d),m._filter(a,"vertical",function(a,b){return b.offset<=a.oldScroll.y})},below:function(a){return null==a&&(a=d),m._filter(a,"vertical",function(a,b){return b.offset>a.oldScroll.y})},left:function(a){return null==a&&(a=d),m._filter(a,"horizontal",function(a,b){return b.offset<=a.oldScroll.x})},right:function(a){return null==a&&(a=d),m._filter(a,"horizontal",function(a,b){return b.offset>a.oldScroll.x})},enable:function(){return m._invoke("enable")},disable:function(){return m._invoke("disable")},destroy:function(){return m._invoke("destroy")},extendFn:function(a,b){return n[a]=b},_invoke:function(a){var b;return b=c.extend({},h.vertical,h.horizontal),c.each(b,function(b,c){return c[a](),!0})},_filter:function(a,b,d){var e,f;return(e=k[c(a)[0][j]])?(f=[],c.each(e.waypoints[b],function(a,b){if(d(e,b))return f.push(b)}),f.sort(function(a,b){return a.offset-b.offset}),c.map(f,function(a){return a.element})):[]}},c[t]=function(){var a,c;return c=arguments[0],a=2<=arguments.length?b.call(arguments,1):[],m[c]?m[c].apply(null,a):m.aggregate.call(null,c)},c[t].settings={resizeThrottle:100,scrollThrottle:30},e.on("load.waypoints",function(){return c[t]("refresh")})})}.call(this),/*!
 * jQuery scrollintoview() plugin and :scrollable selector filter
 *
 * Version 1.8 (14 Jul 2011)
 * Version 1.9 (30 Sept 2015) - Chris Barth
 * Requires jQuery 1.4 or newer
 *
 * Copyright (c) 2011 Robert Koritnik
 * Licensed under the terms of the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 */
function(a){function b(b,c,d){h.test(b[0].nodeName)&&(b=a("html,body")),b.animate(c,d).eq(0).queue(function(c){a.isFunction(d.complete)&&d.complete.call(b[0]),c()})}function c(){var b={};return arguments.length>0&&("object"!=typeof arguments[0][0]?(b.duration=arguments[0][0],arguments[0].length>1&&(b.easing=arguments[0][1],arguments[0].length>2&&(b.complete=arguments[0][2]))):b=a.extend(b,arguments[0][0])),b=a.extend({},g,b),b.direction=f["string"==typeof b.direction&&b.direction.toLowerCase()]||f.both,!0===b.direction.x&&(b.direction.selector="horizontal"),!0===b.direction.y&&(b.direction.selector=b.direction.selector?"both":"vertical"),b}function d(){var d=c(arguments),e=this.eq(0),f=e.closest(":scrollable("+d.direction.selector+")");if(f.length>0){f=f.eq(0);var g={e:j(e),s:j(f)},h={top:g.e.rect.top-(g.s.rect.top+g.s.border.top),bottom:g.s.rect.bottom-g.s.border.bottom-g.s.scrollbar.bottom-g.e.rect.bottom,left:g.e.rect.left-(g.s.rect.left+g.s.border.left),right:g.s.rect.right-g.s.border.right-g.s.scrollbar.right-g.e.rect.right},i={};!0===d.direction.y&&(h.top<0?i.scrollTop=g.s.scroll.top+h.top:h.top>0&&h.bottom<0&&(i.scrollTop=g.s.scroll.top+Math.min(h.top,-h.bottom))),!0===d.direction.x&&(h.left<0?i.scrollLeft=g.s.scroll.left+h.left:h.left>0&&h.right<0&&(i.scrollLeft=g.s.scroll.left+Math.min(h.left,-h.right))),a.isEmptyObject(i)?a.isFunction(d.complete)&&d.complete.call(f[0]):b(f,i,d)}return this}function e(){var a=c(arguments),d=this.eq(0),e=d.closest(":scrollable(vertical)");if(e.length>0){e=e.eq(0);var f;f=h.test(e[0].nodeName)?0:e.scrollTop();var g={};g.scrollTop=f+d.offset().top-parseFloat(d.css("margin-top"))-e.offset().top-parseFloat(e.css("margin-top"))-parseFloat(e.css("padding-top"))-parseInt(a.topOffset,10),b(e,g,a)}return this}var f={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},g={direction:"both",topOffset:0},h=/^(?:html)$/i,i=function(b,c){c=c||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(b,null):b.currentStyle);var d=!(!document.defaultView||!document.defaultView.getComputedStyle),e={top:parseFloat(d?c.borderTopWidth:a.css(b,"borderTopWidth"))||0,left:parseFloat(d?c.borderLeftWidth:a.css(b,"borderLeftWidth"))||0,bottom:parseFloat(d?c.borderBottomWidth:a.css(b,"borderBottomWidth"))||0,right:parseFloat(d?c.borderRightWidth:a.css(b,"borderRightWidth"))||0};return{top:e.top,left:e.left,bottom:e.bottom,right:e.right,vertical:e.top+e.bottom,horizontal:e.left+e.right}},j=function(b){var c=a(window),d=h.test(b[0].nodeName);return{border:d?{top:0,left:0,bottom:0,right:0}:i(b[0]),scroll:{top:(d?c:b).scrollTop(),left:(d?c:b).scrollLeft()},scrollbar:{right:d?0:b.innerWidth()-b[0].clientWidth,bottom:d?0:b.innerHeight()-b[0].clientHeight},rect:function(){var a=b[0].getBoundingClientRect();return{top:d?0:a.top,left:d?0:a.left,bottom:d?b[0].clientHeight:a.bottom,right:d?b[0].clientWidth:a.right}}()}};a.fn.extend({scrollIntoView:d,scrollintoview:d,scrollToTop:e,scrolltotop:e});var k={auto:!0,scroll:!0,visible:!1,hidden:!1};a.extend(a.expr[":"],{scrollable:function(a,b,c,d){var e=f["string"==typeof c[3]&&c[3].toLowerCase()]||f.both,g=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null):a.currentStyle,i={x:k[g.overflowX.toLowerCase()]||!1,y:k[g.overflowY.toLowerCase()]||!1,isRoot:h.test(a.nodeName)};if(!i.x&&!i.y&&!i.isRoot)return!1;var j={height:{scroll:a.scrollHeight,client:a.clientHeight},width:{scroll:a.scrollWidth,client:a.clientWidth},scrollableX:function(){return(i.x||i.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(i.y||i.isRoot)&&this.height.scroll>this.height.client}};return e.y&&j.scrollableY()||e.x&&j.scrollableX()}})}(jQuery),function(){"use strict";function a(a){return c(d(a),arguments)}function b(b,c){return a.apply(null,[b].concat(c||[]))}function c(b,c){var d,f,g,h,i,j,k,l,m,n=1,o=b.length,p="";for(f=0;f<o;f++)if("string"==typeof b[f])p+=b[f];else if(Array.isArray(b[f])){if(h=b[f],h[2])for(d=c[n],g=0;g<h[2].length;g++){if(!d.hasOwnProperty(h[2][g]))throw new Error(a('[sprintf] property "%s" does not exist',h[2][g]));d=d[h[2][g]]}else d=h[1]?c[h[1]]:c[n++];if(e.not_type.test(h[8])&&e.not_primitive.test(h[8])&&d instanceof Function&&(d=d()),e.numeric_arg.test(h[8])&&"number"!=typeof d&&isNaN(d))throw new TypeError(a("[sprintf] expecting number but found %T",d));switch(e.number.test(h[8])&&(l=d>=0),h[8]){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,h[6]?parseInt(h[6]):0);break;case"e":d=h[7]?parseFloat(d).toExponential(h[7]):parseFloat(d).toExponential();break;case"f":d=h[7]?parseFloat(d).toFixed(h[7]):parseFloat(d);break;case"g":d=h[7]?String(Number(d.toPrecision(h[7]))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=h[7]?d.substring(0,h[7]):d;break;case"t":d=String(!!d),d=h[7]?d.substring(0,h[7]):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=h[7]?d.substring(0,h[7]):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=h[7]?d.substring(0,h[7]):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase()}e.json.test(h[8])?p+=d:(!e.number.test(h[8])||l&&!h[3]?m="":(m=l?"+":"-",d=d.toString().replace(e.sign,"")),j=h[4]?"0"===h[4]?"0":h[4].charAt(1):" ",k=h[6]-(m+d).length,i=h[6]&&k>0?j.repeat(k):"",p+=h[5]?m+d+i:"0"===j?m+i+d:i+m+d)}return p}function d(a){if(f[a])return f[a];for(var b,c=a,d=[],g=0;c;){if(null!==(b=e.text.exec(c)))d.push(b[0]);else if(null!==(b=e.modulo.exec(c)))d.push("%");else{if(null===(b=e.placeholder.exec(c)))throw new SyntaxError("[sprintf] unexpected placeholder");if(b[2]){g|=1;var h=[],i=b[2],j=[];if(null===(j=e.key.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(h.push(j[1]);""!==(i=i.substring(j[0].length));)if(null!==(j=e.key_access.exec(i)))h.push(j[1]);else{if(null===(j=e.index_access.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");h.push(j[1])}b[2]=h}else g|=2;if(3===g)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push(b)}c=c.substring(b[0].length)}return f[a]=d}var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},f=Object.create(null);"undefined"!=typeof exports&&(exports.sprintf=a,exports.vsprintf=b),"undefined"!=typeof window&&(window.sprintf=a,window.vsprintf=b,"function"==typeof define&&define.amd&&define(function(){return{sprintf:a,vsprintf:b}}))}(),/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.18.10
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
function(a,b){"use strict";"object"==typeof module&&module.exports?module.exports=b(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],b):a.URI=b(a.punycode,a.IPv6,a.SecondLevelDomains,a)}(this,function(a,b,c,d){"use strict";function e(a,b){var c=arguments.length>=1,d=arguments.length>=2;if(!(this instanceof e))return c?d?new e(a,b):new e(a):new e;if(void 0===a){if(c)throw new TypeError("undefined is not a valid argument for URI");a="undefined"!=typeof location?location.href+"":""}if(null===a&&c)throw new TypeError("null is not a valid argument for URI");return this.href(a),void 0!==b?this.absoluteTo(b):this}function f(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function g(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,-1)}function h(a){return"Array"===g(a)}function i(a,b){var c,d,e={};if("RegExp"===g(b))e=null;else if(h(b))for(c=0,d=b.length;c<d;c++)e[b[c]]=!0;else e[b]=!0;for(c=0,d=a.length;c<d;c++){(e&&void 0!==e[a[c]]||!e&&b.test(a[c]))&&(a.splice(c,1),d--,c--)}return a}function j(a,b){var c,d;if(h(b)){for(c=0,d=b.length;c<d;c++)if(!j(a,b[c]))return!1;return!0}var e=g(b);for(c=0,d=a.length;c<d;c++)if("RegExp"===e){if("string"==typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1}function k(a,b){if(!h(a)||!h(b))return!1;if(a.length!==b.length)return!1;a.sort(),b.sort();for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function l(a){var b=/^\/+|\/+$/g;return a.replace(b,"")}function m(a){return escape(a)}function n(a){return encodeURIComponent(a).replace(/[!'()*]/g,m).replace(/\*/g,"%2A")}function o(a){return function(b,c){return void 0===b?this._parts[a]||"":(this._parts[a]=b||null,this.build(!c),this)}}function p(a,b){return function(c,d){return void 0===c?this._parts[a]||"":(null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1))),this._parts[a]=c,this.build(!d),this)}}var q=d&&d.URI;e.version="1.18.10";var r=e.prototype,s=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}},e.duplicateQueryParameters=!1,e.escapeQuerySpace=!0,e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,e.idn_expression=/[^a-z0-9\.-]/i,e.punycode_expression=/(xn--)/i,e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?Â«Â»â€œâ€â€˜â€™]))/gi,e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?Â«Â»â€œâ€â€žâ€˜â€™]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},e.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},e.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();if("input"!==b||"image"===a.type)return e.domAttributes[b]}},e.encode=n,e.decode=decodeURIComponent,e.iso8859=function(){e.encode=escape,e.decode=unescape},e.unicode=function(){e.encode=n,e.decode=decodeURIComponent},e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},e.encodeQuery=function(a,b){var c=e.encode(a+"");return void 0===b&&(b=e.escapeQuerySpace),b?c.replace(/%20/g,"+"):c},e.decodeQuery=function(a,b){a+="",void 0===b&&(b=e.escapeQuerySpace);try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(b){return a}};var t,u={encode:"encode",decode:"decode"},v=function(a,b){return function(c){try{return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}catch(a){return c}}};for(t in u)e[t+"PathSegment"]=v("pathname",u[t]),e[t+"UrnPathSegment"]=v("urnpath",u[t]);var w=function(a,b,c){return function(d){var f;f=c?function(a){return e[b](e[c](a))}:e[b];for(var g=(d+"").split(a),h=0,i=g.length;h<i;h++)g[h]=f(g[h]);return g.join(a)}};e.decodePath=w("/","decodePathSegment"),e.decodeUrnPath=w(":","decodeUrnPathSegment"),e.recodePath=w("/","encodePathSegment","decode"),e.recodeUrnPath=w(":","encodeUrnPathSegment","decode"),e.encodeReserved=v("reserved","encode"),e.parse=function(a,b){var c;return b||(b={}),c=a.indexOf("#"),c>-1&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c)),c=a.indexOf("?"),c>-1&&(b.query=a.substring(c+1)||null,a=a.substring(0,c)),"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b)):(c=a.indexOf(":"))>-1&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0)),b.path=a,b},e.parseHost=function(a,b){a=a.replace(/\\/g,"/");var c,d,e=a.indexOf("/");if(-1===e&&(e=a.length),"["===a.charAt(0))c=a.indexOf("]"),b.hostname=a.substring(1,c)||null,b.port=a.substring(c+2,e)||null,"/"===b.port&&(b.port=null);else{var f=a.indexOf(":"),g=a.indexOf("/"),h=a.indexOf(":",f+1);-1!==h&&(-1===g||h<g)?(b.hostname=a.substring(0,e)||null,b.port=null):(d=a.substring(0,e).split(":"),b.hostname=d[0]||null,b.port=d[1]||null)}return b.hostname&&"/"!==a.substring(e).charAt(0)&&(e++,a="/"+a),a.substring(e)||"/"},e.parseAuthority=function(a,b){return a=e.parseUserinfo(a,b),e.parseHost(a,b)},e.parseUserinfo=function(a,b){var c,d=a.indexOf("/"),f=a.lastIndexOf("@",d>-1?d:a.length-1);return f>-1&&(-1===d||f<d)?(c=a.substring(0,f).split(":"),b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(f+1)):(b.username=null,b.password=null),a},e.parseQuery=function(a,b){if(!a)return{};if(!(a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var c,d,f,g={},h=a.split("&"),i=h.length,j=0;j<i;j++)c=h[j].split("="),d=e.decodeQuery(c.shift(),b),f=c.length?e.decodeQuery(c.join("="),b):null,s.call(g,d)?("string"!=typeof g[d]&&null!==g[d]||(g[d]=[g[d]]),g[d].push(f)):g[d]=f;return g},e.build=function(a){var b="";return a.protocol&&(b+=a.protocol+":"),a.urn||!b&&!a.hostname||(b+="//"),b+=e.buildAuthority(a)||"","string"==typeof a.path&&("/"!==a.path.charAt(0)&&"string"==typeof a.hostname&&(b+="/"),b+=a.path),"string"==typeof a.query&&a.query&&(b+="?"+a.query),"string"==typeof a.fragment&&a.fragment&&(b+="#"+a.fragment),b},e.buildHost=function(a){var b="";return a.hostname?(e.ip6_expression.test(a.hostname)?b+="["+a.hostname+"]":b+=a.hostname,a.port&&(b+=":"+a.port),b):""},e.buildAuthority=function(a){return e.buildUserinfo(a)+e.buildHost(a)},e.buildUserinfo=function(a){var b="";return a.username&&(b+=e.encode(a.username)),a.password&&(b+=":"+e.encode(a.password)),b&&(b+="@"),b},e.buildQuery=function(a,b,c){var d,f,g,i,j="";for(f in a)if(s.call(a,f)&&f)if(h(a[f]))for(d={},g=0,i=a[f].length;g<i;g++)void 0!==a[f][g]&&void 0===d[a[f][g]+""]&&(j+="&"+e.buildQueryParameter(f,a[f][g],c),!0!==b&&(d[a[f][g]+""]=!0));else void 0!==a[f]&&(j+="&"+e.buildQueryParameter(f,a[f],c));return j.substring(1)},e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(null!==b?"="+e.encodeQuery(b,c):"")},e.addQuery=function(a,b,c){if("object"==typeof b)for(var d in b)s.call(b,d)&&e.addQuery(a,d,b[d]);else{if("string"!=typeof b)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===a[b])return void(a[b]=c);"string"==typeof a[b]&&(a[b]=[a[b]]),h(c)||(c=[c]),a[b]=(a[b]||[]).concat(c)}},e.removeQuery=function(a,b,c){var d,f,j;if(h(b))for(d=0,f=b.length;d<f;d++)a[b[d]]=void 0;else if("RegExp"===g(b))for(j in a)b.test(j)&&(a[j]=void 0);else if("object"==typeof b)for(j in b)s.call(b,j)&&e.removeQuery(a,j,b[j]);else{if("string"!=typeof b)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==c?"RegExp"===g(c)?!h(a[b])&&c.test(a[b])?a[b]=void 0:a[b]=i(a[b],c):a[b]!==String(c)||h(c)&&1!==c.length?h(a[b])&&(a[b]=i(a[b],c)):a[b]=void 0:a[b]=void 0}},e.hasQuery=function(a,b,c,d){switch(g(b)){case"String":break;case"RegExp":for(var f in a)if(s.call(a,f)&&b.test(f)&&(void 0===c||e.hasQuery(a,f,c)))return!0;return!1;case"Object":for(var i in b)if(s.call(b,i)&&!e.hasQuery(a,i,b[i]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(g(c)){case"Undefined":return b in a;case"Boolean":return c===Boolean(h(a[b])?a[b].length:a[b]);case"Function":return!!c(a[b],b,a);case"Array":if(!h(a[b]))return!1;return(d?j:k)(a[b],c);case"RegExp":return h(a[b])?!!d&&j(a[b],c):Boolean(a[b]&&a[b].match(c));case"Number":c=String(c);case"String":return h(a[b])?!!d&&j(a[b],c):a[b]===c;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},e.joinPaths=function(){for(var a=[],b=[],c=0,d=0;d<arguments.length;d++){var f=new e(arguments[d]);a.push(f);for(var g=f.segment(),h=0;h<g.length;h++)"string"==typeof g[h]&&b.push(g[h]),g[h]&&c++}if(!b.length||!c)return new e("");var i=new e("").segment(b);return""!==a[0].path()&&"/"!==a[0].path().slice(0,1)||i.path("/"+i.path()),i.normalize()},e.commonPath=function(a,b){var c,d=Math.min(a.length,b.length);for(c=0;c<d;c++)if(a.charAt(c)!==b.charAt(c)){c--;break}return c<1?a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"":("/"===a.charAt(c)&&"/"===b.charAt(c)||(c=a.substring(0,c).lastIndexOf("/")),a.substring(0,c+1))},e.withinString=function(a,b,c){c||(c={});var d=c.start||e.findUri.start,f=c.end||e.findUri.end,g=c.trim||e.findUri.trim,h=c.parens||e.findUri.parens,i=/[a-z0-9-]=["']?$/i;for(d.lastIndex=0;;){var j=d.exec(a);if(!j)break;var k=j.index;if(c.ignoreHtml){var l=a.slice(Math.max(k-3,0),k);if(l&&i.test(l))continue}for(var m=k+a.slice(k).search(f),n=a.slice(k,m),o=-1;;){var p=h.exec(n);if(!p)break;var q=p.index+p[0].length;o=Math.max(o,q)}if(n=o>-1?n.slice(0,o)+n.slice(o).replace(g,""):n.replace(g,""),!(n.length<=j[0].length||c.ignore&&c.ignore.test(n))){m=k+n.length;var r=b(n,k,m,a);void 0!==r?(r=String(r),a=a.slice(0,k)+r+a.slice(m),d.lastIndex=k+r.length):d.lastIndex=m}}return d.lastIndex=0,a},e.ensureValidHostname=function(b){if(b.match(e.invalid_hostname_characters)){if(!a)throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(a.toASCII(b).match(e.invalid_hostname_characters))throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-]')}},e.noConflict=function(a){if(a){var b={URI:this.noConflict()};return d.URITemplate&&"function"==typeof d.URITemplate.noConflict&&(b.URITemplate=d.URITemplate.noConflict()),d.IPv6&&"function"==typeof d.IPv6.noConflict&&(b.IPv6=d.IPv6.noConflict()),d.SecondLevelDomains&&"function"==typeof d.SecondLevelDomains.noConflict&&(b.SecondLevelDomains=d.SecondLevelDomains.noConflict()),b}return d.URI===this&&(d.URI=q),this},r.build=function(a){return!0===a?this._deferred_build=!0:(void 0===a||this._deferred_build)&&(this._string=e.build(this._parts),this._deferred_build=!1),this},r.clone=function(){return new e(this)},r.valueOf=r.toString=function(){return this.build(!1)._string},r.protocol=o("protocol"),r.username=o("username"),r.password=o("password"),r.hostname=o("hostname"),r.port=o("port"),r.query=p("query","?"),r.fragment=p("fragment","#"),r.search=function(a,b){var c=this.query(a,b);return"string"==typeof c&&c.length?"?"+c:c},r.hash=function(a,b){var c=this.fragment(a,b);return"string"==typeof c&&c.length?"#"+c:c},r.pathname=function(a,b){if(void 0===a||!0===a){var c=this._parts.path||(this._parts.hostname?"/":"");return a?(this._parts.urn?e.decodeUrnPath:e.decodePath)(c):c}return this._parts.urn?this._parts.path=a?e.recodeUrnPath(a):"":this._parts.path=a?e.recodePath(a):"/",this.build(!b),this},r.path=r.pathname,r.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="",this._parts=e._parts();var d=a instanceof e,f="object"==typeof a&&(a.hostname||a.path||a.pathname);if(a.nodeName){a=a[e.getDomAttribute(a)]||"",f=!1}if(!d&&f&&void 0!==a.pathname&&(a=a.toString()),"string"==typeof a||a instanceof String)this._parts=e.parse(String(a),this._parts);else{if(!d&&!f)throw new TypeError("invalid input");var g=d?a._parts:a;for(c in g)s.call(this._parts,c)&&(this._parts[c]=g[c])}return this.build(!b),this},r.is=function(a){var b=!1,d=!1,f=!1,g=!1,h=!1,i=!1,j=!1,k=!this._parts.urn;switch(this._parts.hostname&&(k=!1,d=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=d||f,g=!b,h=g&&c&&c.has(this._parts.hostname),i=g&&e.idn_expression.test(this._parts.hostname),j=g&&e.punycode_expression.test(this._parts.hostname)),a.toLowerCase()){case"relative":return k;case"absolute":return!k;case"domain":case"name":return g;case"sld":return h;case"ip":return b;case"ip4":case"ipv4":case"inet4":return d;case"ip6":case"ipv6":case"inet6":return f;case"idn":return i;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return j}return null};var x=r.protocol,y=r.port,z=r.hostname;r.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(e.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return x.call(this,a,b)},r.scheme=r.protocol,r.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');return y.call(this,a,b)},r.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};if("/"!==e.parseHost(a,c))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');a=c.hostname}return z.call(this,a,b)},r.origin=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){var c=this.protocol();return this.authority()?(c?c+"://":"")+this.authority():""}var d=e(a);return this.protocol(d.protocol()).authority(d.authority()).build(!b),this},r.host=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildHost(this._parts):"";if("/"!==e.parseHost(a,this._parts))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');return this.build(!b),this},r.authority=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildAuthority(this._parts):"";if("/"!==e.parseAuthority(a,this._parts))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');return this.build(!b),this},r.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){var c=e.buildUserinfo(this._parts);return c?c.substring(0,c.length-1):c}return"@"!==a[a.length-1]&&(a+="@"),e.parseUserinfo(a,this._parts),this.build(!b),this},r.resource=function(a,b){var c;return void 0===a?this.path()+this.search()+this.hash():(c=e.parse(a),this._parts.path=c.path,this._parts.query=c.query,this._parts.fragment=c.fragment,this.build(!b),this)},r.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}var d=this._parts.hostname.length-this.domain().length,g=this._parts.hostname.substring(0,d),h=new RegExp("^"+f(g));return a&&"."!==a.charAt(a.length-1)&&(a+="."),a&&e.ensureValidHostname(a),this._parts.hostname=this._parts.hostname.replace(h,a),this.build(!b),this},r.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&c.length<2)return this._parts.hostname;var d=this._parts.hostname.length-this.tld(b).length-1;return d=this._parts.hostname.lastIndexOf(".",d-1)+1,this._parts.hostname.substring(d)||""}if(!a)throw new TypeError("cannot set domain empty");if(e.ensureValidHostname(a),!this._parts.hostname||this.is("IP"))this._parts.hostname=a;else{var g=new RegExp(f(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(g,a)}return this.build(!b),this},r.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.lastIndexOf("."),e=this._parts.hostname.substring(d+1);return!0!==b&&c&&c.list[e.toLowerCase()]?c.get(this._parts.hostname)||e:e}var g;if(!a)throw new TypeError("cannot set TLD empty");if(a.match(/[^a-zA-Z0-9-]/)){if(!c||!c.is(a))throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');g=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(g,a)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");g=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(g,a)}return this.build(!b),this},r.directory=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,d=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(d):d}var g=this._parts.path.length-this.filename().length,h=this._parts.path.substring(0,g),i=new RegExp("^"+f(h));return this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a)),a&&"/"!==a.charAt(a.length-1)&&(a+="/"),a=e.recodePath(a),this._parts.path=this._parts.path.replace(i,a),this.build(!b),this},r.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("string"!=typeof a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),d=this._parts.path.substring(c+1);return a?e.decodePathSegment(d):d}var g=!1;"/"===a.charAt(0)&&(a=a.substring(1)),a.match(/\.?\//)&&(g=!0);var h=new RegExp(f(this.filename())+"$");return a=e.recodePath(a),this._parts.path=this._parts.path.replace(h,a),g?this.normalizePath(b):this.build(!b),this},r.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c,d,g=this.filename(),h=g.lastIndexOf(".");return-1===h?"":(c=g.substring(h+1),d=/^[a-z0-9%]+$/i.test(c)?c:"",a?e.decodePathSegment(d):d)}"."===a.charAt(0)&&(a=a.substring(1));var i,j=this.suffix();if(j)i=a?new RegExp(f(j)+"$"):new RegExp(f("."+j)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}return i&&(a=e.recodePath(a),this._parts.path=this._parts.path.replace(i,a)),this.build(!b),this},r.segment=function(a,b,c){var d=this._parts.urn?":":"/",e=this.path(),f="/"===e.substring(0,1),g=e.split(d);if(void 0!==a&&"number"!=typeof a&&(c=b,b=a,a=void 0),void 0!==a&&"number"!=typeof a)throw new Error('Bad segment "'+a+'", must be 0-based integer');if(f&&g.shift(),a<0&&(a=Math.max(g.length+a,0)),void 0===b)return void 0===a?g:g[a];if(null===a||void 0===g[a])if(h(b)){g=[];for(var i=0,j=b.length;i<j;i++)(b[i].length||g.length&&g[g.length-1].length)&&(g.length&&!g[g.length-1].length&&g.pop(),g.push(l(b[i])))}else(b||"string"==typeof b)&&(b=l(b),""===g[g.length-1]?g[g.length-1]=b:g.push(b));else b?g[a]=l(b):g.splice(a,1);return f&&g.unshift(""),this.path(g.join(d),c)},r.segmentCoded=function(a,b,c){var d,f,g;if("number"!=typeof a&&(c=b,b=a,a=void 0),void 0===b){if(d=this.segment(a,b,c),h(d))for(f=0,g=d.length;f<g;f++)d[f]=e.decode(d[f]);else d=void 0!==d?e.decode(d):void 0;return d}if(h(b))for(f=0,g=b.length;f<g;f++)b[f]=e.encode(b[f]);else b="string"==typeof b||b instanceof String?e.encode(b):b;return this.segment(a,b,c)};var A=r.query;return r.query=function(a,b){if(!0===a)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof a){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),d=a.call(this,c);return this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this}return void 0!==a&&"string"!=typeof a?(this._parts.query=e.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):A.call(this,a,b)},r.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof a||a instanceof String)d[a]=void 0!==b?b:null;else{if("object"!=typeof a)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var f in a)s.call(a,f)&&(d[f]=a[f])}return this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},r.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.addQuery(d,a,void 0===b?null:b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},r.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.removeQuery(d,a,b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},r.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)},r.setSearch=r.setQuery,r.addSearch=r.addQuery,r.removeSearch=r.removeQuery,r.hasSearch=r.hasQuery,r.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},r.normalizeProtocol=function(a){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a)),this},r.normalizeHostname=function(c){return this._parts.hostname&&(this.is("IDN")&&a?this._parts.hostname=a.toASCII(this._parts.hostname):this.is("IPv6")&&b&&(this._parts.hostname=b.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!c)),this},r.normalizePort=function(a){return"string"==typeof this._parts.protocol&&this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a)),this},r.normalizePath=function(a){var b=this._parts.path;if(!b)return this;if(this._parts.urn)return this._parts.path=e.recodeUrnPath(this._parts.path),this.build(!a),this;if("/"===this._parts.path)return this;b=e.recodePath(b);var c,d,f,g="";for("/"!==b.charAt(0)&&(c=!0,b="/"+b),"/.."!==b.slice(-3)&&"/."!==b.slice(-2)||(b+="/"),b=b.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),c&&(g=b.substring(1).match(/^(\.\.\/)+/)||"")&&(g=g[0]);;){if(-1===(d=b.search(/\/\.\.(\/|$)/)))break;0!==d?(f=b.substring(0,d).lastIndexOf("/"),-1===f&&(f=d),b=b.substring(0,f)+b.substring(d+3)):b=b.substring(3)}return c&&this.is("relative")&&(b=g+b.substring(1)),this._parts.path=b,this.build(!a),this},r.normalizePathname=r.normalizePath,r.normalizeQuery=function(a){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a)),this},r.normalizeFragment=function(a){return this._parts.fragment||(this._parts.fragment=null,this.build(!a)),this},r.normalizeSearch=r.normalizeQuery,r.normalizeHash=r.normalizeFragment,r.iso8859=function(){var a=e.encode,b=e.decode;e.encode=escape,e.decode=decodeURIComponent;try{this.normalize()}finally{e.encode=a,e.decode=b}return this},r.unicode=function(){var a=e.encode,b=e.decode;e.encode=n,e.decode=unescape;try{this.normalize()}finally{e.encode=a,e.decode=b}return this},r.readable=function(){var b=this.clone();b.username("").password("").normalize();var c="";if(b._parts.protocol&&(c+=b._parts.protocol+"://"),b._parts.hostname&&(b.is("punycode")&&a?(c+=a.toUnicode(b._parts.hostname),b._parts.port&&(c+=":"+b._parts.port)):c+=b.host()),b._parts.hostname&&b._parts.path&&"/"!==b._parts.path.charAt(0)&&(c+="/"),c+=b.path(!0),b._parts.query){for(var d="",f=0,g=b._parts.query.split("&"),h=g.length;f<h;f++){var i=(g[f]||"").split("=");d+="&"+e.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==i[1]&&(d+="="+e.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}c+="?"+d.substring(1)}return c+=e.decodeQuery(b.hash(),!0)},r.absoluteTo=function(a){var b,c,d,f=this.clone(),g=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(a instanceof e||(a=new e(a)),f._parts.protocol)return f;if(f._parts.protocol=a._parts.protocol,this._parts.hostname)return f;for(c=0;d=g[c];c++)f._parts[d]=a._parts[d];return f._parts.path?(".."===f._parts.path.substring(-2)&&(f._parts.path+="/"),"/"!==f.path().charAt(0)&&(b=a.directory(),b=b||(0===a.path().indexOf("/")?"/":""),f._parts.path=(b?b+"/":"")+f._parts.path,f.normalizePath())):(f._parts.path=a._parts.path,f._parts.query||(f._parts.query=a._parts.query)),f.build(),f},r.relativeTo=function(a){var b,c,d,f,g,h=this.clone().normalize();if(h._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(a=new e(a).normalize(),b=h._parts,c=a._parts,f=h.path(),g=a.path(),"/"!==f.charAt(0))throw new Error("URI is already relative");if("/"!==g.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(b.protocol===c.protocol&&(b.protocol=null),b.username!==c.username||b.password!==c.password)return h.build();if(null!==b.protocol||null!==b.username||null!==b.password)return h.build();if(b.hostname!==c.hostname||b.port!==c.port)return h.build();if(b.hostname=null,b.port=null,f===g)return b.path="",h.build();if(!(d=e.commonPath(f,g)))return h.build();var i=c.path.substring(d.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return b.path=i+b.path.substring(d.length)||"./",h.build()},r.equals=function(a){var b,c,d,f=this.clone(),g=new e(a),i={},j={},l={};if(f.normalize(),g.normalize(),f.toString()===g.toString())return!0;if(b=f.query(),c=g.query(),f.query(""),g.query(""),f.toString()!==g.toString())return!1;if(b.length!==c.length)return!1;i=e.parseQuery(b,this._parts.escapeQuerySpace),j=e.parseQuery(c,this._parts.escapeQuerySpace);for(d in i)if(s.call(i,d)){if(h(i[d])){if(!k(i[d],j[d]))return!1}else if(i[d]!==j[d])return!1;l[d]=!0}for(d in j)if(s.call(j,d)&&!l[d])return!1;return!0},r.duplicateQueryParameters=function(a){return this._parts.duplicateQueryParameters=!!a,this},r.escapeQuerySpace=function(a){return this._parts.escapeQuerySpace=!!a,this},e}),function(a,b){"use strict";"object"==typeof module&&module.exports?module.exports=b(require("./URI")):"function"==typeof define&&define.amd?define(["./URI"],b):b(a.URI)}(this,function(a){"use strict";var b=a.prototype,c=b.fragment;a.fragmentPrefix="?";var d=a._parts;return a._parts=function(){var b=d();return b.fragmentPrefix=a.fragmentPrefix,b},b.fragmentPrefix=function(a){return this._parts.fragmentPrefix=a,this},b.fragment=function(b,d){var e=this._parts.fragmentPrefix,f=this._parts.fragment||"";return!0===b?f.substring(0,e.length)!==e?{}:a.parseQuery(f.substring(e.length)):void 0!==b&&"string"!=typeof b?(this._parts.fragment=e+a.buildQuery(b),this.build(!d),this):c.call(this,b,d)},b.addFragment=function(b,c,d){var e=this._parts.fragmentPrefix,f=a.parseQuery((this._parts.fragment||"").substring(e.length));return a.addQuery(f,b,c),this._parts.fragment=e+a.buildQuery(f),"string"!=typeof b&&(d=c),this.build(!d),this},b.removeFragment=function(b,c,d){var e=this._parts.fragmentPrefix,f=a.parseQuery((this._parts.fragment||"").substring(e.length));return a.removeQuery(f,b,c),this._parts.fragment=e+a.buildQuery(f),"string"!=typeof b&&(d=c),this.build(!d),this},b.addHash=b.addFragment,b.removeHash=b.removeFragment,a}),"function"!=typeof URI.hasFragment&&(URI.fragmentPrefix="",URI.prototype.hasFragment=function(a){"use strict";return URI("?"+this.fragment()).hasQuery(a)}),function(a,b){"use strict";function c(b){var c=a("#bookNo").attr("value"),d='<span class="hasAudioStatic"><span class="audioIcon"></span></span>';if(c){if(b[c]){var e=a(".navBook");e.append(d)}}else if(b[0]){var f=a("#materialNav").find("header h1").filter(function(){return 0===a(this).find(".hasAudio").length});f.append(d)}else{var g=a("[data-bookid]").filter(function(){return 0===a(this).find(".hasAudio").length});g.each(function(c,e){var f=a(e),g=f.data("bookid");b[g]&&f.append(d)})}}function d(){var b=a("#rsconf").attr("value"),d=a("#lib").attr("value"),e=a("#englishSym").attr("value"),f=a("#langSym").attr("value"),g=a("#pubYear").attr("value");if(a("#isPublicationABible").val()&&e&&f&&g){var h="/wol/baa/%s/%s/%s/%s/%s";h=sprintf(h,b,d,e,f,g),a.getJSON(h).done(function(a){c(a)})}}b.bibleAudioCheck={checkBibleAudio:d}}(jQuery,app);var app;!function($,window,app){"use strict";function isFromTouch(a){return"touch"===a.originalEvent.pointerType||void 0===a.originalEvent.pointerType&&(app.WindowsPhone||app.iOS||app.Android)}function getFirstIdMatchingVerseNumber(a){var b,c,d="v\\d+-\\d+-"+a+"-1";return d=new RegExp(d),c=$("[id^=v]").filter(function(a,b){return d.test(b.id)}),c.length>0&&(b=c.first().attr("id")),app.utilities.getAllVerseSegmentsFromIDAttribute(b)}function updateFontSize(a){var b=app.fontSizeManager.getScale();a&&setCookie("fontScale",b);var c=parseInt(getDefaultFontSize()*b,10);$("#fontPointSize").text(c).css("font-size",100*b+"%")}function cookieDomain(){return $("#siteCookieDomain").val()}function getCookie(a){return Cookies.get(a,{domain:cookieDomain()})}function setCookie(a,b){
Cookies.set(a,b,{expires:365,domain:cookieDomain()})}function removeCookie(a){Cookies.remove(a,{domain:cookieDomain()})}function trySetCookie(a,b){return!getCookie(a)&&(setCookie(a,b),!0)}function getVideoResolution(){var a=getCookie("jwplayer.qualityLabel");return a||"720p"}function getSearchProximity(){var a=getCookie("prox");return a||"par"}function getSearchRank(){var a=getCookie("rank");return a||"occ"}function setupAsyncPartialPageLoad(a){if(Modernizr.history&&window.history.pushState){var b={success:function(b){a.pageContentObject.html(b),app.layout.setupShowHideBibleOutline(),app.bibleAudioCheck&&(app.bibleAudioCheck.checkBibleAudio(),app.media.removeAudioSetup(),app.menu.markButtonByLocation()),app.media.audioNavigationSetup(),app.images.placeholders(),null!=app.nwtstg&&app.nwtstg.setupFilter()},error:function(a){$(body).html(a.responseText)}};a.pageContentObject.on("click",a.filter,function(){var c=new URI(this.href).addQuery("snip","yes");return(isTouchDevice||isPointerDevice)&&a.pageContentObject.html('<div class="loading"><span class="icon"></span></div>'),$.ajax(c.toString(),b),window.history.pushState(null,null,this.href),window.scroll(0,0),app.utilities.isPublicationNav()&&(app.audioPlayerSetup=!1,app.media.audioNavigationSetup()),!1}),window.onpopstate=function(){var a=new URI(window.location.pathname).addQuery("snip","yes");$.ajax(a.toString(),b)}}}function isSignLanguage(){return"false"!==$("#contentLibLangIsSignLanguage").val()}function signLanguageVideoEnabled(){return"false"!==$("#signLanguageVideoEnabled").val()}function externalizeArticleLinks(){$("article").find("a").each(function(a,b){b=$(b),b.attr("href").startsWith("http")&&b.attr("target","_blank")})}window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var isTouchDevice=Modernizr.touchevents,iOS=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/i),Android=!!navigator.userAgent.match(/Android/i),WindowsPhone=!!navigator.userAgent.match(/Windows Phone/i),hasPositionFixedProblem=!!navigator.userAgent.match(/(iPad|iPhone|iPod);.*?5_\d/i),isPointerDevice=!!navigator.pointerEnabled||!!window.PointerEvent,isOldIE=function(){var a=0;if("Microsoft Internet Explorer"===navigator.appName){var b=navigator.userAgent;if(null!==new RegExp("MSIE ([^;]*)").exec(b)&&(a=parseFloat(RegExp.$1)),a<9)return!0}return!1},isOldSafari=function(){var a=navigator.userAgent.toLowerCase();return a.indexOf("safari")>-1&&!!(a.indexOf("version/7")>-1||a.indexOf("version/8")>-1)},getUILanguage=function(){return $("#locale").val()},getRsConfigSymbol=function(){return $("#rsconf").val()},getLibrarySymbol=function(){return $("#lib").val()},isLibraryRTL=function(){return"rtl"===$("#libDir").val()},getLibraryLanguageName=function(){return $("#libLang").val()},getLibraryLocale=function(){return $("#libraryLocale").val()},getContentUILanguage=function(){return $("#contentLocale").val()},getContentRsConfigSymbol=function(){return $("#contentRsconf").val()},getContentLibrarySymbol=function(){return $("#contentLib").val()},getContentLibraryLanguageSymbol=function(){return $("#contentLibLangSym").val()},getContentLibraryLanguageScript=function(){return $("#contentLibLangScript").val()},isContentLibraryRTL=function(){return"rtl"===$("#contentLibDir").val()},isContentLibraryHTML5=function(){return $(".html5").length>0},getScrollPositionFormatStrings=function(){return{bibleDocumentNavigationChapterManyVerseFormat:$("#bibleDocumentNavigationChapterManyVerseFormat").val(),bibleDocumentNavigationChapterVerseFormat:$("#bibleDocumentNavigationChapterVerseFormat").val(),bibleDocumentNavigationChapterVerseRangeFormat:$("#bibleDocumentNavigationChapterVerseRangeFormat").val(),bibleDocumentNavigationSingleChapterManyVerseFormat:$("#bibleDocumentNavigationSingleChapterManyVerseFormat").val(),bibleDocumentNavigationSingleChapterSingleVerseFormat:$("#bibleDocumentNavigationSingleChapterSingleVerseFormat").val(),documentNavigationMultiplePagesPositionFormat:$("#documentNavigationMultiplePagesPositionFormat").val(),documentNavigationSinglePagePositionFormat:$("#documentNavigationSinglePagePositionFormat").val()}},getCommand=function(a){return URI().segment(a?1:2)},getSelectedText=function(){try{return window.getSelection?window.getSelection().getRangeAt(0):document.getSelection().getRangeAt(0)}catch(a){}},getSelectedTextContainers=function(){var a=getSelectedText(),b=a.startContainer.parentElement;""===b.id&&(b=$(b).closest("[id]")[0]);var c=a.endContainer.parentElement;""===c.id&&(c=$(c).closest("[id]")[0]);var d=$(a.commonAncestorContainer),e=d.find("[id^=v]");0===e.length&&(e=d.find("*").filter(function(){return void 0!==$(this).data("pid")}));var f=$(),g=!1;return e.each(function(a){var d=e[a];d.id!==b.id||g?d.id===c.id&&g?(g=!1,f=f.add($(d))):g&&(f=f.add($(d))):(g=!0,f=f.add($(d)))}),f},getTextNodes=function(a){var b=$(),c=$(a);return c.length>0&&function a(c){var d;if(3===c.nodeType)"\n"!==c.nodeValue&&b.push($(c));else for(d=0;d<c.childNodes.length;d++)a(c.childNodes[d])}(c[0]),b},getCharacterPosition=function(a,b){var c=a.innerHTML,d=getSelectedText(),e=$(a).lettering(),f=$(e).children()[b],g=$(f).position();$(a).innerHTML=c;var h=document.createRange();return h.setStart(d.startContainer.parentNode,d.startOffset),h.setEnd(d.endContainer.parentNode,d.endOffset),g},getVerseNumberFromIDAttribute=function(a){var b,c,d=getBookNumber(),e=getChapterNumber();return c=app.utilities.isContentLibraryHTML5()?d?"v"+d+"-"+e+"-(\\d+)":"v\\d+-\\d+-(\\d+)":d?"dcv_"+e+"_(\\d+)":"dcv_\\d+_(\\d+)",c=new RegExp(c),b=c.exec(a),b?b[1]:null},getVerseNumberObject=function(a){var b,c=a.$items.closest("#article [id]").not("[data-pid]"),d=getAllVerseSegmentsFromIDAttribute(c.attr("id"));if(d.length>0){b=d[0];return $(b).children(".cl, .vl")}return null},getChapterNumberFromIDAttribute=function(a){var b=/v\d+-(\d+)-\d+/.exec(a);return b?b[1]:null},getBookNumberFromIDAttribute=function(a){var b=/v(\d+)-\d+-\d+/.exec(a);return b?b[1]:null},getAllVerseSegmentsFromIDAttribute=function(a){var b=/(v\d+-\d+-\d+)/.exec(a);return b?$("#article").find("[id^="+b[1]+"-]"):$()},getParagraphIDFromIDAttribute=function(a){return Number(a.substr(1))},getParagraphById=function(a){a=parseInt(a,10);var b=$("#p"+a);if(b.length>0)return b[0]},getFirstActionableIdInScope=function(a,b){var c=$(b[0]);if(b.length>0){var d;return app.isBibleDocument()&&!a?(d=c.find("[id^=v]"),0===d.length&&(d=c.closest("[id]"),0===d.length&&(d=c.find("[id]").first()))):(d=c.closest("[data-pid]"),0===d.length&&(d=c.find("[data-pid]").first())),d.attr("id")}return null},isDocument=function(a){switch(getCommand(a)){case"d":case"dsync":return!0;default:return!1}},articleHasVerses=function(){var a=/id=\"v/,b=$(".article");return a.test(b.html())},getDID=function(a){var b=URI(),c="d"===getCommand(a);return b.segment(c?5:7)},getDocumentDescription=function(){return $("#documentDescription").val()},getDocumentDescriptionSubstitute=function(){return $("#documentDescriptionSubstitute").val()},getPubMediaServer=function(){return $("#pubMediaServer").val()||URI.host()},wolServer=function(){return location.hostname},wolHostAndPort=function(){return location.host},wolProtocol=function(){return location.protocol},getPubSym=function(){return $("#englishSym").val()},getAudioPubSym=function(){return $("#audioPubSym").val()},getPubYear=function(){return $("#pubYear").val()},getLangSym=function(){return $("#langSym").val()},getIssue=function(){return $("#issue").val()},getBookNumber=function(){return $("#bookNo").val()},getChapterNumber=function(){return $("#chapNo").val()},isBibleDocument=function(a){switch(getCommand(a)){case"b":case"bsync":return!0;default:return!1}},isBibleBookDocument=function(a){return isDocument(a)&&$(".document.bibleBook").length},isBiblePublication=function(a){return!!["nwt","nwtsty","bi7","bi10","b12","bi22","by","int","Rbi8"].indexOf(getPubSym())},isBibleNav=function(a){return"binav"===getCommand(a)},isPublicationNav=function(a){return"publication"===getCommand(a)},isGalleryNav=function(a){return"gallery"===getCommand(a)},parseBibleDocumentURL=function(a){return{rsconf:$("#rsconf").val(),lib:$("#lib").val(),book:$("#bookNo").val(),chapter:$("#chapNo").val()}},parsePublicationURL=function(a){return{rsconf:$("#rsconf").val(),lib:$("#lib").val(),englishSymbol:$("#englishSym").val(),languageSymbol:$("#langSym").val()}},isDocumentWithSearchHits=function(a){return!!isDocument(a)&&URI().hasQuery("q")},isDocumentWithImages=function(a){return!!isDocument(a)&&$(".article img").length>0},hasDocumentContent=function(){return $(".scalableui").length>0},getContentAreaMargins=function(){return{marginTop:$("#navScrollPositionFloating").outerHeight(),marginBottom:0}},transcribeUreLinks=function(a){if(a){var b=sprintf("/%s/wol/",getContentUILanguage()||getUILanguage());return a.replace(/\/wol\//g,b)}return a},roundToNearest=function(a,b){return b=1/b,Math.round(a*b)/b},roundDown=function(a,b){return b=1/b,Math.floor(a*b)/b},loadPage=function(a){window.location.href=a},loadJSFile=function(a){var b=document.createElement("script");b.setAttribute("type","text/javascript"),b.setAttribute("src",a),document.getElementsByTagName("head")[0].appendChild(b)},cookiesEnabled=function(){return"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)},libInfoIsCurrent=function(a,b){var c=!1;return $.each(b.items,function(b,d){$.each(d.libs,function(b,d){if(d.symbol==a)return c=!0,!1})}),c},getMRULibraries=function(){var a=getRsConfigSymbol(),b=getLibrarySymbol(),c=JSON.parse(Modernizr.localstorage?window.localStorage.getItem("mru"):"{}")||[];for(c=$.grep(c,function(c){return!(c.rsconf===a&&c.lib===b)}),c.unshift({rsconf:a,lib:b});c.length>3;)c.pop();return Modernizr.localstorage&&window.localStorage.setItem("mru",JSON.stringify(c)),c},fontSizeManager=function(){var a=function(){var a=getCookie("fontScale");return a?parseFloat(a):1},b=function(){if(-1===d)for(var b=Number.MAX_VALUE,e=a(),f=0;f<c.length;f++){var g=Math.abs(e-c[f]);if(!(g<b))break;b=g,d=f}},c=[.7,.78,.85,1,1.17,1.38,1.72,1.9,2.23,2.67,3.08,3.7],d=-1;return{getScale:function(){return b(),c[d]},decrement:function(){return b(),d>0&&(d-=1,!0)},increment:function(){return b(),d+1<c.length&&(d+=1,!0)},reset:function(){d=3}}}(),getDefaultFontSize=function(){function a(){var a=$('<div style="width:1in;visible:hidden;padding:0px"></div>').appendTo("body"),b=a[0].offsetWidth;return a.remove(),b}var b=parseInt($("body").css("font-size"),10);return function(b){return Math.round(72*b/a())}(b)},isFeatureEnabled=function(a){return"true"===getCookie(a)},enableFeature=function(a){setCookie(a,!0)},disableFeature=function(a){setCookie(a,!1)},normalizeText=function(a){return isLibraryRTL()?a.replace("(","&#x200E;(").replace(")",")&#x200E;").replace(/ï¼ˆ/,"&#x200E;ï¼ˆ").replace(/ï¼‰/,"ï¼‰&#x200E;"):a},localizeNumber=function(a){var b;return"undefined"!=typeof localizedNumbers&&null!==localizedNumbers&&localizedNumbers instanceof Array&&(b=localizedNumbers[a]),void 0===b&&(b=$("[data-no="+a+"]").data("before-text")),void 0===b&&(b=$(".v[id$=-"+a+"-1]").children(".vl").first().text().trim()),void 0!==b&&null!==b&&0!==b.length||(b=a),b},hasAudio=!1,shouldShowAudioPlayer=function(){var a=getCookie("audioPlayer");return!a||"true"===a},shouldContinuousPlayAudio=function(){var a=getCookie("audioContinuousPlay");return!a||"true"===a},audioPlayerSetup=!1,isIE=eval("/*@cc_on!@*/false"),isEdge=/Edge\/\d./i.test(navigator.userAgent),isJscriptGt4=eval("/*@cc_on (@_jscript_version >= 4)@*/"),isHTTPS=function(){return"https:"===location.protocol};app.isTouchDevice=isTouchDevice,app.isPointerDevice=isPointerDevice,app.isOldIE=isOldIE,app.iOS=iOS,app.Android=Android,app.WindowsPhone=WindowsPhone,app.hasPositionFixedProblem=hasPositionFixedProblem,app.getUILanguage=getUILanguage,app.getRsConfigSymbol=getRsConfigSymbol,app.getLibrarySymbol=getLibrarySymbol,app.isLibraryRTL=isLibraryRTL,app.getLibraryLanguageName=getLibraryLanguageName,app.getLibraryLocale=getLibraryLocale,app.getContentUILanguage=getContentUILanguage,app.getContentRsConfigSymbol=getContentRsConfigSymbol,app.getContentLibrarySymbol=getContentLibrarySymbol,app.getContentLibraryLanguageSymbol=getContentLibraryLanguageSymbol,app.getContentLibraryLanguageScript=getContentLibraryLanguageScript,app.isContentLibraryRTL=isContentLibraryRTL,app.getCommand=getCommand,app.getVerseNumberFromIDAttribute=getVerseNumberFromIDAttribute,app.getChapterNumberFromIDAttribute=getChapterNumberFromIDAttribute,app.getBookNumberFromIDAttribute=getBookNumberFromIDAttribute,app.getParagraphIDFromIDAttribute=getParagraphIDFromIDAttribute,app.isDocument=isDocument,app.getDID=getDID,app.getDocumentDescription=getDocumentDescription,app.isBibleDocument=isBibleDocument,app.isBibleBookDocument=isBibleBookDocument,app.isBiblePublication=isBiblePublication,app.isDocumentWithSearchHits=isDocumentWithSearchHits,app.isDocumentWithImages=isDocumentWithImages,app.parseBibleDocumentURL=parseBibleDocumentURL,app.parsePublicationURL=parsePublicationURL,app.hasDocumentContent=hasDocumentContent,app.transcribeUreLinks=transcribeUreLinks,app.loadPage=loadPage,app.cookiesEnabled=cookiesEnabled,app.getMRULibraries=getMRULibraries,app.fontSizeManager=fontSizeManager,app.normalizeText=normalizeText,app.isFeatureEnabled=isFeatureEnabled,app.enableFeature=enableFeature,app.disableFeature=disableFeature,app.hasAudio=hasAudio,app.audioPlayerVisible=shouldShowAudioPlayer(),app.audioPlayerSetup=audioPlayerSetup,app.isIE=isIE,app.isEdge=isEdge,app.isJscriptGt4=isJscriptGt4,app.isHTTPS=isHTTPS,app.pubMediaServer=getPubMediaServer,app.wolServer=wolServer,app.wolHostAndPort=wolHostAndPort,app.wolProtocol=wolProtocol,app.getPubSym=getPubSym,app.getAudioPubSym=getAudioPubSym,app.getLangSym=getLangSym,app.getPubYear=getPubYear,app.getIssue=getIssue,app.getDocumentDescriptionSubstitute=getDocumentDescriptionSubstitute,app.getBookNumber=getBookNumber,app.getChapterNumber=getChapterNumber,app.localizeNumber=localizeNumber,app.lastClickEvent=null,app.utilities={isOldSafari:isOldSafari,getScrollPositionFormatStrings:getScrollPositionFormatStrings,getAllVerseSegmentsFromIDAttribute:getAllVerseSegmentsFromIDAttribute,getSelectedText:getSelectedText,getSelectedTextContainers:getSelectedTextContainers,getCharacterPosition:getCharacterPosition,getTextNodes:getTextNodes,getParagraphById:getParagraphById,updateFontSize:updateFontSize,articleHasVerses:articleHasVerses,getContentAreaMargins:getContentAreaMargins,loadJSFile:loadJSFile,isContentLibraryHTML5:isContentLibraryHTML5,roundToNearest:roundToNearest,roundDown:roundDown,getVerseNumberObject:getVerseNumberObject,isFromTouch:isFromTouch,isBibleNav:isBibleNav,isPublicationNav:isPublicationNav,isGalleryNav:isGalleryNav,getFirstActionableIdInScope:getFirstActionableIdInScope,audioContinuousPlayEnabled:shouldContinuousPlayAudio(),getFirstIdMatchingVerseNumber:getFirstIdMatchingVerseNumber,trySetCookie:trySetCookie,getSearchProximity:getSearchProximity,getSearchRank:getSearchRank,getVideoResolution:getVideoResolution,getCookie:getCookie,setCookie:setCookie,removeCookie:removeCookie,setupAsyncPartialPageLoad:setupAsyncPartialPageLoad,isSignLanguage:isSignLanguage,signLanguageVideoEnabled:signLanguageVideoEnabled,externalizeLinks:externalizeArticleLinks}}(jQuery,window,app||(app={})),function(a,b){"use strict";function c(){if(e(),a("a.todayNav, .todayNav a").attr("href",b.url.makeDateDataUrl(new Date,0)),a(".searchForm").on("submit",function(){if(!u().find(".searchField").val().length)return!1}),i(),t(),s(),m(),v(),b.utilities.getCookie("prox")&&a("#proximitySelector").val(b.utilities.getCookie("prox")),b.utilities.getCookie("rank")&&a("#rankSelector").val(b.utilities.getCookie("rank")),a("#menuSearchHitNext").on("click",function(){return b.text.navigateSearchHits(!0),!1}),"h"===b.getCommand()){var c=u();("#standardSearch"===c.selector||"#compactSearch"===c.selector&&c.hasClass("showField"))&&u().find(".searchField").focus()}}function d(){var a=!(b.getRsConfigSymbol()===b.getContentRsConfigSymbol()&&b.getLibrarySymbol()===b.getContentLibrarySymbol()),c=b.getContentRsConfigSymbol()===b.utilities.getCookie("syncrsconf")&&b.getContentLibrarySymbol()===b.utilities.getCookie("synclib"),d=b.getContentRsConfigSymbol()===b.utilities.getCookie("rsconf")&&b.getContentLibrarySymbol()===b.utilities.getCookie("lib");if(a&&!d||!a&&c){if(b.validator.isValidRsconf(b.utilities.getCookie("rsconf"))&&b.validator.isValidLib(b.utilities.getCookie("lib"))&&b.validator.containsNoTags(b.utilities.getCookie("lang"))&&b.validator.isValidLocale(b.utilities.getCookie("locale")))return!0}else if((!a||a&&d)&&b.validator.isValidRsconf(b.utilities.getCookie("syncrsconf"))&&b.validator.isValidLib(b.utilities.getCookie("synclib"))&&b.validator.containsNoTags(b.utilities.getCookie("synclang"))&&b.validator.isValidLocale(b.utilities.getCookie("synclocale")))return!1;return null}function e(){var c=a("#menuSynchronize"),e=a("#linkSynchronizeSwitch");if(c.length>0){var h=d();if(null==h)c.hide();else{var i,j,k,l,m,n,o=a("#menuSynchronizeSwitch"),p=a("#linkSynchronize");!0===h?(i=b.utilities.getCookie("rsconf"),j=b.utilities.getCookie("lib"),b.utilities.getCookie("locale"),n=b.normalizeText(decodeURI(b.utilities.getCookie("lang")).replace("+"," ")),k=b.utilities.getCookie("cklang"),l=b.utilities.getCookie("script"),m=b.utilities.getCookie("dir")):(i=b.utilities.getCookie("syncrsconf"),j=b.utilities.getCookie("synclib"),b.utilities.getCookie("synclocale"),n=b.normalizeText(decodeURI(b.utilities.getCookie("synclang")).replace("+"," ")),k=b.utilities.getCookie("synclangsym"),l=b.utilities.getCookie("synclangscript"),m=b.utilities.getCookie("syncdir")),p.attr("href",f(p.attr("href"),i,j)).addClass("meps-lang-"+k).addClass("meps-script-"+l).addClass("dir-"+m).on("click",g).children(".label").html(n),c.show(),o.length>0&&(o.removeClass("tbSync"),o.addClass("tbSyncSelect"))}}e.length>0&&e.on("click",g)}function f(a,b,c){return a.replace("{rsconf}",b).replace("{library}",c).replace("/#","")}function g(){var a=h(decodeURI(this.href));return a&&b.loadPage(a),!1}function h(c){var d,e;if(b.highlightManager.hasHighlight())null!=(e=b.highlightManager.getFirstHighlightedIdNumber())&&(d=c.replace("{no}",e));else{var f;if(-1!==c.indexOf("sydp")?f=a("[data-pid]"):-1!==c.indexOf("sybv")&&(f=a(".v, .cl")),f&&f.length>0){var g=a(window).scrollTop()+b.utilities.getContentAreaMargins().marginTop;f.each(function(){if(g<=a(this).offset().top)return e=b.isBibleDocument()?b.getVerseNumberFromIDAttribute(this.id):b.getParagraphIDFromIDAttribute(this.id),null!=e&&(d=c.replace("{no}",e)),!1})}else d=c}return d}function i(){if(!0!==/[A|a]ndroid 2/.test(navigator.userAgent)){var c=b.getUILanguage(),d=b.getRsConfigSymbol(),e=b.getLibrarySymbol();a(".searchControl").each(function(){a(this).find(".searchField").typingSuggestionList(function(a){return d&&e&&a?sprintf("/wol/sg/%s/%s?q=%s",d,e,encodeURIComponent(a)):null},function(a){switch(a.type){case 1:return sprintf("/%s/wol/bl/%s/%s?q=%s",c,d,e,encodeURIComponent(a.query));case 2:return sprintf("/%s/wol/pl/%s/%s?q=%s",c,d,e,encodeURIComponent(a.query));case 3:return sprintf("/%s/wol/tl/%s/%s?q=%s",c,d,e,encodeURIComponent(a.query));default:return sprintf("/%s/wol/s/%s/%s?q=%s",c,d,e,encodeURIComponent(a.query))}},a(this).find(".suggestions"),{})})}}function j(){var a=u().find(".suggestions");if(a.is(":visible")){var b=u().find(".searchField");if(!b.is(":visible"))return void a.hide();var c=b[0].getBoundingClientRect();a.css({width:b.innerWidth(),left:c.left,top:c.top+b.height()})}}function k(){a("#standardSearch").removeClass("searchFocused")}function l(){var b=a("#standardSearch");b.toggleClass("searchFocused"),b.hasClass("searchFocused")&&b.find("input").focus()}function m(){var b=a(".convenienceCharsMenu li");b.length>0&&(b.on("click",function(){p(a(this).text())}),a(".convenienceCharsButton").on("click",function(){return q(),!1}))}function n(){var b=u().find(".convenienceCharsFrame"),c=u().find(".searchFieldContainer"),d=c[0].getBoundingClientRect();b.css({width:c.outerWidth(),left:d.left,top:d.top+c.height()}),b.show(),a(document).one("click.convenienceCharsFrame",function(){q()})}function o(){u().find(".convenienceCharsFrame").fadeOut(w),a(document).off("click.convenienceCharsFrame")}function p(a){var b=u().find(".searchField");b.val(b.val()+a),o()}function q(){u().find(".convenienceCharsFrame").is(":visible")?o():n()}function r(){var a=u().find(".convenienceCharsFrame");if(a.is(":visible")){var b=u().find(".searchFieldContainer");if(!b.is(":visible"))return void a.hide();var c=b[0].getBoundingClientRect();a.css({width:b.outerWidth(),left:c.left,top:c.top+b.height()})}}function s(){var a=!1,b=u().find(".searchField");b.keydown(function(){a||(b.removeAttr("title"),a=!0)})}function t(){var c=a("#standardSearch");c.find(".searchIcon").click(b.menu.toggleSearch),c.find(".closeIcon").click(b.menu.hideSearch),a("#regionMain, #publicationNavigation, #regionFooter").on("pointerdown pointerup click",function(){a(".searchControl").removeClass("searchFocused"),b.menu.hideSearch()})}function u(){return a("#standardSearch")}function v(){var c=a("#menuBible").removeClass("selected"),d=a("#menuToday").removeClass("selected"),e=a("#menuToolsPreferences").removeClass("selected"),f=a("#menuPublications").removeClass("selected"),g=a(".librarySelectionLink").removeClass("selected");switch(b.getCommand()){case"d":case"dsync":case"sim":a("#documentInBible").val()?c.addClass("selected"):f.addClass("selected");break;case"lv":f.addClass("selected");break;case"b":case"bsync":case"binav":case"bibles":case"gallery":case"galleryitem":case"bibledocument":c.addClass("selected");break;case"dt":case"dtsync":d.addClass("selected");break;case"pref":e.addClass("selected");break;case"li":g.addClass("selected");break;case"publication":a("#isPublicationABible").val()?c.addClass("selected"):f.addClass("selected")}}var w=250;b.menu={setupMenu:c,toggleSearch:l,hideSearch:k,setupConvenienceCharacters:m,repositionConvenienceChars:r,setupSearchEntry:t,setupSearchTooltip:s,getActiveSearchControl:u,markButtonByLocation:v,repositionSuggestionList:j}}(jQuery,app),function(a,b){"use strict";function c(){a(".pageNum").toggle()}function d(){a("rt").toggle()}function e(){var c=a("#questionContainer");c.toggle(),c.is(":visible")?a(".contentContainer").find(".qu").hide():(a(".contentContainer").find(".qu").show(),b.contentScrollHandler())}function f(a){a?h.next():h.prev()}function g(){a(document).keypress(function(a){var b=a.keyCode||a.which;43===b||59===b||61===b?h.next():45===b&&h.prev()}),a(".mk").on("click",function(){a(this).hasClass("mkhl")||h.jump(a(this))})}var h=function(c,d){function e(a){if((h+=a)<0)h=g-1;else if(h>=g)if(Modernizr.sessionstorage){var c=JSON.parse(sessionStorage.getItem("nav-scope-data"));if(c.length>0){var e=window.location.pathname+window.location.search,j=c.findIndex(function(a){return e===a.split("#")[0]});if(-1!==j){var k=j+1;k>=c.length&&(k=0),window.location=c[k],h=i}else h=0}}else h=0;i!==h&&(f.eq(i).toggleClass(d),f.eq(h).toggleClass(d).jumpTo(b.utilities.getContentAreaMargins()),i=h)}c="."+c;var f=a(c),g=f.length,h=0,i=0;return f.eq(h).toggleClass(d),{jump:function(a){e(f.index(a)-h)},prev:function(){e(-1)},next:function(){e(1)}}}("mk","mkhl");b.togglePageNo=c,b.text={toggleRuby:d,toggleQuestions:e,setupText:g,navigateSearchHits:f}}(jQuery,app);var BoundaryWidthLarge=700,BoundaryWidthMedium=550,BoundaryWidthNarrow=400,FullWidthClass="contentFullWidth",LargeWidthClass="contentLargeWidth",MediumWidthClass="contentMediumWidth",NarrowWidthClass="contentNarrowWidth";!function(a){function b(){return e.width()>BoundaryWidthLarge?d.addClass(FullWidthClass).removeClass(LargeWidthClass).removeClass(MediumWidthClass).removeClass(NarrowWidthClass):e.width()>BoundaryWidthMedium&&e.width()<=BoundaryWidthLarge?d.addClass(LargeWidthClass).removeClass(FullWidthClass).removeClass(MediumWidthClass).removeClass(NarrowWidthClass):e.width()>BoundaryWidthNarrow&&e.width()<=BoundaryWidthMedium?d.addClass(MediumWidthClass).removeClass(FullWidthClass).removeClass(LargeWidthClass).removeClass(NarrowWidthClass):e.width()<=BoundaryWidthNarrow?d.addClass(NarrowWidthClass).removeClass(FullWidthClass).removeClass(LargeWidthClass).removeClass(MediumWidthClass):void 0}var c=a(window),d=a("#regionMain, #videoWrapper"),e=a(".articlePositioner");c.resize(b).trigger("resize")}(jQuery),function(a,b){"use strict";function c(){return g().addQuery("langwritten",b.getContentLibraryLanguageSymbol()).addQuery("txtCMSLang",b.getContentLibraryLanguageSymbol()).addQuery("fileformat","mp3")}function d(){var a=g().addQuery("pub",b.getAudioPubSym()).addQuery("langwritten",b.getContentLibraryLanguageSymbol()).addQuery("txtCMSLang",b.getContentLibraryLanguageSymbol()).addQuery("fileformat","mp3");return""!==b.getIssue()&&("iasn"===b.getAudioPubSym()||"sjjm"===b.getAudioPubSym()?a.addQuery("track",b.getIssue()):a.addQuery("issue",b.getIssue())),a.toString()}function e(a,b,c,d){var e=g().addQuery("pub",a).addQuery("langwritten",b).addQuery("txtCMSLang",b).addQuery("fileformat","mp3");return c&&(e.addQuery("booknum",c),d&&e.addQuery("track",d)),e.toString()}function f(){return-1===a.inArray(b.getAudioPubSym(),["nwt","nwtsty","bi12","bi7","Rbi8"])}function g(){var a=b.wolServer()===b.pubMediaServer(),c=a?b.wolProtocol():"https:",d=a?b.wolHostAndPort():b.pubMediaServer();return new URI("").protocol(c).host(d).path("/GETPUBMEDIALINKS")}function h(b){var c={},d=[],e=[],f=[];return a.isArray(b)?a.each(b,function(b,c){a.each(c.languages,function(b,c){-1===a.inArray(b,d)&&(d.push(b),e.push(c.name))}),a.each(d,function(b,d){a.each(c.files[d].MP3,function(a,g){if(-1===g.file.url.indexOf(".zip")){var h={sym:d,name:e[b],title:g.title,url:g.file.url,duration:g.duration,markers:g.markers,pub:c.pub,pubName:c.pubName};f.push(h)}})})}):(a.each(b.languages,function(a,b){d.push(a),e.push(b.name)}),a.each(d,function(c,d){a.each(b.files[d].MP3,function(a,g){if(-1===g.file.url.indexOf(".zip")){var h={sym:d,name:e[c],title:g.title,url:g.file.url,duration:g.duration,markers:g.markers,pub:b.pub,pubName:b.pubName};f.push(h)}})})),c.languages=d,c.tracks=f,c}function i(){b.hasAudio=!1,b.audioPlayerSetup=!1,b.audioPlayerVisible=!1,a("#audioPlayerSpeakerIcon").remove(),a(".hasAudioPlayer").removeClass("hasAudioPlayer"),a("#playerwrapper").empty().addClass("hidden"),b.contentScrollHandler(),b.layout.sideBarSizing(),a(document).trigger("scroll")}function j(){var a=b.parseBibleDocumentURL();if(!a.book)return!1;m(e(b.getAudioPubSym(),b.getContentLibraryLanguageSymbol(),a.book))}function k(){var c,d,f=[],g=b.getPubSym(),j=b.getAudioPubSym();g in I?(a.each(I[g],function(a,d){c=e(d,b.getContentLibraryLanguageSymbol()),f.push(c)}),d=p(f)):(c=e(j,b.getContentLibraryLanguageSymbol()),d=p(c)),a.settle(d).then(function(b){var c,d=b.filter(function(a){return!(a instanceof Error)});if(d.length>1&&(c=d.filter(function(a){return a.pub===j}),a.each(d,function(a,b){b=h(b),K[b.tracks[0].pub]=b})),1===d.length&&(c=d),F(),c){t(h(c))}else i()})}function l(){var a=b.parseBibleDocumentURL();m(e(b.getAudioPubSym(),b.getContentLibraryLanguageSymbol(),a.book,a.chapter))}function m(c){C(c)&&a.ajax({url:c,dataType:"json",cache:!0}).done(function(a,c,d){b.hasAudio=!0,t(h(a))}).fail(function(a,b,c){i()}).always(F)}function n(){var d,e,g=[],j=b.getPubSym();if(j in I){var k=b.getChapterNumber();a.each(I[j],function(a,b){d=c().addQuery("pub",b).addQuery("track",k).toString(),g.push(d)}),e=p(g)}else d=c().addQuery("docid",b.getDID()).toString(),e=p(d);a.settle(e).then(function(c){var d,e=c.filter(function(a){return!(a instanceof Error)});e.length>0?(b.hasAudio=!0,d=h(e),t(d),F()):f()?a.when(o()).done(function(a){b.hasAudio=!0,d=h(a),t(d)}).fail(function(){i()}):i()})}function o(){var b=d();return C(b)?a.ajax({url:b,dataType:"json",cache:!0}):a.Deferred().reject("Invalid URL")}function p(b){var c=[];if(a.isArray(b))a.each(b,function(a,b){C(b)&&c.push(q(b))});else if("string"==typeof b){if(!C(b))return[];c.push(q(b))}return c}function q(b){return a.ajax({url:b,dataType:"json",cache:!0})}function r(){var c=a("#playerwrapper");c.is(":visible")||(c.show(),c.hasClass("headerPosition")&&(a(".bible").addClass("hasAudioPlayer"),a(".publication").addClass("hasAudioPlayer"),a("#secondaryNavContent").addClass("hasAudioPlayer"),a(".documentSynchronizeInformation").addClass("hasAudioPlayer"),a("#toolbarFrame").addClass("hasAudioPlayer"),a("#toolbarSearch").addClass("hasAudioPlayer"),a("#regionMain").addClass("hasAudioPlayer"),b.contentScrollHandler(),b.layout.sideBarSizing(),c.resize(),a(document).trigger("scroll"),a(window).trigger("resize"))),a("#audioPlayerSpeakerIcon").addClass("audioPlayerVisible").attr("disabled",!0),b.layout.toggleNavigation()}function s(c){var d,e=0,f=b.getPubSym(),g=a("<div/>");g.attr("id","flavorSelector");var h=c.tracks[0].pub;f in I&&(a.each(I[f],function(b,c){if(K.hasOwnProperty(c)){var f=K[c].tracks[0].pubName;h===c?(d=a('<div class="flavorOptions">'),a("<input/>",{type:"radio",name:"flavor",id:c,value:c,checked:"checked"}).appendTo(d),a("<label/>",{for:c,text:f}).appendTo(d),d.appendTo(g),e++):(d=a('<div class="flavorOptions">'),a("<input/>",{type:"radio",name:"flavor",id:c,value:c}).appendTo(d),a("<label/>",{for:c,text:f}).appendTo(d),d.appendTo(g),e++)}}),e>1&&(g.insertBefore("#playerwrapper"),a('input[type="radio"][name="flavor"]').on("change",function(){t(K[this.value])})))}function t(c){if(c&&0!==c.tracks.length){var d=c.tracks[0].url,e=b.utilities.getCookie("audioLanguage"),f=a.inArray(e,c.languages);b.audioMarkers=null!==c.tracks[0].markers,b.audioMarkerData=c.tracks[0].markers,b.media.lastSelector=null,-1===f?(c.tracks[0].sym,c.tracks[0].name):(d=c.tracks[f].url,c.tracks[f].sym,c.tracks[f].name);a("#playerwrapper").empty().addClass("lang-"+b.getContentUILanguage()).append(a('<div id="mePlayerHolder" />').append(a("<audio/>").attr("id","wolplayer").attr("preload","none").attr("src",d).css("width","100%").css("height","100%")))}w(function(a){window.mejs=window.mejs||{},mejs.i18n=mejs.i18n||{},mejs.i18n.locale=mejs.i18n.locale||{},mejs.i18n.locale.strings=mejs.i18n.locale.strings||[];var d=b.getUILanguage();mejs.i18n.locale.language=d,mejs.i18n.locale.strings[d]=a,u(c)})}function u(b){a.cachedScript("/js/mediaelement-and-player.min.js").done(function(){v(b)}).fail(function(){i()})}function v(a){Modernizr.on("audioautoplay",function(){if(b.utilities.isPublicationNav()&&!document.getElementById("flavorSelector")&&s(a),H=x(a),H.addEventListener("playing",function(){b.media.isPlayerPlaying=!0}),H.addEventListener("pause",function(){b.media.isPlayerPlaying=!1}),a.tracks.length>1&&!b.utilities.isBibleNav()&&y(!1),b.isOldIE()||b.mediaMarker.initAudioMarkers(),"yes"===URI().query(!0).autoplay){H.addEventListener("canplay",function(a){r(),a.target.play()}),H.load();var c=document.createEvent("HTMLEvents");return c.initEvent("continuousPlayOn",!0,!0),H.player.media.dispatchEvent(c)}(b.audioPlayerVisible||b.utilities.isBibleNav()||b.utilities.isPublicationNav())&&r(),b.audioPlayerSetup=!0})}function w(c){var d=new URI("").path("/wol/ls").addQuery("locale",b.getUILanguage()).addQuery("type","mediaelementPlayer");a.getJSON(d.toString()).done(function(a){c(a.strings?a.strings:null)}).fail(function(){i()})}function x(c){return MediaElementPlayer.prototype.buildplaylist=function(d,e,f,g){function h(b){l=b,l?(r.show().height(q.outerHeight(!0)).css("max-height",function(){var b=a(d.node).parent()[0].getBoundingClientRect().bottom,c=Math.min(a("#regionFooter")[0].getBoundingClientRect().top,a(window).height());return Math.floor(c-b)}()),n.attr("aria-label",mejs.i18n.t("Close Playlist")).attr("label",mejs.i18n.t("Close Playlist"))):(r.hide(),n.attr("aria-label",mejs.i18n.t("Open Playlist")).attr("label",mejs.i18n.t("Open Playlist")))}function i(c,e){function f(){d.play(),
g.removeEventListener("canplay",f)}y(!0),h(!1),r.find("li").removeClass("playing");var i=a(e.target);i.closest("li").addClass("playing");var j=i.data(),k=j.url;k=k.split(":")[1],g.addEventListener("canplay",f,!1),d.setSrc(k),d.load();try{setTimeout(function(){d.play()})}catch(a){}b.utilities.setCookie("audioLanguage",j.sym),b.utilities.setCookie("audioLanguageName",j.name),b.jumpHighlight.jumpToElement(z(c.title))}var j=this,k=j.options,l=!1,m=!0,n=a("<button/>").attr("aria-controls",j.id).singleclickortap(function(){h(!l)}),o=a("<div/>").addClass("mejs-button").addClass("mejs-playlistdisclosure-button").append(n),p=[];if(c.tracks.length>1&&c.tracks[0].pub===c.tracks[1].pub&&(m=!1),a.each(c.tracks,function(b,d){var e=a('<li class="mediaTitle"/>'),f=a("<a/>");if(m){var g=a("<p>");g.html(d.pubName),g.appendTo(e)}if(f.html(d.title),f.data(this),f.on("click",i.bind(this,d)),f.appendTo(e),p.push(e),c.languages.length>1){var h=a('<li class="mediaLanguage"/>');h.html(d.name),p.push(h)}}),p.length>1){var q=a("<ul/>").append(p),r=a("<div/>").attr("id","playerplaylist").append(q).insertAfter("#mePlayerHolder");h(l),e.append(o),k.hasPlaylist=!0}else k.hasPlaylist=!1;g.addEventListener("play",function(){r&&0===r.find(".playing").length&&r.find("li").first().addClass("playing")},!1)},MediaElementPlayer.prototype.buildcontinuousplay=function(d,e,f,g){function h(a){a?(l.removeClass("mejs-singleplay").addClass("mejs-continuousplay"),k.attr("aria-label",mejs.i18n.t("Disable Continuous Play")).attr("label",mejs.i18n.t("Disable Continuous Play")),b.enableFeature("audioContinuousPlay")):(l.removeClass("mejs-continuousplay").addClass("mejs-singleplay"),k.attr("aria-label",mejs.i18n.t("Enable Continuous Play")).attr("label",mejs.i18n.t("Enable Continuous Play")),b.disableFeature("audioContinuousPlay"))}var i=this,j=i.options,k=a("<button/>").attr("aria-controls",i.id).singleclickortap(function(){var a="continuousPlay"+(b.utilities.audioContinuousPlayEnabled?"Off":"On"),c=document.createEvent("HTMLEvents");return c.initEvent(a,!0,!0),g.dispatchEvent(c)}),l=a("<div/>").addClass("mejs-button").addClass("mejs-continuousplay-button").append(k);(1===c.tracks.length&&Modernizr.audioautoplay||c.tracks.length>1)&&(a(".enableAutoAdvance").length>0||b.utilities.isBibleNav()||b.utilities.isPublicationNav())&&(h(b.utilities.audioContinuousPlayEnabled),e.append(l)),g.addEventListener("continuousPlayOn",function(){b.utilities.audioContinuousPlayEnabled=!0,h(b.utilities.audioContinuousPlayEnabled)},!1),g.addEventListener("continuousPlayOff",function(){b.utilities.audioContinuousPlayEnabled=!1,h(b.utilities.audioContinuousPlayEnabled)},!1),g.addEventListener("ended",function(){if(b.utilities.audioContinuousPlayEnabled)if(j.hasPlaylist)setTimeout(function(){a("#playerplaylist").find(".playing").removeClass("playing").next().find("a").click()});else if(Modernizr.audioautoplay){var c=a(".resultNavRight.enableAutoAdvance a").attr("href");if(c){var d=new URI(c).addQuery("autoplay","yes");b.loadPage(d.toString())}}},!1)},a("#wolplayer").mediaelementplayer({audioWidth:"100%",audioHeight:"100%",features:["playlist","playpause","progress","duration","continuousplay"],alwaysShowControls:!0})[0]}function y(b){a(".mejs-playpause-button button")[0].disabled=!b}function z(b){var c=/\d{3}/,d=b.match(c);return d=parseInt(d,10),a("[data-no="+d+"]")}function A(){if(B()&&!1===b.audioPlayerSetup)try{new Audio&&Modernizr.audio&&Modernizr.audio.mp3&&(G(),E())}catch(a){}}function B(){var a=b.getContentRsConfigSymbol()+":"+b.getContentLibrarySymbol(),c=b.getPubSym();if(a in J){if(-1===J[a].indexOf(c))return!1}return!0}function C(b){var c=a("#pubMediaServer");return null!=b&&-1===b.indexOf("undefined")&&0!==c.length&&0!==c[0].value.length}function D(){"b"!==b.getCommand()&&"sybv"!==b.getCommand()||a.each(a(".altPub"),function(){var c=a(this),d=c.attr("data-pub"),f=c.attr("data-lang");if(-1===a.inArray(d,["bi22","bi10","by","int"])){var g=b.parseBibleDocumentURL(),h=e(d,f,g.book,g.chapter);C(h)&&a.ajax({url:h,dataType:"json",cache:!0}).done(function(b,d,e){var f=a('<a href="'+c.attr("href")+'#audio:show" class="hasAudio"><span> </span></a>');c.after(f)})}})}function E(){var a=URI(),c=a.fragment(),d=!1;c.indexOf("audio:")>-1&&(d=!0),d&&!b.audioPlayerVisible&&b.isBibleDocument()&&l()}function F(){b.hasAudio&&a.each(a(".resultsNavigationSelected.documentLocation"),function(){var b=this;a("<button/>").attr("id","audioPlayerSpeakerIcon").addClass("hasAudio").click(function(){r()}).append('<span class="icon"/>').appendTo(b)})}function G(){if(b.isBibleDocument())l();else if(b.utilities.isBibleNav()&&a("#enableAudioPlayer").val())j();else if(b.isDocument())n();else if(b.utilities.isPublicationNav()&&a("#enableAudioPlayer").val()){var c=b.getAudioPubSym();Object.keys(K).length>0&&K.hasOwnProperty(c)?t(K[c]):k()}}var H,I={sn:["iasn","iasnm","snv"],snnw:["snnw","snv"],sjj:["sjjm","sjji","sjjc"]},J={"r2:lp-u-ru":["bi12","yc","sn","snnw","sjj","mb"]},K={};b.media={audioNavigationSetup:A,showAudioPlayer:r,isPlayerPlaying:!1,initMedia:D,removeAudioSetup:i,lastSelector:null}}(jQuery,app),function(a,b){"use strict";function c(){return l.find("*").filter(m).filter(":visible")}function d(){var b=a("#modalUnderlayContainer");b.fadeIn(100),a("#wrapper").attr("aria-hidden",!0),b.on("focus.underlay",function(){c().first().focus()})}function e(){var b=a("#modalUnderlayContainer");b.fadeOut(100),a("#wrapper").attr("aria-hidden",!1),b.off(".underlay")}function f(b){g(),k=a(":focus"),d(),a.ajax(b).promise().done(function(b){l=a(b),l.first().addClass("modalDialog").attr("role","dialog"),a("#dialogContainer").append(l),h();var d=l.find("[autofocus]");d.length>0?d.focus():c().first().focus()})}function g(){a("#dialogContainer").children().remove(),"function"==typeof b.modal.form.destroy&&b.modal.form.destroy(),b.modal.form={},i(),e(),k&&(k.focus(),k=void 0)}function h(){l.on("keydown.accessbility",j)}function i(){l&&l.off(".accessbility")}function j(b){switch(b.which){case 9:var d=c(),e=a(":focus"),f=d.length,h=d.index(e);if(b.shiftKey){if(0===h)return d.get(f-1).focus(),!1}else if(h===f-1)return d.get(0).focus(),!1;break;case 27:return g(),!1}}var k,l,m="*[tabindex], *[contenteditable], a[href], area[href], button:not([disabled]), embed, iframe, input:not([disabled]), object, select:not([disabled]), textarea:not([disabled])";b.modal={form:{},showModal:f,removeModals:g}}(jQuery,app),function(a,b){"use strict";function c(){var b=a(".articlePositioner");return!!b&&b.outerWidth()>=a(window).width()}function d(){var b=a("#secondaryNavContent"),c=b.prop("scrollHeight")>b.height();return b.is(":visible")&&c}function e(){return a("#secondaryNavContent").is(":visible")&&!aa}function f(){a("#secondaryNavContent").off("scroll.disableBodyScrolling")}function g(){var b=null;a("#secondaryNavContent").on("scroll.disableBodyScrolling",function(c){var d=a("#secondaryNavContent");d.stop(!0,!1);var e=d.scrollTop(),f=a("#secondaryNav").height()-d.height()-d.scrollTop();return 0===e&&(b=f-1),null===b&&(b=e+f-1),!1})}function h(){e()?t():d()&&k("left")}function i(b){var c=a("#secondaryNavContent"),d=a("#regionHeader"),e=a("#regionMain"),f=a("#regionFooter"),g=a("#videoWrapper:visible"),h=window.innerHeight||document.documentElement.clientHeight||a(window).height(),i=e.height();g.length>0&&(i+=g.height());var k=i;if(c.length>0&&(k=h-d.outerHeight()-j(f)+g.outerHeight()),i&&(k=k>i?i:k),"left"===b){k-=parseFloat(c.css("margin-bottom"))+parseFloat(c.css("padding-bottom"))}return k<0?h:k}function j(b){b=a(b);var c=b[0].getBoundingClientRect(),d=a(window).scrollTop(),e=d+a("#regionHeader").height(),f=d+(window.innerHeight||document.documentElement.clientHeight||a(window).height()),g=d+c.top,h=d+c.bottom;if(h<e||g>f)return 0;var i=Math.max(g,e);return Math.min(h,f)-i}function k(b){var c,d=a("#secondaryNavContent"),e=a("#study"),f=a("#regionFooter"),g=j(f);if(K(),null!=b&&"left"!==b||(c=i("left"),d.hasClass("slideIn")?d.height(c+g):d.height(c)),null==b||"right"===b){c=i("right");var h=e.find(".navigationContents"),k=h.find(".studyPane"),l=c-a(".navigationTabsContainer").outerHeight()-parseFloat(a(".studyPane").css("margin-top"));e.height(a("#content").height()),e.hasClass("slideIn")?(e.outerHeight(c+g),k.height(l+g)):k.height(l)}K()}function l(){a(".fn, .b").toggle()}function m(){var c,d,e,f=b.fontSizeManager.getScale();if(f)for(c=document.getElementsByClassName("scalableui"),d=0,e=c.length;d<e;d++)c[d].style.fontSize=100*f+"%";a(window).trigger("resize")}function n(a){p("right",a)}function o(a){p("left",a)}function p(d,e){var h,i,j,l,m,n,o,q=a("#regionMain, #videoWrapper"),r=a(".studyPaneToggle"),v=a(".secondaryNavToggle"),w=c();switch(d){case"right":h=_,i="left",j=r,l=v,m="showStudy",n="showSecondaryNav",o=!!a(".hasStudyPane").length;break;case"left":default:h=$,i="right",j=v,l=r,m="showSecondaryNav",n="showStudy",o=!!a(".hasSecondaryNav").length}if(null==e&&(e=a("."+m).length>0),o&&e?(q.removeClass(n),l.removeClass("expanded"),q.addClass(m),j.addClass("expanded")):(w||q.removeClass(m),j.removeClass("expanded")),w)e?(p(i,!1),u(h),g()):(t(),f());else if((!this||!this.recurseing)&&o){var x=p.bind({recurseing:!0});x(i,!e)}k(d),s(),b.documentMenu.positionMenu(),b.url.matchUrlToStudyPane()}function q(){var b=a("#underlayContainer");b.on("pointerdown",t),b.fadeIn(100),a("html, body").css("overflow","hidden")}function r(){var b=a("#underlayContainer");b.fadeOut(100),b.off("pointerdown",r),a("html, body").css("overflow","visible")}function s(){var b=a($).closest(".slideIn").length>0,d=a(_).closest(".slideIn").length>0,e=c();e||(b=b||a(".showSecondaryNav").length>0,d=d||a(".showStudy").length>0);var f=a(".secondaryNavToggle"),g=a(".studyPaneToggle");b?f.addClass("expanded"):f.removeClass("expanded"),d?g.addClass("expanded"):g.removeClass("expanded"),e||t()}function t(){r();var d=a("#regionMain");d.find($).removeClass("slideIn"),d.find(_).removeClass("slideIn"),c()&&(a(".studyPaneToggle").removeClass("expanded"),a(".secondaryNavToggle").removeClass("expanded")),b.documentMenu.positionMenu()}function u(b){q(),a("#regionMain").find(b).addClass("slideIn")}function v(){var c=a(".studyPaneToggle");c.on("click",function(){c.toggleClass("expanded");var a=c.hasClass("expanded"),d=a?"yes":"no";b.layout.toggleStudyPane(a),b.utilities.setCookie("showStudy",d)})}function w(){var a=b.utilities.getCookie("showStudy");null==a&&(a="yes");var d="yes"===a;c()||b.layout.toggleStudyPane(d)}function x(){var c=a(".secondaryNavToggle");c.on("click",function(){c.toggleClass("expanded");var a=c.hasClass("expanded");b.layout.toggleSecondaryNav(a)})}function y(c){function d(d,e,f){function g(a){var c;return null==a.items&&(a={items:[a]}),c=Handlebars.templates.Tooltip(a),c=b.transcribeUreLinks(c)}function h(){var c=a(".tooltip .alternatePresentation .lightbox");c.load(function(){var d=a(".tooltip .alternatePresentation .option");d.addClass("loaded");var e=b.images.setupLightboxItems(c);a(d).on("click",this,function(){return b.images.callLightbox(this,e),!1})})}function i(a){var b,c=URI().segment(2);switch(c){case"dsync":case"bsync":case"dtsync":b=a.find("a")}b&&b.attr("target","_blank")}function j(){var c=a(".tooltip video");c.length>1&&(c=c.filter(":visible")),c.each(function(c,d){d=a(d),b.video.setupTooltipPlayer(d.attr("id"),parseFloat(d.data("start-time")),parseFloat(d.data("duration")),0===c)})}var k,l=f.target,m=URI(d),n=m.fragment(),o="tooltip",p=b.fontSizeManager.getScale(),q=function(d){if(!r){var f=a(d),g="rtl"===c.closest("[dir]").attr("dir");o+=g?" dir-rtl":" dir-ltr",f.wolTooltip(e.x,e.y,o,{fontScale:p,rtl:g,complete:function(){b.highlightManager.enabled=!0,f.find(".jwplayer").each(function(a,c){b.video.destroyPlayers(c.id)})},target:l}),b.highlightManager.enabled=!1,i(f)}},r=!1;if(n)n&&f._clickorhoverlink_FromTouch&&(window.location.href=m.data.attr.source);else{k=d.replace(/\/\w+(-\w+)?\/wol\//,"/wol/"),f._clickorhoverlink_FromTouch?a(window).one("pointerenter.tooltip",function(){r=!0}):a(l).one("pointerout.tooltip",function(){r=!0});var s=250;f._clickorhoverlink_FromTouch&&(s=0);window.setTimeout(function(b){r||a.getJSON(k).done(function(a){var b=g(a);b&&!r&&(q(b),h(),j())})},s)}}function e(a){var b=URI(a),c=URI().host()===b.host(),d=b.segment(2),e=URI().directory()===b.directory();return""!==b.path()&&c&&!e&&"ml"!==d&&"mp"!==d&&"m"!==d}c.pointLink(d,e)}function z(a){for(var b in a)if(a.hasOwnProperty(b)&&void 0!==a[b])return!0;return!1}function A(c){if(0!==c.length){null!==Z&&window.clearTimeout(Z);var d=a(".scrollPositionDisplay"),e="";c=c.toString();var f=c.split(":");if(2===f.length)var g=f[0].split("-"),h=f[1].split("-");var i=c.split("-"),j=c.split("-");if(e=b.utilities.getScrollPositionFormatStrings(),z(e))if(b.isBibleBookDocument())2===f.length&&(f[0]===f[1]?d.html(e.bibleDocumentNavigationChapterVerseFormat.replaceToken(wolConstants.TOKENS_BibleChapter,g[0]).replaceToken(wolConstants.TOKENS_BibleVerse,g[1])):g[0]===h[0]?0!==e.bibleDocumentNavigationSingleChapterManyVerseFormat.length?d.html(e.bibleDocumentNavigationSingleChapterManyVerseFormat.replaceToken(wolConstants.TOKENS_StartingBibleVerse,g[1]).replaceToken(wolConstants.TOKENS_EndingBibleVerse,h[1])):d.html(e.bibleDocumentNavigationChapterManyVerseFormat.replaceToken(wolConstants.TOKENS_BibleChapter,g[0]).replaceToken(wolConstants.TOKENS_StartingBibleVerse,g[1]).replaceToken(wolConstants.TOKENS_EndingBibleVerse,h[1])):d.html(e.bibleDocumentNavigationChapterVerseRangeFormat.replaceToken(wolConstants.TOKENS_StartingBibleChapter,g[0]).replaceToken(wolConstants.TOKENS_EndingBibleChapter,h[0]).replaceToken(wolConstants.TOKENS_StartingBibleVerse,g[1]).replaceToken(wolConstants.TOKENS_EndingBibleVerse,h[1])));else if(b.isBibleDocument()){var k;1===i.length||2===i.length&&i[0]===i[1]?(k=""===e.bibleDocumentNavigationChapterVerseFormat?e.bibleDocumentNavigationSingleChapterSingleVerseFormat:e.bibleDocumentNavigationChapterVerseFormat,d.html(k.replaceToken(wolConstants.TOKENS_BibleVerse,i[0]))):(k=""===e.bibleDocumentNavigationChapterManyVerseFormat?e.bibleDocumentNavigationSingleChapterManyVerseFormat:e.bibleDocumentNavigationChapterManyVerseFormat,d.html(k.replaceToken(wolConstants.TOKENS_StartingBibleVerse,i[0]).replaceToken(wolConstants.TOKENS_EndingBibleVerse,i[1])))}else 1===j.length?d.html(e.documentNavigationSinglePagePositionFormat.replaceToken(wolConstants.TOKENS_PageNumber,j[0])):d.html(e.documentNavigationMultiplePagesPositionFormat.replaceToken(wolConstants.TOKENS_StartingPageNumber,j[0]).replaceToken(wolConstants.TOKENS_EndingPageNumber,j[1]));""===c&&""!==(c=b.getDocumentDescriptionSubstitute())&&d.html(c);var l=a(".navPosition"),m=a(".resultNavControls, .studyPaneToggle, .secondaryNavToggle, .pubNavTitle");if(null==d.data("last-show-offset")&&d.data("last-show-offset",window.pageYOffset),(null!=Z||!l.is(":visible"))&&d.data("last-show-offset")!==window.pageYOffset)if(void 0===c)d.html(""),l.hide();else if(""!==c){m.hide(),Modernizr.opacity?l.fadeIn(100):l.show();Z=window.setTimeout(function(){if(Modernizr.opacity){l.fadeOut(500,function(){m.css("display",""),l.css("display",""),Z=null,d.data("last-show-offset",window.pageYOffset)})}else m.css("display",""),l.css("display",""),Z=null,d.data("last-show-offset",window.pageYOffset)},2e3)}}}function B(a,c,d,e){a=b.localizeNumber(a),d=b.localizeNumber(d);var f=a;void 0!==f&&(a!==d&&(f+="-"+d),A(f))}function C(a,c,d,e){a=b.localizeNumber(a),c=b.localizeNumber(c),d=b.localizeNumber(d),e=b.localizeNumber(e),A(c+"-"+a+":"+e+"-"+d)}function D(){A("")}function E(){a("#questionContainer").hide("slow"),a("#questionContainer").find("ul").empty()}function F(b){for(var c=[],d=0;d<b.length;d++){var e='p[data-pid="'+b[d]+'"]',f=a(e).data("rel-pid");if(f)for(var g=0;g<f.length;g++){var h=Number(f[g]),i=a.inArray(h,c);-1===i&&c.push(h)}}var j=a("#questionContainer");j.width(a(".article").outerWidth(!0));var k=j.find("ul");k.empty();for(var l=0;l<c.length;l++){var m='p[data-pid="'+c[l]+'"]',n=a(".contentContainer").find(m);k.append('<li><p class="qu">'+n.text()+"</p></li>")}}function G(b,c,d){var e=a(".article").offset().top,f=a(window).scrollTop()+e,g=f+a(window).height()-e,h=function(a,b,c){for(var d=0,e=a.length;d<e;){var f=d+e>>>1;c(a[f])<b?d=f+1:e=f}return d}(b,f,d);c&&h>0&&h--;var i=[];if(h<b.length){i.push(h);for(var j=h+1;j<b.length&&!(g<=d(b[j]));j++)i.push(j)}return i}function H(){var a=ba();if(a){var c=a.first,d=a.last?a.last:c;b.isBibleDocument()?B(c.verse,c.verse,d.verse,d.verse):b.isBibleBookDocument()&&C(c.verse,c.chapter,d.verse,d.chapter)}else D()}function I(){var a=ca();if(a){var b=a.first,c=a.last?a.last:b;B(b.pageNum,b.displayText,c.pageNum,c.displayText)}else D();var d=da();d?F(d):E()}function J(){b.isBibleDocument()||b.isBibleBookDocument()?H():b.isDocument()&&I()}function K(){var c=a("#toolbarFrame");"absolute"===c.css("position")&&c.css("margin-top",0),b.documentMenu.positionMenu()}function L(){var b=a("#regionHeader");return parseFloat(b.height())}function M(){(a(".navBookOutline")||a(".navVerseOutline"))&&a(".verseOutline, .chapterOutline").on("click",function(a){return N(a),!1})}function N(b){var c=b.delegateTarget,d=a(".navVerseOutline, .navBookOutline");d.is(":hidden")?(a(".verse, .chapter").hide(),d.show(),a(c).children("span").addClass("disabled")):(a(".verse, .chapter").show(),d.hide(),a(c).children("span").removeClass("disabled"))}function O(){k("left")}function P(){var c;switch(b.getCommand()){case"dsync":c=a("#regionMain a, #resultNavigation a");break;case"bsync":c=a("#regionMain a, #documentNavigation .nav a");break;case"dtsync":c=a("#contentOnly a")}c&&c.attr("target","_blank")}function Q(){switch(b.getCommand()){case"dsync":case"bsync":case"dtsync":a("#menuSynchronize").addClass("synchronizeBackgroundColor"),a("#menuSynchronizeSwitch").addClass("synchronizeBackgroundColor")}}function R(){var b=a("#secondaryNavContent"),d=a("#study");(b.length>0||d.length>0||c())&&(b.is(":visible")||d.is(":visible"))&&k()}function S(){var c;a(window).on("resize orientationchange",function(){clearTimeout(c),c=setTimeout(function(){k(),b.menu.repositionConvenienceChars(),b.menu.repositionSuggestionList(),s()},100)})}function T(){a(window).on("scroll",function(){J(),b.mediaMarker.autoScrollEnabled=!1});var c;a(window).on("scroll",function(){clearTimeout(c),c=setTimeout(function(){b.documentMenu.positionMenu(),R()},100)})}function U(){a(document).keydown(function(a){118===a.keyCode&&b.menu.getActiveSearchControl().find(".searchField").focus()})}function V(){a(".navVerseOutline .outlineItem").on("click",function(){b.highlightManager.removeHighlight();var c=a(this).attr("href"),d=b.url.getHighlightTextRangeFromUrl(c);if(d)return b.highlightManager.highlightParagraphTextRange(d.stPar,d.stOff,d.edPar,d.edOff),b.jumpHighlight.jumpToMarkOrHighlight(),b.layout.toggleNavigation(),!1})}function W(){a(".resultAlternatePubTitle > a").on("click",function(c){var d=a(".hl").attr("id");if(b.getVerseNumberFromIDAttribute(d)){var e=c.target.href+"#"+d;a(".resultAlternatePubTitle > a").attr("href",e)}})}function X(){a(".mk").length>0&&a("#menuSearchHitNext").show()}function Y(){var b=a("#userStatus"),c=b.data("library-color");null!=c&&""!==c&&b.css("background-color",c).addClass("private")}var Z=null,$="#secondaryNavContent",_="#study",aa=!1,ba=function(){function c(a){if(b.utilities.isContentLibraryHTML5())var c=/v\d+-(\d+)-(\d+)/.exec(a);else var c=/dcv_(\d+)_(\d+)/.exec(a);return{chapter:Number(c[1]),verse:Number(c[2])}}var d=a("span[id^=v]");return function(){var b=G(d,!1,function(b){return a(b).offset().top});return b.length?{first:c(d[b[0]].id),last:b.length>1?c(d[b[b.length-1]].id):void 0}:void 0}}(),ca=function(){var b=function(a){var b=a;return b.is(":visible")||(b=b.next(),b.offset()||(b=a.prev(),b.offset()||(b=a.parent()))),b.offset().top},c=function(c){var d,e=a(c);return d=Number(e.data("no")),{top:b(e),pageNum:d,displayText:e.data("before-text")}},d=a("[id^=page]");return function(){var e=G(d,!0,function(c){return b(a(c))});return e.length?{first:c(d[e[0]]),last:e.length>1?c(d[e[e.length-1]]):void 0}:void 0}}(),da=function(){var b=function(b){var c=b;return c.is(":visible")||(c=c.next(),c.offset()||(c=b.prev(),c.offset()||(c=b.parent()))),c.offset().top-a(".content").offset().top},c=a("p[data-pid]");return function(){var d=G(c,!0,function(c){return b(a(c))});return d.length?d:void 0}}();b.pubsub=a(),b.setupTooltip=y,b.calcMaxHeight=i,b.contentScrollHandler=J,b.layout={applyFontSize:m,setupStudyPaneCollapse:v,toggleStudyPane:n,toggleSecondaryNav:o,toggleSidePane:p,toggleNavigation:h,applyStudyPaneCollapse:w,setupSecondaryNavToggle:x,contentPositionAdjuster:K,toggleReferenceSymbols:l,setupShowHideBibleOutline:M,pixelsScrolledIntoView:j,setupSecondaryNav:O,setupSyncLinks:P,displaySyncState:Q,setupScrollHandler:T,setupResizeHandler:S,setupKeymapping:U,setupBibleVerseHighlight:V,setupAlternatePublicationClick:W,setupNextSearchHitButton:X,disableBodyScrolling:g,enableBodyScrolling:f,sideBarSizing:k,calcHeaderHeight:L,setupLibraryColor:Y}}(jQuery,app),function(a,b){"use strict";function c(c){a(".active").removeClass("active");var d=a(c).data("relatedContent"),e=a("#"+d),f=a(c);e.addClass("active"),f.addClass("active"),b.url.matchUrlToStudyPane()}function d(b){b.each(function(b,d){a(d).on("click",function(){return c(this),!1})})}b.tabs={activateContent:c,wireTabs:d}}(jQuery,app),function(a,b){function c(){a("#subheadings a").each(function(b,c){d(a(c.hash))})}function d(b){var c=a("#secondaryNavContent"),d=a("#regionHeader");b.waypoint(function(b){a(".middleParagraph").removeClass("middleParagraph");var e;if(void 0!==(e="down"===b?a(this).data("pid"):a(this).waypoint("prev").data("pid"))){a("[href$=p"+e+"]").parent().addClass("middleParagraph");var f=c[0].getBoundingClientRect(),g=a(".middleParagraph")[0].getBoundingClientRect(),h=g.top-d.height(),i=g.bottom-f.bottom;h<=0&&c.scrollTop(c.scrollTop()+h),i>0&&c.scrollTop(c.scrollTop()+i)}},{offset:function(){return a(window).height()/2}}).waypoint(function(b){a("[href$=p"+a(this).waypoint("prev").data("pid")+"]").parent().toggleClass("visibleParagraph","up"===b)},{offset:function(){return parseFloat(a("#regionMain").css("margin-top"))-this.getBoundingClientRect().height}}).waypoint(function(b){a("[href$=p"+a(this).data("pid")+"]").parent().toggleClass("visibleParagraph","down"===b)},{offset:function(){return a(window).height()}})}function e(){var b=a(".verseItem");b.each(function(c){a(b[c].hash).waypoint(function(b){a(".verseItem[href=#"+this.id+"]").toggleClass("activeVerse","up"===b)},{offset:function(){return-a(this).height()+parseFloat(a("#regionMain").css("margin-top"))}}).waypoint(function(b){a(".verseItem[href=#"+this.id+"]").toggleClass("activeVerse","down"===b)},{offset:"100%"})})}function f(b){try{var c=a(b[0].hash),d=a("#regionFooter"),e=a("#article"),f=a("#regionHeader"),g=d.offset().top-c.offset().top,h=window.innerHeight||document.documentElement.clientHeight||a(window).height(),i=h/2+f.outerHeight();g<i&&e.css("padding-bottom",i-g)}catch(a){}}b.scrollHandler={activateSubheadingTracking:c,activateVerseTracking:e,addBottomPadding:f}}(jQuery,app),function(a,b){"use strict";function c(b,c,d){var e=b;return a('<li class="toggle"><input type="checkbox">'+c+"</li>").find("input").prop("checked",e).end().on("click",function(b){d(),e=!e,a(this).find("input").prop("checked",e),b.stopPropagation()})}function d(b,c,d){return a('<li class="spin">'+c+'<button id="fontSizeSmaller"><span class="icon"></span></button><button id="fontSizeLarger"><span class="icon"></span></button></li>').find("#fontSizeSmaller").on("click",function(){d(-1)}).end().find("#fontSizeLarger").on("click",function(){d(1)}).end().on("click",function(a){a.stopPropagation()})}function e(){if(b.hasDocumentContent()){var e="/wol/ls?locale="+b.getUILanguage()+"&type=documentOptions";a.getJSON(e).done(function(e){if(e.strings){var g=a("#content"),h=(a("#article"),a('<ul class="documentMenu dropShadow20"></ul>').appendTo(g));b.isDocument()&&h.append(c(!1,e.strings.pageNumbers,b.togglePageNo)),b.isBibleDocument()&&h.append(c(!0,e.strings.referenceSymbols,b.layout.toggleReferenceSymbols)),b.hasDocumentContent()&&h.append(d(!0,e.strings.fontSize,function(a){a<0&&b.fontSizeManager.decrement()?(b.layout.applyFontSize(),b.utilities.updateFontSize(!0)):b.fontSizeManager.increment()&&(b.layout.applyFontSize(),b.utilities.updateFontSize(!0))})),b.isDocument();var i=function(){h.hide(),a(document).off("click"),b.highlightManager.enabled=!0};a('<div id="documentMenuButton"><span class="icon"></span></div>').appendTo(g).on("click",function(c){h.is(":visible")?i():(h.show(),a(document).on("click",i),b.highlightManager.enabled=!1),c.stopPropagation()}),f()}})}}function f(){var c=a("#documentMenuButton");if(c.length>0){var d=a(".documentMenu"),e=a(".articlePositioner"),f=c.outerWidth(),g=0,h=0,i=a("#regionFooter"),j=window.innerHeight||document.documentElement.clientHeight||a(window).height(),k=Math.min(j-b.layout.pixelsScrolledIntoView(i),i[0].getBoundingClientRect().top)-f-8;c.css("top",k+"px"),d.css("top",k-d.height()-f),0===e.length&&(e=a("#article"));var l=e[0].getBoundingClientRect();b.isContentLibraryRTL()?(g=e.offset().left+8,h=g):(g=l.right-f-8,h=g-d.width()+8),d.css("left",h+"px"),c.css("left",g+"px")}}b.documentMenu={makeDocumentMenu:e,positionMenu:f}}(jQuery,app),function(a,b){function c(){return a("#article").find("."+v)}function d(){return c().closest(".v").map(function(a,c){return b.getVerseNumberFromIDAttribute(c.id)}).get()}function e(c){var d=a("#"+f(c));return d.length>0?b.isBibleDocument()&&!c?b.getVerseNumberFromIDAttribute(d.attr("id")):b.getParagraphIDFromIDAttribute(d.attr("id")):null}function f(a){return b.utilities.getFirstActionableIdInScope(a,c())}function g(a){var c=e(a);return c?b.isBibleDocument()&&!a?"v="+c:"h="+c:null}function h(b){if(b instanceof jQuery)return b;var c=a("body").find(b);return 0!==c.length||"string"!=typeof b&&"number"!=typeof b||(c=a("#article").find("[data-pid="+b+"]")),0!==c.length||"string"!=typeof b&&"number"!=typeof b||(c=a("#"+b)),c}function i(){return null!==f()}function j(b){if(u){var c=a("."+v+"."+w);c.contents().unwrap();var d=a("."+v);if(d.removeClass(v),(c.length>0||d.length>0)&&!b){var e=a.Event("textunhighlighted");e.$items=c.add(d),a(document).trigger(e)}}}function k(a){var b=h(a);return b.closest("."+v).length+b.find("."+v).length>0}function l(c,d){var e,f=h(c);if(u){var g=f.closest("[id^=v]"),i=f.closest("[data-pid]");if(g.length>0){var j=g.attr("id");e=r(b.utilities.getAllVerseSegmentsFromIDAttribute(j),0,Number.MAX_VALUE,!0);b.getVerseNumberFromIDAttribute(j)}else{var k=i.data("pid");e=r(a("[data-pid="+k+"]"),0,Number.MAX_VALUE,!0)}}d&&d(),e&&a(document).trigger(e)}function m(b,c){var d=h(b);if(u){var e=d.find("."+v);if(e.contents().unwrap(),e.length>0){var f=a.Event("textunhighlighted");f.$items=e,a(document).trigger(f)}}c&&c()}function n(a,b){var c=h(a),d=o(c);k(d)?(j(),m(d)):(j(),m(d),l(d)),b&&b()}function o(a){var b=h(a),c=b.closest("[id^=v]"),d=b.closest("[data-pid]");return c.length>0?c:d}function p(b,c,d,e){d>b&&0===e&&(d--,e=Number.MAX_VALUE);var f,g=a("#article").find("[data-pid]");0===g.filter("[data-pid="+b+"]").length&&(c=0),0===g.filter("[data-pid="+d+"]").length&&(e=Number.MAX_VALUE),f=g.filter(function(c,e){var f=a(e).data("pid");return f>=b&&f<=d}),f=f.filter(function(b,c){return 0===a(c).parent().closest("[data-pid]").length}),r(f,c,e)}function q(b,c,d,e){var f;if(!(b>d||b===d&&c>e)&&u){var g=a();for(f=b;f<=d;f++)g=g.add(a("#"+f));r(g,c,e)}}function r(b,c,d,e){b.each(function(e,f){var g=a(f);0===e?e===b.length-1?0===c&&d===Number.MAX_VALUE?g.addClass(v):g.insertTag(c,d,x,y,v):0===c?g.addClass(v):g.insertTag(c,Number.MAX_VALUE,x,y,v):e===b.length-1?d>0&&(d===Number.MAX_VALUE?g.addClass(v):g.insertTag(0,d,x,y,v)):g.addClass(v)});var f=s(b);if(f.length>0){var g=a.Event("texthighlighted");if(g.$items=f,e)return g;a(document).trigger(g)}}function s(b){function c(b,c){return a.contains(document.body,c)}var d;d=b.find("."+v).addBack("."+v);for(var e=0;e<d.length;e++){var f=!1;if(null!=a(d[e]).data("pid")&&(f=!0),!f){var g=a(d[e]).parent();if(g.text().replace(/ /g,"").length===g.find("."+v).text().replace(/ /g,"").length){var h=g.find("."+v+"."+w);h.length>0&&h.contents().unwrap(),g.addClass(v),g.find("*").removeClass(v),d=d.add(g).filter("."+v).filter(c),e--}}}return d}function t(c,d){var e="b"===b.getCommand(),f=e?b.getRsConfigSymbol():b.getContentRsConfigSymbol(),g=e?b.getLibrarySymbol():b.getContentLibrarySymbol(),h=b.getPubSym(),i=b.getLangSym(),k=b.getPubYear(),l=b.getBookNumber(),m=b.getChapterNumber(),n=sprintf("/wol/bvr/%s/%s/%s/%s/%s/%s/%s/%s",f,g,h,i,k,l,m,c);a.getJSON(n,function(a){j(),p(a.begin_paragraph_id,a.begin_text_offset,a.end_paragraph_id,a.end_text_offset),d&&d()})}var u=!0,v="hl",w="inserted",x='<span class="'+v+" "+w+'">',y="</span>";a(x+y);b.highlightManager={removeHighlight:j,highlightParagraphTextRange:p,highlightIdTextRange:q,highlightBibleVerseAsync:t,isHighlighted:k,highlight:l,unHighlight:m,toggleHighlight:n,enabled:u,getFirstHighlightedId:f,getFirstHighlightedIdNumber:e,hasHighlight:i,getHighlightUrlFragment:g,getHighlightedElements:c,getHighlightedVerseNumbers:d}}(jQuery,app),/*! PhotoSwipe - v4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */
function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipe=b()}(this,function(){"use strict";return function(a,b,c,d){var e={features:null,bind:function(a,b,c,d){var e=(d?"remove":"add")+"EventListener";b=b.split(" ");for(var f=0;f<b.length;f++)b[f]&&a[e](b[f],c,!1)},isArray:function(a){return a instanceof Array},createEl:function(a,b){var c=document.createElement(b||"div");return a&&(c.className=a),c},getScrollY:function(){var a=window.pageYOffset;return void 0!==a?a:document.documentElement.scrollTop},unbind:function(a,b,c){e.bind(a,b,c,!0)},removeClass:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(a,b){e.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},hasClass:function(a,b){return a.className&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},getChildByClass:function(a,b){for(var c=a.firstChild;c;){if(e.hasClass(c,b))return c;c=c.nextSibling}},arraySearch:function(a,b,c){for(var d=a.length;d--;)if(a[d][c]===b)return d;return-1},extend:function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&a.hasOwnProperty(d))continue;a[d]=b[d]}},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return-(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return--a*a*a+1}}},detectFeatures:function(){if(e.features)return e.features;var a=e.createEl(),b=a.style,c="",d={};if(d.oldIE=document.all&&!document.addEventListener,d.touch="ontouchstart"in window,window.requestAnimationFrame&&(d.raf=window.requestAnimationFrame,d.caf=window.cancelAnimationFrame),d.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!d.pointerEvent){var f=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var g=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g&&g.length>0&&(g=parseInt(g[1],10))>=1&&g<8&&(d.isOldIOSPhone=!0)}var h=f.match(/Android\s([0-9\.]*)/),i=h?h[1]:0;i=parseFloat(i),i>=1&&(i<4.4&&(d.isOldAndroid=!0),d.androidVersion=i),d.isMobileOpera=/opera mini|opera mobi/i.test(f)}for(var j,k,l=["transform","perspective","animationName"],m=["","webkit","Moz","ms","O"],n=0;n<4;n++){c=m[n];for(var o=0;o<3;o++)j=l[o],k=c+(c?j.charAt(0).toUpperCase()+j.slice(1):j),!d[j]&&k in b&&(d[j]=k);c&&!d.raf&&(c=c.toLowerCase(),d.raf=window[c+"RequestAnimationFrame"],d.raf&&(d.caf=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]))}if(!d.raf){var p=0;d.raf=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-p)),d=window.setTimeout(function(){a(b+c)},c);return p=b+c,d},d.caf=function(a){clearTimeout(a)}}return d.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,e.features=d,d}};e.detectFeatures(),e.features.oldIE&&(e.bind=function(a,b,c,d){b=b.split(" ");for(var e,f=(d?"detach":"attach")+"Event",g=function(){c.handleEvent.call(c)},h=0;h<b.length;h++)if(e=b[h])if("object"==typeof c&&c.handleEvent){if(d){if(!c["oldIE"+e])return!1}else c["oldIE"+e]=g;a[f]("on"+e,c["oldIE"+e])}else a[f]("on"+e,c)});var f=this,g={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(a){return"A"===a.tagName},getDoubleTapZoom:function(a,b){return a?1:b.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};e.extend(g,d);var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka=function(){return{x:0,y:0}},la=ka(),ma=ka(),na=ka(),oa={},pa=0,qa={},ra=ka(),sa=0,ta=!0,ua=[],va={},wa=!1,xa=function(a,b){e.extend(f,b.publicMethods),ua.push(a)},ya=function(a){var b=Yb();return a>b-1?a-b:a<0?b+a:a},za={},Aa=function(a,b){return za[a]||(za[a]=[]),za[a].push(b)},Ba=function(a){var b=za[a];if(b){var c=Array.prototype.slice.call(arguments);c.shift();for(var d=0;d<b.length;d++)b[d].apply(f,c)}},Ca=function(){return(new Date).getTime()},Da=function(a){ha=a,f.bg.style.opacity=a*g.bgOpacity},Ea=function(a,b,c,d,e){(!wa||e&&e!==f.currItem)&&(d/=e?e.fitRatio:f.currItem.fitRatio),a[C]=s+b+"px, "+c+"px"+t+" scale("+d+")"},Fa=function(a){ca&&(a&&(q>f.currItem.fitRatio?wa||(ic(f.currItem,!1,!0),wa=!0):wa&&(ic(f.currItem),wa=!1)),Ea(ca,na.x,na.y,q))},Ga=function(a){a.container&&Ea(a.container.style,a.initialPosition.x,a.initialPosition.y,a.initialZoomLevel,a)},Ha=function(a,b){b[C]=s+a+"px, 0px"+t},Ia=function(a,b){if(!g.loop&&b){var c=k+(ra.x*pa-a)/ra.x,d=Math.round(a-pb.x);(c<0&&d>0||c>=Yb()-1&&d<0)&&(a=pb.x+d*g.mainScrollEndFriction)}pb.x=a,Ha(a,l)},Ja=function(a,b){var c=qb[a]-qa[a];return ma[a]+la[a]+c-c*(b/r)},Ka=function(a,b){a.x=b.x,a.y=b.y,b.id&&(a.id=b.id)},La=function(a){a.x=Math.round(a.x),a.y=Math.round(a.y)},Ma=null,Na=function(){Ma&&(e.unbind(document,"mousemove",Na),e.addClass(a,"pswp--has_mouse"),g.mouseUsed=!0,Ba("mouseUsed")),Ma=setTimeout(function(){Ma=null},100)},Oa=function(){e.bind(document,"keydown",f),L.transform&&e.bind(f.scrollWrap,"click",f),g.mouseUsed||e.bind(document,"mousemove",Na),e.bind(window,"resize scroll orientationchange",f),Ba("bindEvents")},Pa=function(){e.unbind(window,"resize scroll orientationchange",f),e.unbind(window,"scroll",p.scroll),e.unbind(document,"keydown",f),e.unbind(document,"mousemove",Na),L.transform&&e.unbind(f.scrollWrap,"click",f),T&&e.unbind(window,n,f),clearTimeout(M),Ba("unbindEvents")},Qa=function(a,b){var c=ec(f.currItem,oa,a);return b&&(ba=c),c},Ra=function(a){return a||(a=f.currItem),a.initialZoomLevel},Sa=function(a){return a||(a=f.currItem),a.w>0?g.maxSpreadZoom:1},Ta=function(a,b,c,d){return d===f.currItem.initialZoomLevel?(c[a]=f.currItem.initialPosition[a],!0):(c[a]=Ja(a,d),c[a]>b.min[a]?(c[a]=b.min[a],!0):c[a]<b.max[a]&&(c[a]=b.max[a],!0))},Ua=function(){if(C){var b=L.perspective&&!E;return s="translate"+(b?"3d(":"("),void(t=L.perspective?", 0px)":")")}C="left",e.addClass(a,"pswp--ie"),Ha=function(a,b){b.left=a+"px"},Ga=function(a){var b=a.fitRatio>1?1:a.fitRatio,c=a.container.style,d=b*a.w,e=b*a.h;c.width=d+"px",c.height=e+"px",c.left=a.initialPosition.x+"px",c.top=a.initialPosition.y+"px"},Fa=function(){if(ca){var a=ca,b=f.currItem,c=b.fitRatio>1?1:b.fitRatio,d=c*b.w,e=c*b.h;a.width=d+"px",a.height=e+"px",a.left=na.x+"px",a.top=na.y+"px"}}},Va=function(a){var b="";g.escKey&&27===a.keyCode?b="close":g.arrowKeys&&(37===a.keyCode?b="prev":39===a.keyCode&&(b="next")),b&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,f[b]()))},Wa=function(a){a&&(W||V||da||R)&&(a.preventDefault(),a.stopPropagation())},Xa=function(){f.setScrollOffset(0,e.getScrollY())},Ya={},Za=0,$a=function(a){Ya[a]&&(Ya[a].raf&&G(Ya[a].raf),Za--,delete Ya[a])},_a=function(a){Ya[a]&&$a(a),Ya[a]||(Za++,Ya[a]={})},ab=function(){for(var a in Ya)Ya.hasOwnProperty(a)&&$a(a)},bb=function(a,b,c,d,e,f,g){var h,i=Ca();_a(a);var j=function(){if(Ya[a]){if((h=Ca()-i)>=d)return $a(a),f(c),void(g&&g());f((c-b)*e(h/d)+b),Ya[a].raf=F(j)}};j()},cb={shout:Ba,listen:Aa,viewportSize:oa,options:g,isMainScrollAnimating:function(){return da},getZoomLevel:function(){return q},getCurrentIndex:function(){return k},isDragging:function(){return T},isZooming:function(){return $},setScrollOffset:function(a,b){qa.x=a,K=qa.y=b,Ba("updateScrollOffset",qa)},applyZoomPan:function(a,b,c,d){na.x=b,na.y=c,q=a,Fa(d)},init:function(){if(!h&&!i){var c;f.framework=e,f.template=a,f.bg=e.getChildByClass(a,"pswp__bg"),H=a.className,h=!0,L=e.detectFeatures(),F=L.raf,G=L.caf,C=L.transform,J=L.oldIE,f.scrollWrap=e.getChildByClass(a,"pswp__scroll-wrap"),f.container=e.getChildByClass(f.scrollWrap,"pswp__container"),l=f.container.style,f.itemHolders=w=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],w[0].el.style.display=w[2].el.style.display="none",Ua(),p={resize:f.updateSize,orientationchange:function(){clearTimeout(M),M=setTimeout(function(){oa.x!==f.scrollWrap.clientWidth&&f.updateSize()},500)},scroll:Xa,keydown:Va,click:Wa};var d=L.isOldIOSPhone||L.isOldAndroid||L.isMobileOpera;for(L.animationName&&L.transform&&!d||(g.showAnimationDuration=g.hideAnimationDuration=0),c=0;c<ua.length;c++)f["init"+ua[c]]();if(b){(f.ui=new b(f,e)).init()}Ba("firstUpdate"),k=k||g.index||0,(isNaN(k)||k<0||k>=Yb())&&(k=0),f.currItem=Xb(k),(L.isOldIOSPhone||L.isOldAndroid)&&(ta=!1),a.setAttribute("aria-hidden","false"),g.modal&&(ta?a.style.position="fixed":(a.style.position="absolute",a.style.top=e.getScrollY()+"px")),void 0===K&&(Ba("initialLayout"),K=I=e.getScrollY());var j="pswp--open ";for(g.mainClass&&(j+=g.mainClass+" "),g.showHideOpacity&&(j+="pswp--animate_opacity "),j+=E?"pswp--touch":"pswp--notouch",j+=L.animationName?" pswp--css_animation":"",j+=L.svg?" pswp--svg":"",e.addClass(a,j),f.updateSize(),m=-1,sa=null,c=0;c<3;c++)Ha((c+m)*ra.x,w[c].el.style);J||e.bind(f.scrollWrap,o,f),Aa("initialZoomInEnd",function(){f.setContent(w[0],k-1),f.setContent(w[2],k+1),w[0].el.style.display=w[2].el.style.display="block",g.focus&&a.focus(),Oa()}),f.setContent(w[1],k),f.updateCurrItem(),Ba("afterInit"),ta||(u=setInterval(function(){Za||T||$||q!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),e.addClass(a,"pswp--visible")}},close:function(){h&&(h=!1,i=!0,Ba("close"),Pa(),$b(f.currItem,null,!0,f.destroy))},destroy:function(){Ba("destroy"),Tb&&clearTimeout(Tb),a.setAttribute("aria-hidden","true"),a.className=H,u&&clearInterval(u),e.unbind(f.scrollWrap,o,f),e.unbind(window,"scroll",f),vb(),ab(),za=null},panTo:function(a,b,c){c||(a>ba.min.x?a=ba.min.x:a<ba.max.x&&(a=ba.max.x),b>ba.min.y?b=ba.min.y:b<ba.max.y&&(b=ba.max.y)),na.x=a,na.y=b,Fa()},handleEvent:function(a){a=a||window.event,p[a.type]&&p[a.type](a)},goTo:function(a){a=ya(a);var b=a-k;sa=b,k=a,f.currItem=Xb(k),pa-=b,Ia(ra.x*pa),ab(),da=!1,f.updateCurrItem()},next:function(){f.goTo(k+1)},prev:function(){f.goTo(k-1)},updateCurrZoomItem:function(a){if(a&&Ba("beforeChange",0),w[1].el.children.length){var b=w[1].el.children[0];ca=e.hasClass(b,"pswp__zoom-wrap")?b.style:null}else ca=null;ba=f.currItem.bounds,r=q=f.currItem.initialZoomLevel,na.x=ba.center.x,na.y=ba.center.y,a&&Ba("afterChange")},invalidateCurrItems:function(){v=!0;for(var a=0;a<3;a++)w[a].item&&(w[a].item.needsUpdate=!0)},updateCurrItem:function(a){if(0!==sa){var b,c=Math.abs(sa);if(!(a&&c<2)){f.currItem=Xb(k),wa=!1,Ba("beforeChange",sa),c>=3&&(m+=sa+(sa>0?-3:3),c=3);for(var d=0;d<c;d++)sa>0?(b=w.shift(),w[2]=b,m++,Ha((m+2)*ra.x,b.el.style),f.setContent(b,k-c+d+1+1)):(b=w.pop(),w.unshift(b),m--,Ha(m*ra.x,b.el.style),f.setContent(b,k+c-d-1-1));if(ca&&1===Math.abs(sa)){var e=Xb(x);e.initialZoomLevel!==q&&(ec(e,oa),ic(e),Ga(e))}sa=0,f.updateCurrZoomItem(),x=k,Ba("afterChange")}}},updateSize:function(b){if(!ta&&g.modal){var c=e.getScrollY();if(K!==c&&(a.style.top=c+"px",K=c),!b&&va.x===window.innerWidth&&va.y===window.innerHeight)return;va.x=window.innerWidth,va.y=window.innerHeight,a.style.height=va.y+"px"}if(oa.x=f.scrollWrap.clientWidth,oa.y=f.scrollWrap.clientHeight,Xa(),ra.x=oa.x+Math.round(oa.x*g.spacing),ra.y=oa.y,Ia(ra.x*pa),Ba("beforeResize"),void 0!==m){for(var d,h,i,j=0;j<3;j++)d=w[j],Ha((j+m)*ra.x,d.el.style),i=k+j-1,g.loop&&Yb()>2&&(i=ya(i)),h=Xb(i),h&&(v||h.needsUpdate||!h.bounds)?(f.cleanSlide(h),f.setContent(d,i),1===j&&(f.currItem=h,f.updateCurrZoomItem(!0)),h.needsUpdate=!1):-1===d.index&&i>=0&&f.setContent(d,i),h&&h.container&&(ec(h,oa),ic(h),Ga(h));v=!1}r=q=f.currItem.initialZoomLevel,ba=f.currItem.bounds,ba&&(na.x=ba.center.x,na.y=ba.center.y,Fa(!0)),Ba("resize")},zoomTo:function(a,b,c,d,f){b&&(r=q,qb.x=Math.abs(b.x)-na.x,qb.y=Math.abs(b.y)-na.y,Ka(ma,na));var g=Qa(a,!1),h={};Ta("x",g,h,a),Ta("y",g,h,a);var i=q,j={x:na.x,y:na.y};La(h);var k=function(b){1===b?(q=a,na.x=h.x,na.y=h.y):(q=(a-i)*b+i,na.x=(h.x-j.x)*b+j.x,na.y=(h.y-j.y)*b+j.y),f&&f(b),Fa(1===b)};c?bb("customZoomTo",0,1,c,d||e.easing.sine.inOut,k):k(1)}},db={},eb={},fb={},gb={},hb={},ib=[],jb={},kb=[],lb={},mb=0,nb=ka(),ob=0,pb=ka(),qb=ka(),rb=ka(),sb=function(a,b){return a.x===b.x&&a.y===b.y},tb=function(a,b){return Math.abs(a.x-b.x)<25&&Math.abs(a.y-b.y)<25},ub=function(a,b){return lb.x=Math.abs(a.x-b.x),lb.y=Math.abs(a.y-b.y),Math.sqrt(lb.x*lb.x+lb.y*lb.y)},vb=function(){X&&(G(X),X=null)},wb=function(){T&&(X=F(wb),Mb())},xb=function(){return!("fit"===g.scaleMode&&q===f.currItem.initialZoomLevel)},yb=function(a,b){return!(!a||a===document)&&(!(a.getAttribute("class")&&a.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(b(a)?a:yb(a.parentNode,b)))},zb={},Ab=function(a,b){return zb.prevent=!yb(a.target,g.isClickableElement),Ba("preventDragEvent",a,b,zb),zb.prevent},Bb=function(a,b){return b.x=a.pageX,b.y=a.pageY,b.id=a.identifier,b},Cb=function(a,b,c){c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y)},Db=function(a,b,c){if(a-O>50){var d=kb.length>2?kb.shift():{};d.x=b,d.y=c,kb.push(d),O=a}},Eb=function(){var a=na.y-f.currItem.initialPosition.y;return 1-Math.abs(a/(oa.y/2))},Fb={},Gb={},Hb=[],Ib=function(a){for(;Hb.length>0;)Hb.pop();return D?(ja=0,ib.forEach(function(a){0===ja?Hb[0]=a:1===ja&&(Hb[1]=a),ja++})):a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(Hb[0]=Bb(a.touches[0],Fb),a.touches.length>1&&(Hb[1]=Bb(a.touches[1],Gb))):(Fb.x=a.pageX,Fb.y=a.pageY,Fb.id="",Hb[0]=Fb),Hb},Jb=function(a,b){var c,d,e,h,i=na[a]+b[a],j=b[a]>0,k=pb.x+b.x,l=pb.x-jb.x;if(c=i>ba.min[a]||i<ba.max[a]?g.panEndFriction:1,i=na[a]+b[a]*c,(g.allowPanToNext||q===f.currItem.initialZoomLevel)&&(ca?"h"!==ea||"x"!==a||V||(j?(i>ba.min[a]&&(c=g.panEndFriction,ba.min[a]-i,d=ba.min[a]-ma[a]),(d<=0||l<0)&&Yb()>1?(h=k,l<0&&k>jb.x&&(h=jb.x)):ba.min.x!==ba.max.x&&(e=i)):(i<ba.max[a]&&(c=g.panEndFriction,i-ba.max[a],d=ma[a]-ba.max[a]),(d<=0||l>0)&&Yb()>1?(h=k,l>0&&k<jb.x&&(h=jb.x)):ba.min.x!==ba.max.x&&(e=i))):h=k,"x"===a))return void 0!==h&&(Ia(h,!0),Y=h!==jb.x),ba.min.x!==ba.max.x&&(void 0!==e?na.x=e:Y||(na.x+=b.x*c)),void 0!==h;da||Y||q>f.currItem.fitRatio&&(na[a]+=b[a]*c)},Kb=function(a){if(!("mousedown"===a.type&&a.button>0)){if(Wb)return void a.preventDefault();if(!S||"mousedown"!==a.type){if(Ab(a,!0)&&a.preventDefault(),Ba("pointerDown"),D){var b=e.arraySearch(ib,a.pointerId,"id");b<0&&(b=ib.length),ib[b]={x:a.pageX,y:a.pageY,id:a.pointerId}}var c=Ib(a),d=c.length;Z=null,ab(),T&&1!==d||(T=fa=!0,e.bind(window,n,f),Q=ia=ga=R=Y=W=U=V=!1,ea=null,Ba("firstTouchStart",c),Ka(ma,na),la.x=la.y=0,Ka(gb,c[0]),Ka(hb,gb),jb.x=ra.x*pa,kb=[{x:gb.x,y:gb.y}],O=N=Ca(),Qa(q,!0),vb(),wb()),!$&&d>1&&!da&&!Y&&(r=q,V=!1,$=U=!0,la.y=la.x=0,Ka(ma,na),Ka(db,c[0]),Ka(eb,c[1]),Cb(db,eb,rb),qb.x=Math.abs(rb.x)-na.x,qb.y=Math.abs(rb.y)-na.y,_=aa=ub(db,eb))}}},Lb=function(a){if(a.preventDefault(),D){var b=e.arraySearch(ib,a.pointerId,"id");if(b>-1){var c=ib[b];c.x=a.pageX,c.y=a.pageY}}if(T){var d=Ib(a);if(ea||W||$)Z=d;else if(pb.x!==ra.x*pa)ea="h";else{var f=Math.abs(d[0].x-gb.x)-Math.abs(d[0].y-gb.y);Math.abs(f)>=10&&(ea=f>0?"h":"v",Z=d)}}},Mb=function(){if(Z){var a=Z.length;if(0!==a)if(Ka(db,Z[0]),fb.x=db.x-gb.x,fb.y=db.y-gb.y,$&&a>1){if(gb.x=db.x,gb.y=db.y,!fb.x&&!fb.y&&sb(Z[1],eb))return;Ka(eb,Z[1]),V||(V=!0,Ba("zoomGestureStarted"));var b=ub(db,eb),c=Rb(b);c>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(ia=!0);var d=1,e=Ra(),h=Sa();if(c<e)if(g.pinchToClose&&!ia&&r<=f.currItem.initialZoomLevel){var i=e-c,j=1-i/(e/1.2);Da(j),Ba("onPinchClose",j),ga=!0}else d=(e-c)/e,d>1&&(d=1),c=e-d*(e/3);else c>h&&(d=(c-h)/(6*e),d>1&&(d=1),c=h+d*e);d<0&&(d=0),_=b,Cb(db,eb,nb),la.x+=nb.x-rb.x,la.y+=nb.y-rb.y,Ka(rb,nb),na.x=Ja("x",c),na.y=Ja("y",c),Q=c>q,q=c,Fa()}else{if(!ea)return;if(fa&&(fa=!1,Math.abs(fb.x)>=10&&(fb.x-=Z[0].x-hb.x),Math.abs(fb.y)>=10&&(fb.y-=Z[0].y-hb.y)),gb.x=db.x,gb.y=db.y,0===fb.x&&0===fb.y)return;if("v"===ea&&g.closeOnVerticalDrag&&!xb()){la.y+=fb.y,na.y+=fb.y;var k=Eb();return R=!0,Ba("onVerticalDrag",k),Da(k),void Fa()}Db(Ca(),db.x,db.y),W=!0,ba=f.currItem.bounds;var l=Jb("x",fb);l||(Jb("y",fb),La(na),Fa())}}},Nb=function(a){if(L.isOldAndroid){if(S&&"mouseup"===a.type)return;a.type.indexOf("touch")>-1&&(clearTimeout(S),S=setTimeout(function(){S=0},600))}Ba("pointerUp"),Ab(a,!1)&&a.preventDefault();var b;if(D){var c=e.arraySearch(ib,a.pointerId,"id");if(c>-1)if(b=ib.splice(c,1)[0],navigator.pointerEnabled)b.type=a.pointerType||"mouse";else{var d={4:"mouse",2:"touch",3:"pen"};b.type=d[a.pointerType],b.type||(b.type=a.pointerType||"mouse")}}var h,i=Ib(a),j=i.length;if("mouseup"===a.type&&(j=0),2===j)return Z=null,!0;1===j&&Ka(hb,i[0]),0!==j||ea||da||(b||("mouseup"===a.type?b={x:a.pageX,y:a.pageY,type:"mouse"}:a.changedTouches&&a.changedTouches[0]&&(b={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,type:"touch"})),Ba("touchRelease",a,b));var k=-1;if(0===j&&(T=!1,e.unbind(window,n,f),vb(),$?k=0:-1!==ob&&(k=Ca()-ob)),ob=1===j?Ca():-1,h=-1!==k&&k<150?"zoom":"swipe",$&&j<2&&($=!1,1===j&&(h="zoomPointerUp"),Ba("zoomGestureEnded")),Z=null,W||V||da||R)if(ab(),P||(P=Ob()),P.calculateSwipeSpeed("x"),R){var l=Eb();if(l<g.verticalDragRange)f.close();else{var m=na.y,o=ha;bb("verticalDrag",0,1,300,e.easing.cubic.out,function(a){na.y=(f.currItem.initialPosition.y-m)*a+m,Da((1-o)*a+o),Fa()}),Ba("onVerticalDrag",1)}}else{if((Y||da)&&0===j){var p=Qb(h,P);if(p)return;h="zoomPointerUp"}if(!da)return"swipe"!==h?void Sb():void(!Y&&q>f.currItem.fitRatio&&Pb(P))}},Ob=function(){var a,b,c={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(d){kb.length>1?(a=Ca()-O+50,b=kb[kb.length-2][d]):(a=Ca()-N,b=hb[d]),c.lastFlickOffset[d]=gb[d]-b,c.lastFlickDist[d]=Math.abs(c.lastFlickOffset[d]),c.lastFlickDist[d]>20?c.lastFlickSpeed[d]=c.lastFlickOffset[d]/a:c.lastFlickSpeed[d]=0,Math.abs(c.lastFlickSpeed[d])<.1&&(c.lastFlickSpeed[d]=0),c.slowDownRatio[d]=.95,c.slowDownRatioReverse[d]=1-c.slowDownRatio[d],c.speedDecelerationRatio[d]=1},calculateOverBoundsAnimOffset:function(a,b){c.backAnimStarted[a]||(na[a]>ba.min[a]?c.backAnimDestination[a]=ba.min[a]:na[a]<ba.max[a]&&(c.backAnimDestination[a]=ba.max[a]),void 0!==c.backAnimDestination[a]&&(c.slowDownRatio[a]=.7,c.slowDownRatioReverse[a]=1-c.slowDownRatio[a],c.speedDecelerationRatioAbs[a]<.05&&(c.lastFlickSpeed[a]=0,c.backAnimStarted[a]=!0,bb("bounceZoomPan"+a,na[a],c.backAnimDestination[a],b||300,e.easing.sine.out,function(b){na[a]=b,Fa()}))))},calculateAnimOffset:function(a){c.backAnimStarted[a]||(c.speedDecelerationRatio[a]=c.speedDecelerationRatio[a]*(c.slowDownRatio[a]+c.slowDownRatioReverse[a]-c.slowDownRatioReverse[a]*c.timeDiff/10),c.speedDecelerationRatioAbs[a]=Math.abs(c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]),c.distanceOffset[a]=c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]*c.timeDiff,na[a]+=c.distanceOffset[a])},panAnimLoop:function(){if(Ya.zoomPan&&(Ya.zoomPan.raf=F(c.panAnimLoop),c.now=Ca(),c.timeDiff=c.now-c.lastNow,c.lastNow=c.now,c.calculateAnimOffset("x"),c.calculateAnimOffset("y"),Fa(),c.calculateOverBoundsAnimOffset("x"),c.calculateOverBoundsAnimOffset("y"),c.speedDecelerationRatioAbs.x<.05&&c.speedDecelerationRatioAbs.y<.05))return na.x=Math.round(na.x),na.y=Math.round(na.y),Fa(),void $a("zoomPan")}};return c},Pb=function(a){if(a.calculateSwipeSpeed("y"),ba=f.currItem.bounds,a.backAnimDestination={},a.backAnimStarted={},Math.abs(a.lastFlickSpeed.x)<=.05&&Math.abs(a.lastFlickSpeed.y)<=.05)return a.speedDecelerationRatioAbs.x=a.speedDecelerationRatioAbs.y=0,a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),!0;_a("zoomPan"),a.lastNow=Ca(),a.panAnimLoop()},Qb=function(a,b){var c;da||(mb=k);var d;if("swipe"===a){var h=gb.x-hb.x,i=b.lastFlickDist.x<10;h>30&&(i||b.lastFlickOffset.x>20)?d=-1:h<-30&&(i||b.lastFlickOffset.x<-20)&&(d=1)}var j;d&&(k+=d,k<0?(k=g.loop?Yb()-1:0,j=!0):k>=Yb()&&(k=g.loop?0:Yb()-1,j=!0),j&&!g.loop||(sa+=d,pa-=d,c=!0));var l,m=ra.x*pa,n=Math.abs(m-pb.x);return c||m>pb.x==b.lastFlickSpeed.x>0?(l=Math.abs(b.lastFlickSpeed.x)>0?n/Math.abs(b.lastFlickSpeed.x):333,l=Math.min(l,400),l=Math.max(l,250)):l=333,mb===k&&(c=!1),da=!0,Ba("mainScrollAnimStart"),bb("mainScroll",pb.x,m,l,e.easing.cubic.out,Ia,function(){ab(),da=!1,mb=-1,(c||mb!==k)&&f.updateCurrItem(),Ba("mainScrollAnimComplete")}),c&&f.updateCurrItem(!0),c},Rb=function(a){return 1/aa*a*r},Sb=function(){var a=q,b=Ra(),c=Sa();q<b?a=b:q>c&&(a=c);var d,g=ha;return ga&&!Q&&!ia&&q<b?(f.close(),!0):(ga&&(d=function(a){Da((1-g)*a+g)}),f.zoomTo(a,0,200,e.easing.cubic.out,d),!0)};xa("Gestures",{publicMethods:{initGestures:function(){var a=function(a,b,c,d,e){y=a+b,z=a+c,A=a+d,B=e?a+e:""};D=L.pointerEvent,D&&L.touch&&(L.touch=!1),D?navigator.pointerEnabled?a("pointer","down","move","up","cancel"):a("MSPointer","Down","Move","Up","Cancel"):L.touch?(a("touch","start","move","end","cancel"),E=!0):a("mouse","down","move","up"),n=z+" "+A+" "+B,o=y,D&&!E&&(E=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),f.likelyTouchDevice=E,p[y]=Kb,p[z]=Lb,p[A]=Nb,B&&(p[B]=p[A]),L.touch&&(o+=" mousedown",n+=" mousemove mouseup",p.mousedown=p[y],p.mousemove=p[z],p.mouseup=p[A]),E||(g.allowPanToNext=!1)}}});var Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b=function(b,c,d,h){Tb&&clearTimeout(Tb),Wb=!0,Vb=!0;var i;b.initialLayout?(i=b.initialLayout,b.initialLayout=null):i=g.getThumbBoundsFn&&g.getThumbBoundsFn(k);var l=d?g.hideAnimationDuration:g.showAnimationDuration,m=function(){$a("initialZoom"),d?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(Da(1),c&&(c.style.display="block"),e.addClass(a,"pswp--animated-in"),Ba("initialZoom"+(d?"OutEnd":"InEnd"))),h&&h(),Wb=!1};if(!l||!i||void 0===i.x)return Ba("initialZoom"+(d?"Out":"In")),q=b.initialZoomLevel,Ka(na,b.initialPosition),Fa(),a.style.opacity=d?0:1,Da(1),void(l?setTimeout(function(){m()},l):m());!function(){var c=j,h=!f.currItem.src||f.currItem.loadError||g.showHideOpacity;b.miniImg&&(b.miniImg.style.webkitBackfaceVisibility="hidden"),d||(q=i.w/b.w,na.x=i.x,na.y=i.y-I,f[h?"template":"bg"].style.opacity=.001,Fa()),_a("initialZoom"),d&&!c&&e.removeClass(a,"pswp--animated-in"),h&&(d?e[(c?"remove":"add")+"Class"](a,"pswp--animate_opacity"):setTimeout(function(){e.addClass(a,"pswp--animate_opacity")},30)),Tb=setTimeout(function(){if(Ba("initialZoom"+(d?"Out":"In")),d){var f=i.w/b.w,g={x:na.x,y:na.y},j=q,k=ha,n=function(b){1===b?(q=f,na.x=i.x,na.y=i.y-K):(q=(f-j)*b+j,na.x=(i.x-g.x)*b+g.x,na.y=(i.y-K-g.y)*b+g.y),Fa(),h?a.style.opacity=1-b:Da(k-b*k)};c?bb("initialZoom",0,1,l,e.easing.cubic.out,n,m):(n(1),Tb=setTimeout(m,l+20))}else q=b.initialZoomLevel,Ka(na,b.initialPosition),Fa(),Da(1),h?a.style.opacity=1:Da(1),Tb=setTimeout(m,l+20)},d?25:90)}()},_b={},ac=[],bc={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Ub.length}},cc=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},dc=function(a,b,c){var d=a.bounds;d.center.x=Math.round((_b.x-b)/2),d.center.y=Math.round((_b.y-c)/2)+a.vGap.top,d.max.x=b>_b.x?Math.round(_b.x-b):d.center.x,d.max.y=c>_b.y?Math.round(_b.y-c)+a.vGap.top:d.center.y,d.min.x=b>_b.x?0:d.center.x,d.min.y=c>_b.y?a.vGap.top:d.center.y},ec=function(a,b,c){if(a.src&&!a.loadError){var d=!c;if(d&&(a.vGap||(a.vGap={top:0,bottom:0}),Ba("parseVerticalMargin",a)),_b.x=b.x,_b.y=b.y-a.vGap.top-a.vGap.bottom,d){var e=_b.x/a.w,f=_b.y/a.h;a.fitRatio=e<f?e:f;var h=g.scaleMode;"orig"===h?c=1:"fit"===h&&(c=a.fitRatio),c>1&&(c=1),a.initialZoomLevel=c,a.bounds||(a.bounds=cc())}if(!c)return;return dc(a,a.w*c,a.h*c),d&&c===a.initialZoomLevel&&(a.initialPosition=a.bounds.center),a.bounds}return a.w=a.h=0,a.initialZoomLevel=a.fitRatio=1,a.bounds=cc(),a.initialPosition=a.bounds.center,a.bounds},fc=function(a,b,c,d,e,g){b.loadError||d&&(b.imageAppended=!0,ic(b,d,b===f.currItem&&wa),c.appendChild(d),g&&setTimeout(function(){b&&b.loaded&&b.placeholder&&(b.placeholder.style.display="none",b.placeholder=null)},500))},gc=function(a){if(a.loading=!0,a.loaded=!1,a.svg){var b=a.img=e.createEl("pswp__img","object");b.type="image/svg+xml"}else var b=a.img=e.createEl("pswp__img","img");var c=function(){a.loading=!1,a.loaded=!0,a.loadComplete?a.loadComplete(a):a.img=null,b.onload=b.onerror=null,b=null};return b.onload=c,b.onerror=function(){a.loadError=!0,c()},a.svg?b.data=a.src:b.src=a.src,b},hc=function(a,b){if(a.src&&a.loadError&&a.container)return b&&(a.container.innerHTML=""),a.container.innerHTML=g.errorMsg.replace("%url%",a.src),!0},ic=function(a,b,c){if(a.src){b||(b=a.container.lastChild);var d=c?a.w:Math.round(a.w*a.fitRatio),e=c?a.h:Math.round(a.h*a.fitRatio);a.placeholder&&!a.loaded&&(a.placeholder.style.width=d+"px",a.placeholder.style.height=e+"px"),b.style.width=d+"px",b.style.height=e+"px";for(var f=0;f<=a.container.childNodes.length;f++)a.container.childNodes[f]&&"OBJECT"===a.container.childNodes[f].tagName&&(a.container.childNodes[f].style.width=d+"px",a.container.childNodes[f].style.height=e+"px")}},jc=function(){if(ac.length){for(var a,b=0;b<ac.length;b++)a=ac[b],a.holder.index===a.index&&fc(a.index,a.item,a.baseDiv,a.img,0,a.clearPlaceholder);ac=[]}};xa("Controller",{publicMethods:{lazyLoadItem:function(a){a=ya(a);var b=Xb(a);b&&(!b.loaded&&!b.loading||v)&&(Ba("gettingData",a,b),b.src&&gc(b))},initController:function(){e.extend(g,bc,!0),f.items=Ub=c,Xb=f.getItemAt,Yb=g.getNumItemsFn,Zb=g.loop,Yb()<3&&(g.loop=!1),Aa("beforeChange",function(a){var b,c=g.preload,d=null===a||a>=0,e=Math.min(c[0],Yb()),h=Math.min(c[1],Yb());for(b=1;b<=(d?h:e);b++)f.lazyLoadItem(k+b);for(b=1;b<=(d?e:h);b++)f.lazyLoadItem(k-b)}),Aa("initialLayout",function(){f.currItem.initialLayout=g.getThumbBoundsFn&&g.getThumbBoundsFn(k)}),Aa("mainScrollAnimComplete",jc),Aa("initialZoomInEnd",jc),Aa("destroy",function(){for(var a,b=0;b<Ub.length;b++)a=Ub[b],a.container&&(a.container=null),a.placeholder&&(a.placeholder=null),a.img&&(a.img=null),a.preloader&&(a.preloader=null),a.loadError&&(a.loaded=a.loadError=!1);ac=null})},getItemAt:function(a){return a>=0&&(void 0!==Ub[a]&&Ub[a])},allowProgressiveImg:function(){return g.forceProgressiveLoading||!E||g.mouseUsed||screen.width>1200},setContent:function(a,b){g.loop&&(b=ya(b));var c=f.getItemAt(a.index);c&&(c.container=null);var d,i=f.getItemAt(b);if(!i)return void(a.el.innerHTML="");Ba("gettingData",b,i),a.index=b,a.item=i;var j=i.container=e.createEl("pswp__zoom-wrap");if(!i.src&&i.html&&(i.html.tagName?j.appendChild(i.html):j.innerHTML=i.html),hc(i),ec(i,oa),!i.src||i.loadError||i.loaded){if((i.src||i.data)&&!i.loadError){if(i.svg){var d=i.img=e.createEl("pswp__img","object");d.type="image/svg+xml",d.data=i.src}else{var d=i.img=e.createEl("pswp__img","img");d.src=i.src}d.style.opacity=1,ic(i,d),fc(0,i,j,d),i.svg&&fc(0,i,j,e.createEl("pswp__img pswp__img--overlay","div"))}}else{if(i.loadComplete=function(c){if(h){if(a&&a.index===b){if(hc(c,!0))return c.loadComplete=c.img=null,ec(c,oa),Ga(c),void(a.index===k&&f.updateCurrZoomItem());c.imageAppended?!Wb&&c.placeholder&&(c.placeholder.style.display="none",c.placeholder=null):L.transform&&(da||Wb)?(ac.push({item:c,baseDiv:j,img:c.img,index:b,holder:a,clearPlaceholder:!0}),c.svg&&ac.push({item:c,baseDiv:j,img:e.createEl("pswp__img pswp__img--overlay","div"),index:b,holder:a,clearPlaceholder:!0})):(fc(0,c,j,c.img,0,!0),c.svg&&fc(0,c,j,e.createEl("pswp__img pswp__img--overlay","div"),0,!0))}c.loadComplete=null,c.img=null,Ba("imageLoadComplete",b,c)}},e.features.transform){var l="pswp__img pswp__img--placeholder";l+=i.msrc?"":" pswp__img--placeholder--blank";var m=e.createEl(l,i.msrc?"img":"");i.msrc&&(m.src=i.msrc),ic(i,m),j.appendChild(m),i.placeholder=m}i.loading||gc(i),f.allowProgressiveImg()&&(!Vb&&L.transform?(ac.push({item:i,baseDiv:j,img:i.img,index:b,holder:a}),i.svg&&ac.push({item:i,baseDiv:j,img:e.createEl("pswp__img pswp__img--overlay","div"),index:b,holder:a})):(fc(0,i,j,i.img,0,!0),i.svg&&fc(0,i,j,e.createEl("pswp__img pswp__img--overlay","div"),0,!0)))}Vb||b!==k?Ga(i):(ca=j.style,$b(i,d||i.img)),a.el.innerHTML="",a.el.appendChild(j)},cleanSlide:function(a){a.img&&(a.img.onload=a.img.onerror=null),a.loaded=a.loading=a.img=a.imageAppended=!1}}});var kc,lc={},mc=function(a,b,c){var d=document.createEvent("CustomEvent"),e={origEvent:a,target:a.target,releasePoint:b,pointerType:c||"touch"};d.initCustomEvent("pswpTap",!0,!0,e),a.target.dispatchEvent(d)};xa("Tap",{publicMethods:{initTap:function(){Aa("firstTouchStart",f.onTapStart),Aa("touchRelease",f.onTapRelease),Aa("destroy",function(){lc={},kc=null})},onTapStart:function(a){a.length>1&&(clearTimeout(kc),kc=null)},onTapRelease:function(a,b){if(b&&!W&&!U&&!Za){var c=b;if(kc&&(clearTimeout(kc),kc=null,tb(c,lc)))return void Ba("doubleTap",c);if("mouse"===b.type)return void mc(a,b,"mouse");if("BUTTON"===a.target.tagName.toUpperCase()||e.hasClass(a.target,"pswp__single-tap"))return void mc(a,b);Ka(lc,c),kc=setTimeout(function(){mc(a,b),kc=null},300)}}}});var nc;xa("DesktopZoom",{publicMethods:{initDesktopZoom:function(){J||(E?Aa("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(b){nc={};var c="wheel mousewheel DOMMouseScroll";Aa("bindEvents",function(){e.bind(a,c,f.handleMouseWheel)}),Aa("unbindEvents",function(){nc&&e.unbind(a,c,f.handleMouseWheel)}),f.mouseZoomedIn=!1;var d,g=function(){f.mouseZoomedIn&&(e.removeClass(a,"pswp--zoomed-in"),f.mouseZoomedIn=!1),q<1?e.addClass(a,"pswp--zoom-allowed"):e.removeClass(a,"pswp--zoom-allowed"),h()},h=function(){d&&(e.removeClass(a,"pswp--dragging"),d=!1)};Aa("resize",g),Aa("afterChange",g),Aa("pointerDown",function(){f.mouseZoomedIn&&(d=!0,e.addClass(a,"pswp--dragging"))}),Aa("pointerUp",h),b||g()},handleMouseWheel:function(a){if(q<=f.currItem.fitRatio)return g.modal&&(!g.closeOnScroll||Za||T?a.preventDefault():C&&Math.abs(a.deltaY)>2&&(j=!0,f.close())),!0;if(a.stopPropagation(),nc.x=0,"deltaX"in a)1===a.deltaMode?(nc.x=18*a.deltaX,nc.y=18*a.deltaY):(nc.x=a.deltaX,nc.y=a.deltaY);else if("wheelDelta"in a)a.wheelDeltaX&&(nc.x=-.16*a.wheelDeltaX),a.wheelDeltaY?nc.y=-.16*a.wheelDeltaY:nc.y=-.16*a.wheelDelta;else{if(!("detail"in a))return;nc.y=a.detail}Qa(q,!0);var b=na.x-nc.x,c=na.y-nc.y;(g.modal||b<=ba.min.x&&b>=ba.max.x&&c<=ba.min.y&&c>=ba.max.y)&&a.preventDefault(),f.panTo(b,c)},toggleDesktopZoom:function(b){b=b||{x:oa.x/2+qa.x,y:oa.y/2+qa.y};var c=g.getDoubleTapZoom(!0,f.currItem),d=q===c;f.mouseZoomedIn=!d,f.zoomTo(d?f.currItem.initialZoomLevel:c,b,333),e[(d?"remove":"add")+"Class"](a,"pswp--zoomed-in")}}});var oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,Ac={history:!0,galleryUID:1},Bc=function(){return yc.hash.substring(1)},Cc=function(){oc&&clearTimeout(oc),qc&&clearTimeout(qc)},Dc=function(){var a=Bc(),b={};if(a.length<5)return b;var c,d=a.split("&");for(c=0;c<d.length;c++)if(d[c]){var e=d[c].split("=");e.length<2||(b[e[0]]=e[1])}if(g.galleryPIDs){var f=b.pid;for(b.pid=0,c=0;c<Ub.length;c++)if(Ub[c].pid===f){b.pid=c;break}}else b.pid=parseInt(b.pid,10)-1;return b.pid<0&&(b.pid=0),b},Ec=function(){if(qc&&clearTimeout(qc),Za||T)return void(qc=setTimeout(Ec,500));rc?clearTimeout(pc):rc=!0;var a=k+1,b=Xb(k);b.hasOwnProperty("pid")&&(a=b.pid);var c=uc+"&gid="+g.galleryUID+"&pid="+a;vc||-1===yc.hash.indexOf(c)&&(xc=!0);var d=yc.href.split("#")[0]+"#"+c;zc?"#"+c!==window.location.hash&&history[vc?"replaceState":"pushState"]("",document.title,d):vc?yc.replace(d):yc.hash=c,vc=!0,pc=setTimeout(function(){rc=!1},60)};xa("History",{publicMethods:{initHistory:function(){if(e.extend(g,Ac,!0),g.history){yc=window.location,xc=!1,wc=!1,vc=!1,uc=Bc(),zc="pushState"in history,uc.indexOf("gid=")>-1&&(uc=uc.split("&gid=")[0],uc=uc.split("?gid=")[0]),Aa("afterChange",f.updateURL),Aa("unbindEvents",function(){e.unbind(window,"hashchange",f.onHashChange)});var a=function(){
tc=!0,wc||(xc?history.back():uc?yc.hash=uc:zc?history.pushState("",document.title,yc.pathname+yc.search):yc.hash=""),Cc()};Aa("unbindEvents",function(){j&&a()}),Aa("destroy",function(){tc||a()}),Aa("firstUpdate",function(){k=Dc().pid});var b=uc.indexOf("pid=");b>-1&&(uc=uc.substring(0,b),"&"===uc.slice(-1)&&(uc=uc.slice(0,-1))),setTimeout(function(){h&&e.bind(window,"hashchange",f.onHashChange)},40)}},onHashChange:function(){if(Bc()===uc)return wc=!0,void f.close();rc||(sc=!0,f.goTo(Dc().pid),sc=!1)},updateURL:function(){Cc(),sc||(vc?oc=setTimeout(Ec,800):Ec())}}}),e.extend(f,cb)}}),/*! PhotoSwipe Default UI - 4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */
function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipeUI_Default=b()}(this,function(){"use strict";return function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this,w=!1,x=!0,y=!0,z={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(a,b){return a.title?(b.children[0].innerHTML=a.title,!0):(b.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return a.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return a.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},A=function(a){if(r)return!0;a=a||window.event,q.timeToIdle&&q.mouseUsed&&!k&&K();for(var c,d,e=a.target||a.srcElement,f=e.getAttribute("class")||"",g=0;g<S.length;g++)c=S[g],c.onTap&&f.indexOf("pswp__"+c.name)>-1&&(c.onTap(),d=!0);if(d){a.stopPropagation&&a.stopPropagation(),r=!0;var h=b.features.isOldAndroid?600:30;s=setTimeout(function(){r=!1},h)}},B=function(){return!a.likelyTouchDevice||q.mouseUsed||screen.width>q.fitControlsWidth},C=function(a,c,d){b[(d?"add":"remove")+"Class"](a,"pswp__"+c)},D=function(){var a=1===q.getNumItemsFn();a!==p&&(C(d,"ui--one-slide",a),p=a)},E=function(){C(i,"share-modal--hidden",y)},F=function(){return y=!y,y?(b.removeClass(i,"pswp__share-modal--fade-in"),setTimeout(function(){y&&E()},300)):(E(),setTimeout(function(){y||b.addClass(i,"pswp__share-modal--fade-in")},30)),y||H(),!1},G=function(b){b=b||window.event;var c=b.target||b.srcElement;return a.shout("shareLinkClick",b,c),!!c.href&&(!!c.hasAttribute("download")||(window.open(c.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),y||F(),!1))},H=function(){for(var a,b,c,d,e,f="",g=0;g<q.shareButtons.length;g++)a=q.shareButtons[g],c=q.getImageURLForShare(a),d=q.getPageURLForShare(a),e=q.getTextForShare(a),b=a.url.replace("{{url}}",encodeURIComponent(d)).replace("{{image_url}}",encodeURIComponent(c)).replace("{{raw_image_url}}",c).replace("{{text}}",encodeURIComponent(e)),f+='<a href="'+b+'" target="_blank" class="pswp__share--'+a.id+'"'+(a.download?"download":"")+">"+a.label+"</a>",q.parseShareButtonOut&&(f=q.parseShareButtonOut(a,f));i.children[0].innerHTML=f,i.children[0].onclick=G},I=function(a){for(var c=0;c<q.closeElClasses.length;c++)if(b.hasClass(a,"pswp__"+q.closeElClasses[c]))return!0},J=0,K=function(){clearTimeout(u),J=0,k&&v.setIdle(!1)},L=function(a){a=a||window.event;var b=a.relatedTarget||a.toElement;b&&"HTML"!==b.nodeName||(clearTimeout(u),u=setTimeout(function(){v.setIdle(!0)},q.timeToIdleOutside))},M=function(){q.fullscreenEl&&!b.features.isOldAndroid&&(c||(c=v.getFullscreenAPI()),c?(b.bind(document,c.eventK,v.updateFullscreen),v.updateFullscreen(),b.addClass(a.template,"pswp--supports-fs")):b.removeClass(a.template,"pswp--supports-fs"))},N=function(){q.preloaderEl&&(O(!0),l("beforeChange",function(){clearTimeout(o),o=setTimeout(function(){a.currItem&&a.currItem.loading?(!a.allowProgressiveImg()||a.currItem.img&&!a.currItem.img.naturalWidth)&&O(!1):O(!0)},q.loadingIndicatorDelay)}),l("imageLoadComplete",function(b,c){a.currItem===c&&O(!0)}))},O=function(a){n!==a&&(C(m,"preloader--active",!a),n=a)},P=function(a){var c=a.vGap;if(B()){var g=q.barsSize;if(q.captionEl&&"auto"===g.bottom)if(f||(f=b.createEl("pswp__caption pswp__caption--fake"),f.appendChild(b.createEl("pswp__caption__center")),d.insertBefore(f,e),b.addClass(d,"pswp__ui--fit")),q.addCaptionHTMLFn(a,f,!0)){var h=f.clientHeight;c.bottom=parseInt(h,10)||44}else c.bottom=g.top;else c.bottom="auto"===g.bottom?0:g.bottom;c.top=g.top}else c.top=c.bottom=0},Q=function(){q.timeToIdle&&l("mouseUsed",function(){b.bind(document,"mousemove",K),b.bind(document,"mouseout",L),t=setInterval(function(){2===++J&&v.setIdle(!0)},q.timeToIdle/2)})},R=function(){l("onVerticalDrag",function(a){x&&a<.95?v.hideControls():!x&&a>=.95&&v.showControls()});var a;l("onPinchClose",function(b){x&&b<.9?(v.hideControls(),a=!0):a&&!x&&b>.9&&v.showControls()}),l("zoomGestureEnded",function(){(a=!1)&&!x&&v.showControls()})},S=[{name:"caption",option:"captionEl",onInit:function(a){e=a}},{name:"share-modal",option:"shareEl",onInit:function(a){i=a},onTap:function(){F()}},{name:"button--share",option:"shareEl",onInit:function(a){h=a},onTap:function(){F()}},{name:"button--zoom",option:"zoomEl",onTap:a.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(a){g=a}},{name:"button--close",option:"closeEl",onTap:a.close},{name:"button--arrow--left",option:"arrowEl",onTap:a.prev},{name:"button--arrow--right",option:"arrowEl",onTap:a.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){c.isFullscreen()?c.exit():c.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(a){m=a}}],T=function(){var a,c,e,f=function(d){if(d)for(var f=d.length,g=0;g<f;g++){a=d[g],c=a.className;for(var h=0;h<S.length;h++)e=S[h],c.indexOf("pswp__"+e.name)>-1&&(q[e.option]?(b.removeClass(a,"pswp__element--disabled"),e.onInit&&e.onInit(a)):b.addClass(a,"pswp__element--disabled"))}};f(d.children);var g=b.getChildByClass(d,"pswp__top-bar");g&&f(g.children)};v.init=function(){b.extend(a.options,z,!0),q=a.options,d=b.getChildByClass(a.scrollWrap,"pswp__ui"),l=a.listen,R(),l("beforeChange",v.update),l("doubleTap",function(b){var c=a.currItem.initialZoomLevel;a.getZoomLevel()!==c?a.zoomTo(c,b,333):a.zoomTo(q.getDoubleTapZoom(!1,a.currItem),b,333)}),l("preventDragEvent",function(a,b,c){var d=a.target||a.srcElement;d&&d.getAttribute("class")&&a.type.indexOf("mouse")>-1&&(d.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(d.tagName))&&(c.prevent=!1)}),l("bindEvents",function(){b.bind(d,"pswpTap click",A),b.bind(a.scrollWrap,"pswpTap",v.onGlobalTap),a.likelyTouchDevice||b.bind(a.scrollWrap,"mouseover",v.onMouseOver)}),l("unbindEvents",function(){y||F(),t&&clearInterval(t),b.unbind(document,"mouseout",L),b.unbind(document,"mousemove",K),b.unbind(d,"pswpTap click",A),b.unbind(a.scrollWrap,"pswpTap",v.onGlobalTap),b.unbind(a.scrollWrap,"mouseover",v.onMouseOver),c&&(b.unbind(document,c.eventK,v.updateFullscreen),c.isFullscreen()&&(q.hideAnimationDuration=0,c.exit()),c=null)}),l("destroy",function(){q.captionEl&&(f&&d.removeChild(f),b.removeClass(e,"pswp__caption--empty")),i&&(i.children[0].onclick=null),b.removeClass(d,"pswp__ui--over-close"),b.addClass(d,"pswp__ui--hidden"),v.setIdle(!1)}),q.showAnimationDuration||b.removeClass(d,"pswp__ui--hidden"),l("initialZoomIn",function(){q.showAnimationDuration&&b.removeClass(d,"pswp__ui--hidden")}),l("initialZoomOut",function(){b.addClass(d,"pswp__ui--hidden")}),l("parseVerticalMargin",P),T(),q.shareEl&&h&&i&&(y=!0),D(),Q(),M(),N()},v.setIdle=function(a){k=a,C(d,"ui--idle",a)},v.update=function(){x&&a.currItem?(v.updateIndexIndicator(),q.captionEl&&(q.addCaptionHTMLFn(a.currItem,e),C(e,"caption--empty",!a.currItem.title)),w=!0):w=!1,y||F(),D()},v.updateFullscreen=function(d){d&&setTimeout(function(){a.setScrollOffset(0,b.getScrollY())},50),b[(c.isFullscreen()?"add":"remove")+"Class"](a.template,"pswp--fs")},v.updateIndexIndicator=function(){q.counterEl&&(g.innerHTML=a.getCurrentIndex()+1+q.indexIndicatorSep+q.getNumItemsFn())},v.onGlobalTap=function(c){c=c||window.event;var d=c.target||c.srcElement;if(!r)if(c.detail&&"mouse"===c.detail.pointerType){if(I(d))return void a.close();b.hasClass(d,"pswp__img")&&(1===a.getZoomLevel()&&a.getZoomLevel()<=a.currItem.fitRatio?q.clickToCloseNonZoomable&&a.close():a.toggleDesktopZoom(c.detail.releasePoint))}else if(q.tapToToggleControls&&(x?v.hideControls():v.showControls()),q.tapToClose&&(b.hasClass(d,"pswp__img")||I(d)))return void a.close()},v.onMouseOver=function(a){a=a||window.event;var b=a.target||a.srcElement;C(d,"ui--over-close",I(b))},v.hideControls=function(){b.addClass(d,"pswp__ui--hidden"),x=!1},v.showControls=function(){x=!0,w||v.update(),b.removeClass(d,"pswp__ui--hidden")},v.supportsFullscreen=function(){var a=document;return!!(a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen)},v.getFullscreenAPI=function(){var b,c=document.documentElement,d="fullscreenchange";return c.requestFullscreen?b={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:d}:c.mozRequestFullScreen?b={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+d}:c.webkitRequestFullscreen?b={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+d}:c.msRequestFullscreen&&(b={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),b&&(b.enter=function(){if(j=q.closeOnScroll,q.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return a.template[this.enterK]();a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},b.exit=function(){return q.closeOnScroll=j,document[this.exitK]()},b.isFullscreen=function(){return document[this.elementK]}),b}}}),function(a,b){"use strict";function c(){var c=a(".article img").parent();c.each(function(d){var e=a(c[d]).find("img"),f=e.attr("src");e.data("img-large-src",f),e.data("img-large-x",parseInt(e.attr("width"),10)),e.data("img-large-y",parseInt(e.attr("height"),10));var g="svg"===e.data("alt-type")&&e.attr("src")===e.data("alt-src");if(g=g&&b.utilities.isOldSafari()){var h=a("<object/>").attr("data",f).css("position","absolute").css("top",0).css("left",0);e.css("opacity",0),e.closest("div").css("position","relative"),e.parent().prepend(h)}})}function d(c){var d;d=void 0!==c?a(c):a(".article img").not(".noLightbox");var e=[];if(d.each(function(c,d){var f=a(d),g="svg"===f.data("alt-type");g=g&&b.utilities.isOldSafari();var h=f.data("alt-src")||f.data("img-large-src")||f.attr("src"),i=f.data("img-large-x")?4*parseInt(f.data("img-large-x"),10):4*f[0].naturalWidth,j=f.data("img-large-y")?4*parseInt(f.data("img-large-y"),10):4*f[0].naturalHeight;if("svg"===f.data("alt-type")){var k=f.height(),l=f.width();0!==k&&0!==l||(k=f[0].naturalHeight,l=f[0].naturalWidth);var m=screen.height/k,n=screen.width/l;j=k*Math.min(m,n)*4,i=l*Math.min(m,n)*4}var o={svg:g,src:h,w:i,h:j,elem:d,index:c};e.push(o)}),void 0!==c)return e;j=e}function e(a,b){for(var c=null,d=0,e=b.length;d<e;d++)b[d].elem===a&&(c=b[d].index);return c}function f(){return document.querySelectorAll(".pswp")[0]}function g(a,b){var c={index:b,bgOpacity:.7,history:!1,closeOnVerticalDrag:!1};new PhotoSwipe(f(),PhotoSwipeUI_Default,a,c).init()}function h(a,b){void 0===b&&(b=j);f();return g(b,e(a,b)),!1}function i(){a(".responsiveLoadingImage").parent().imagesLoaded().then(function(){a(".responsiveLoadingImage").each(function(){a(this).css("display","inline-block").prev().replaceWith(this)})})}var j;a.fn.imagesLoaded=function(){var b=this.find('img[src!=""]');if(!b.length)return a.Deferred().resolve().promise();var c=[];return b.each(function(){var b=a.Deferred();c.push(b);var d=new Image;d.onload=function(){b.resolve()},d.onerror=function(){b.resolve()},d.onabort=function(){b.resolve()},d.src=this.src}),a.when.apply(a,c)},b.images={setupImages:c,setupLightboxItems:d,callLightbox:h,placeholders:i}}(jQuery,app),function(a,b){"use strict";function c(c){b.mediaMarker.getMarker(c.$items)&&(n(!0,!0),a("#contextMenu").promise().done(function(){if(c.$items&&c.$items.length>0){var k=d(c);if(k.find("span").length>0){a("#regionMain").before(k);var l,m,n,o,p,q,r,s=parseInt(k.css("margin-right"),10),t=parseInt(k.css("margin-bottom"),10),u=parseInt(k.css("margin-left"),10),v=parseInt(k.css("margin-top"),10),w=parseInt(k.css("border-top-left-radius"),10),x=(s-t)/2,y=x+w,z=k.width(),A=b.utilities.roundToNearest(z/2,5),B=s+A,C=z-A,D=a(c.$items[0]).parent()[0].getBoundingClientRect(),E=D.left+y,F=D.right-y;if((o=b.highlightManager.getHighlightedElements().find(".cl, .vl"))&&o.length>0){p=o.position(),l=o[0].getBoundingClientRect();var G=o.width();q=l.left+G/2,r=p.top}else o=a("#"+b.highlightManager.getFirstHighlightedId(!1)),p=o.position(),l=o[0].getBoundingClientRect(),q=b.isLibraryRTL()?l.right-y-5:l.left+y+u+5,r=p.top;r+=parseInt(o.css("margin-top"),10),n=q,m=r,A=f(A,q,D,5,B,C,s,y,z),A=i(A,u,5,z,y,v),B=g(s,A,y),C=h(z,A,s,y);var H=a("#regionHeader").height();o.offset().top-a(window).scrollTop()-H<0?(n=b.isLibraryRTL()?D.right-C:D.left+B,m=a(window).scrollTop()+H):m+=H,m=m-k.outerHeight()-t,n-=B,n=j(n,E,D,z,F,y),A=i(A,u,5,z,y,v),e(c,k,A,m,n)}}}))}function d(c){var d=a('<span id="contextMenu"/>').addClass("contextMenu").css("left",-9999).on("click",function(a){return!1});return b.audioMarkers&&d.append(a('<span id="playSelectedButton"/>').data("buildEvent",c)),d}function e(b,c,d,e,f){c.addClass("triangle-center-"+d),c.css("margin",0),c.css("top",e).css("left",f),k(b),window.setTimeout(function(){a(document).one("scroll.contextMenuDismiss click.contextMenuDismiss",function(a){n()})},500)}function f(a,c,d,e,f,i,j,k,l){var m=c-d.left,n=d.right-c,o=0,p=0;if(Math.abs(m-n)>2*e)for(;o!==a;)p=a,f>m&&(p-=e),i>n&&(p+=e),p===o&&(p<o?b.isLibraryRTL()&&(p=o):b.isLibraryRTL()||(p=o)),o=a,a=p,f=g(j,a,k),i=h(l,a,j,k);return a}function g(a,b,c){return a/2+b+c}function h(a,b,c,d){return parseInt(a-b+c/2-d)}function i(a,c,d,e,f,g){return a<=c&&(a=b.utilities.roundToNearest(c+d,d)),a>=e-2*f&&(a=b.utilities.roundDown(e-2*f,d),e-f>=g&&(a=b.utilities.roundDown(g,d))),a}function j(a,c,d,e,f,g){return b.isLibraryRTL()?(a<c&&(a=d.left),a+e>f&&(a=d.right-e-2*g)):(a+e>f&&(a=d.right-e-2*g),a<c&&(a=d.left)),a}function k(a){b.media.isPlayerPlaying?l():m()}function l(){a("#playSelectedButton").addClass("stopButton").removeClass("playButton").one("click",function(a){return b.mediaMarker.stop(),k(a),!1})}function m(){var c=a("#playSelectedButton");c.addClass("playButton").removeClass("stopButton").one("click",function(a){return b.mediaMarker.playSelected(c.data("buildEvent").$items),n(!0),b.mediaMarker.clearMarkers(),!1})}function n(b,c){var d=a("#contextMenu");o()&&!b||(c?d.remove():d.fadeOut("slow",function(){d.remove()}),a(document).off(".contextMenuDismiss"))}function o(){var c=a("#contextMenu").children("span"),d=!1;return c.each(function(a,c){var e=c.getBoundingClientRect(),f=e.top,g=e.bottom,h=e.left,i=e.right;if(b.lastClickEvent){var j=b.lastClickEvent.clientX,k=b.lastClickEvent.clientY;if(j>h&&j<i&&k>f&&k<g)return d=!0,!1}}),d}b.contextMenu={drawMenu:c,removeContextMenu:n,setupMenuEvent:k}}(jQuery,app),function(a,b){function c(a){try{var b=a.toString().match(/(\d\d):(\d\d):(\d\d\.\d\d\d)/);return 3600*parseInt(b[1],10)+60*parseInt(b[2],10)+parseFloat(b[3])}catch(a){return null}}function d(c){var d,e,f;"string"!=typeof c?(c=a(c),d=c.data("pid"),e=b.getVerseNumberFromIDAttribute(c.attr("id"))):(d=b.getParagraphIDFromIDAttribute(c),e=b.getVerseNumberFromIDAttribute(c)),f=d||e,f=parseInt(f,10);var g;return b.audioMarkers&&a.isNumeric(f)&&(g=a.grep(b.audioMarkerData.markers,function(a,b){return a.mepsParagraphId===f||a.verseNumber===f})),g&&g.length>0?g[0]:null}function e(){var b=a(".currentMarker");return b.removeClass("currentMarker"),b}function f(a){h(j(a),a)}function g(a){h(k(a),a)}function h(c,d){if(c!==b.media.lastSelector&&!a("html, body").is(":animated")&&(isNaN(parseFloat(b.media.lastSelector))||parseFloat(b.media.lastSelector)<d)){var f=e(),g=a(c);g.addClass("currentMarker"),b.media.lastSelector=c,g.length>0&&i(f,g)}}function i(c,d){if(0===a("#contextMenu").length&&(c.get().reduce(function(a,c){return a+b.layout.pixelsScrolledIntoView(c)},0)===c.get().reduce(function(b,c){return b+a(c).height()},0)||b.mediaMarker.autoScrollEnabled)){var e=d[0],f=b.layout.pixelsScrolledIntoView(e),g=e.getBoundingClientRect().height,h=d[d.length-1],i=b.layout.pixelsScrolledIntoView(h),j=h.getBoundingClientRect().height;if(f<g||i<j){var k=a(window).scrollTop()-a("#regionHeader").outerHeight()+e.getBoundingClientRect().top;a("html, body").animate({scrollTop:k},function(){b.mediaMarker.autoScrollEnabled=!0})}}}function j(c){var d=null,e=b.isBibleDocument()?"bible":"publication";return a.each(b.video.videoMarkers,function(a){var f=b.video.videoMarkers[a].startTime,g=f+b.video.videoMarkers[a].duration;if(f<=c&&c<=g)return"bible"===e?d=sprintf("#content [id^=v%s-%s-%s-]",b.getBookNumber(),b.video.videoMarkers[a].chapter,b.video.videoMarkers[a].verse):"publication"===e&&(d=sprintf("#content [data-pid='%s']",b.video.videoMarkers[a].paragraph)),!1}),d}function k(d){var e=null,f=b.audioMarkerData.type;return a.each(b.audioMarkerData.markers,function(a){var g=c(this.startTime),h=g+c(this.duration);if(g<=d&&d<=h)return"bible"===f?e=sprintf("#content [id^=v%s-%s-%s-]",b.audioMarkerData.bibleBookNumber,b.audioMarkerData.bibleBookChapter,this.verseNumber):"publication"===f&&(e=sprintf("#content [data-pid='%s']",this.mepsParagraphId)),!1}),e}function l(a){var e,f,g,h=0;b.media.showAudioPlayer();var i=d(b.utilities.getFirstActionableIdInScope(!1,a));if(i&&void 0!==r){e=i.startTime,f=c(e),a.each(function(a){var b=d(this);b&&(h+=c(b.duration))}),clearTimeout(q);var j;if(b.iOS||void 0===s)j=function(){q=setTimeout(function(){},1e3*h)},!t&&isNaN(r.duration)?(r.play(),r.pause(),r.addEventListener("canplay",function(a){a.target.removeEventListener(a.type,arguments.callee),r.addEventListener("progress",function(a){a.target.removeEventListener(a.type,arguments.callee),r.currentTime=f,r.addEventListener("seeked",function(a){a.target.removeEventListener(a.type,arguments.callee),r.play(),t=!0,j()})})})):(r.setCurrentTime(f),g=window.setInterval(function(){r.currentTime===f?(r.play(),window.clearInterval(g)):r.setCurrentTime(f)},100),j());else if(j=function(){clearTimeout(q),q=setTimeout(function(){},1e3*h)},t)s.setCurrentTime(f),g=window.setInterval(function(){r.currentTime===f?(s.play(),window.clearInterval(g)):s.setCurrentTime(f)},100),j();else{s.play();var k=function a(b){b.target.removeEventListener(b.type,a),s.setCurrentTime(f),s.play(),t=!0,j()};b.WindowsPhone?s.media.addEventListener("progress",k):(s.media.addEventListener("loadeddata",k),s.media.addEventListener("playing",function a(b){b.target.removeEventListener(b.type,a),s.media.addEventListener("timeupdate",k)}))}}}function m(){r=document.getElementById("wolplayer"),s=r.player,b.audioMarkers&&(b.iOS?(r.addEventListener("timeupdate",function(a){g(a.target.currentTime)}),r.addEventListener("pause",n)):(s.media.addEventListener("timeupdate",function(a){g(a.target.currentTime)}),s.media.addEventListener("pause",n)))}function n(c){b.contextMenu.setupMenuEvent(c),a("html, body").stop(!0,!1),e()}function o(a){l(a)}function p(){b.iOS?(r.pause(),r.setCurrentTime(0)):(s.pause(),s.setCurrentTime(0)),e()}var q,r,s,t=(a("audio"),!1);b.mediaMarker={initAudioMarkers:m,getMarker:d,clearMarkers:e,playSelected:o,stop:p,updateVideoPosition:f,autoScrollEnabled:!1,getSelectorFromVideoMarkerTimecode:j}}(jQuery,app),function(a,b){"use strict";function c(){var c="h="+URI().fragment(!0).h,d=b.highlightManager.getHighlightUrlFragment(c.length>2);if(!c.startsWith(d)){var e=window.location.href;a("[id]").each(function(a,b){e=l(b.id,e,!0,!0)}),e=k("h",e,!0,!0),e=k("v",e,!0,!0),d=b.highlightManager.getHighlightUrlFragment(),d=null!=d?d.split("=",2):["",""];var g=d[0],h=d[1]||"";f(e,g,h,!0,!1)}}function d(){var a=window.location.href;a=k("s",a,!0,!0);var c=b.studyPane.getSelectionUrlFragment();c=null!=c?c.split("=",2):["",""],f(a,c[0],c[1]||"",!0,!1)}function e(){var a=window.location.href;a=k("study",a,!0,!0);var c=b.studyPane.getNavigationTabFragment();c=null!=c?c.split("=",2):["",""],f(a,c[0],c[1]||"",!0,!1)}function f(a,b,c,d,e){var f=i(a);return f[b]=c,j(f,a,d,e)}function g(a){var b=/(\d+):*(\d*)-*(\d*):*(\d*)/.exec(URI().fragment(!0).h);if(b){var c={stPar:parseInt(b[1],10),stOff:parseInt(b[2],10),edPar:parseInt(b[3],10),edOff:parseInt(b[4],10)};return isNaN(c.stOff)&&(c.stOff=0),isNaN(c.edPar)?(c.edPar=c.stPar+1,c.edOff=0):isNaN(c.edOff)&&(c.edPar+=1,c.edOff=0),c}return null}function h(a,c,d){var e=new Date(a.getTime()+864e5*c),f=b.getUILanguage(),g=b.getRsConfigSymbol(),h=b.getLibrarySymbol(),i=null;return a.getHours()!==e.getHours()&&(e=new Date(e.getTime()+36e5)),d?g&&h&&(i=sprintf("/wol/dt/%s/%s/%d/%d/%d",g,h,e.getFullYear(),e.getMonth()+1,e.getDate())):f&&g&&h&&(i=sprintf("/%s/wol/dt/%s/%s/%d/%d/%d",f,g,h,e.getFullYear(),e.getMonth()+1,e.getDate())),i}function i(a){a||(a=window.location.href);var b=URI(a).fragment(),c={};return b.length>0&&b.split("&").forEach(function(a){a=a.split("="),c[a[0]]=a[1]||""}),c}function j(a,b,c,d){b||(b=window.location.href);var e=Object.keys(a).sort().reduce(function(b,c){return c.length>0?b+"&"+c+(a[c].length>0?"="+a[c]:""):b},"#");e=e.replace(/#&/,"#"),e=e.replace(/#$/,"");var f=b.split("#",1)[0];return f+=e,!d&&!0!==d&&Modernizr.history&&history.replaceState(null,window.location.title,f),!c&&!0!==c&&Modernizr.history&&history.pushState(null,window.location.title,f),f}function k(a,b,c,d){var e=i(b);return delete e[a],j(e,b,c,d)}function l(a,b,c,d){return b||(b=window.location.href),a===URI(b).fragment()?j({},b,c,d):b}function m(){var c=URI(),d="";c.hasFragment("h")&&(d=c.fragment(),n(c)&&!b.isDocument()&&a.each(a(".resultsNavDocumentLink a"),function(){this.href=this.href.split("#")[0]+"#"+d}),a.each(a(".verse a"),function(){a(this).click(function(){d=c.fragment(),n(c)&&a.each(a(".resultsNavDocumentLink"),function(a,b){b&&b.href&&(d="#"+c.fragment(),b.href=b.href.replace(d,""))})})}))}function n(b){var c=!1,d=[],e=b.fragment(!0).h,f=e.split("-");if(f.length>0&&a.each(f,function(b,e){var f=e.split(":");d.push(parseInt(f[0],10));var g="#p"+f[0];a(g).length>0&&(c=!0)}),!c){var g=a("#article").find("[data-pid]").filter(":first").data("pid"),h=a("#article").find("[data-pid]").filter(":last").data("pid");d[0]<g&&d[1]>h&&(c=!0)}return c}function o(){a(".resultNavLeft .disabled, .resultNavRight .disabled").find("a").on("click",function(a){a.preventDefault()})}b.url={matchUrlToHighlight:c,getHighlightTextRangeFromUrl:g,makeDateDataUrl:h,removeUrlFragmentByKey:k,setFragmentToPropagate:m,disableDisabledNextPrevButtons:o,matchUrlToSelection:d,matchUrlToStudyPane:e}}(jQuery,app),function(a,b){"use strict";function c(c){var d=c.target.location;if(URI(d).directory()===URI().directory()){var e=b.url.getHighlightTextRangeFromUrl(d);e&&a("#article").find("[data-pid="+e.stPar+"]").length>0&&(b.highlightManager.removeHighlight(!0),b.highlightManager.highlightParagraphTextRange(e.stPar,e.stOff,e.edPar,e.edOff),b.jumpHighlight.jumpToMarkOrHighlight())}}function d(){var a=b.url.getHighlightTextRangeFromUrl();a?(b.highlightManager.highlightParagraphTextRange(a.stPar,a.stOff,a.edPar,a.edOff),b.highlightManager.getFirstHighlightedId()||b.url.removeUrlFragmentByKey("h",null,!0,!1)):b.url.removeUrlFragmentByKey("h",null,!0,!1);var c=window.location.hash;if(c.length>0){var d=b.getVerseNumberFromIDAttribute(c);d&&b.highlightManager.highlightBibleVerseAsync(d,h)}var e=b.utilities.getFirstIdMatchingVerseNumber(URI().fragment(!0).v);e.length>0?(b.highlightManager.highlight(e),b.highlightManager.getFirstHighlightedId()||b.url.removeUrlFragmentByKey("v",null,!0,!1)):b.url.removeUrlFragmentByKey("v",null,!0,!1)}function e(c){var d=!navigator.userAgent.match(/IEMobile/);c.jumpTo(b.utilities.getContentAreaMargins(),d);var e=a("#study");if(e.length>0&&e.is(":visible")){var f=b.highlightManager.getFirstHighlightedId();if(b.getVerseNumberFromIDAttribute(f)){var g=b.studyPane.createSectionKeyFromVerseKey(f),h=a("[data-key="+g+"]");h.length>0&&h.scrollToTop({duration:250,easing:"easeOutExpo",topOffset:-b.studyPane.getStudyPaneScrollOffset()})}}}function f(){var b=window.location.hash;try{return!!(b.length>0&&a("#article").find(b.substr(1)))&&(e(a("#article").find(b.substr(1))),!0)}catch(a){return!1}}function g(){var c=a(".hl, .mk, .mkhl");return"s"!==b.getCommand()&&c.length>0&&(e(c),!0)}function h(){return f()||g()||b.studyPane.jumpToSelectedVerse()}function i(){var a=window.location.hash,b=URI();return!!(a.length>0&&(b.hasFragment("h")||b.hasFragment("v")||b.hasFragment("p")||document.getElementById(a.substr(1))))}function j(c){var d,e;e=c?c.target.hash:window.location.hash;try{d=a(e)}catch(a){}return d&&d.length>0?d.jumpTo(b.utilities.getContentAreaMargins(),!0):g()}b.jumpHighlight={internalLinkHandler:c,highlightUrlFragment:d,hasHashJump:i,jumpToMarkOrHighlight:g,hashJump:j,jumpToElement:e,initialJump:h}}(jQuery,app),function(a,b){function c(c){c=a(c),c.addClass(T),b.url.matchUrlToSelection()}function d(){return a("#article").find("."+T).first()}function e(){d().closest(".v").scrollIntoView()}function f(){a("span.tt."+T).removeClass(T),b.url.matchUrlToSelection()}function g(){a("#study").find("."+T).removeClass(T)}function h(b){f(),c(b);B(a(b).closest("[id]")[0].id,!1)}function i(){return b.layout.toggleStudyPane(!0),h(this),F(S)||(a(".tabItem.parallel").not(".active").addClass("flash"),setTimeout(function(){a(".tabItem.parallel").removeClass("flash")},2e3)),!1}function j(){b.layout.toggleStudyPane(!0),f(),B(a(this)[0].id,!1),F(S)}function k(c){b.layout.toggleStudyPane(!0),K(S),c.preventDefault(),f();var d=a(this);return d.addClass(T),A("verseFootnote-"+d.parent().data("fnid")),!1}function l(c){b.layout.toggleStudyPane(!0),K(S),c.preventDefault(),f();var d=a(this);return d.addClass(T),w("verseMarginal-"+d.parent().data("bid").split("-")[0]),!1}function m(){f();var b=a(this),d="#v"+b.data("key")+"-1";c(a(".bible").find(d).find(".tt").first());B(d,!1),e()}function n(){if(!a(this).hasClass("populated")){var b=a(this).data("extract-id");return u(b),w(b),!1}}function o(){var b=a(this).data("extract-id");v(b),A(b)}function p(){return a("#regionHeader").height()}function q(){return parseFloat(a(".navigationTabsContainer").css("border-bottom-width"))}function r(){var c=a("span.tt.vl."+T).closest("[id]");if(c.length>0){return"s="+b.getVerseNumberFromIDAttribute(c.attr("id"))}return null}function s(){var a=b.utilities.getFirstIdMatchingVerseNumber(URI().fragment(!0).s);f(),a.length>0&&h(a.first().find("span.tt.vl"))}function t(){var a=URI().fragment(!0).study;(a=V[a])&&(K(a),b.layout.toggleStudyPane(!0))}function u(b){f();var c=b.split("-")[1],d=a("#article").find('a[data-bid="'+c+'-1"]');d.length&&(d.closest("[id]").scrollToTop({duration:250,easing:"easeOutExpo",topOffset:p()}),d.find(".tt").addClass(T,100,"easeOutElastic"))}function v(b){f();var c=b.split("-")[1],d=a('a[data-fnid="'+c+'"]');d.length&&(d.scrollToTop({duration:250,easing:"easeOutExpo",topOffset:p()}),d.find(".tt").addClass(T,100,"easeOutElastic"))}function w(b){g();var c=a(y(b)),d=a(c).data("src")+"?snip=yes";c.removeClass(U),c.addClass(T),c.parent().parent().scrollToTop({duration:250,easing:"easeOutExpo",topOffset:-q()}),z(b,"loading").show(250,"easeOutExpo"),z(b,"extract").empty().addClass(T),a.ajax(d).done(function(a){x(b,a)})}function x(c,d){y(c).addClass("populated"),z(c,"loading").hide();var e=a("[data-extract-target-id='"+c+"'].extract");e.append(d).show(),b.setupTooltip(e)}function y(b){return a("[data-extract-id='"+b+"']")}function z(b,c){return a("[data-extract-target-id='"+b+"']."+c)}function A(b){a("#study").find("li.selected").removeClass(T);var c=a(y(b));c.addClass(T),c.parent().parent().scrollToTop({duration:250,easing:"easeOutExpo",topOffset:-q()})}function B(a,b){var c=H(a);g(),b&&K(S),E(S,c),C(c)}function C(c){if(c&&c.length>0){var d=a("#studyParallel");d.find(".helpText").hide(),d.find(".extract").empty(),d.find(".loading").show(250,"easeOutExpo");var e=c.split("-"),f=e[0],g=e[1],h=e[2],i=b.getContentRsConfigSymbol(),j=b.getContentLibrarySymbol(),k=b.getPubSym(),l=b.getContentLibraryLanguageSymbol(),m=b.getPubYear(),n=b.getContentUILanguage(),o=sprintf("/%s/wol/parallel/%s/%s/%s/%s/%s/%s/%s/%s?snip=yes",n,i,j,k,l,m,f,g,h);a.ajax(o).done(function(a){D(a)})}}function D(c){var d=a("#studyParallel");d.find(".loading").hide(),d.find(".extract").append(c),b.setupTooltip(a(".extract"))}function E(b,c){var d=a(G(b,c));a(G(b,null)).removeClass(T),d.addClass(T).find(".group.collapsible").removeClass(U)}function F(b){var c=a(G(b)+"."+T);return c.length>0&&(c.each(function(b,c){a(c).scrollIntoView()}),!0)}function G(a,b){return null!=b&&b.length>0?"#"+a+" .section[data-key="+b+"]":"#"+a+" .section"}function H(a){var b=a.split(/[v,-]/);return b.shift(),b.pop(),b.join("-")}function I(){var b=a(this).parent(),c=!b.hasClass(U);b.toggleClass(U,c,250,"easeOutExpo")}function J(){a(this).toggleClass(U,250,"easeOutExpo"),a(this).hasClass("populated")||a(this).find("a.title").click()}function K(c){b.tabs.activateContent(a(".navigationTabs [data-related-content="+c+"]"))}function L(a){for(var b=Object.keys(V),c=0;c<b.length;c++)if(V[b[c]]===a)return b[c]}function M(){var b=a(".showStudy .navigationTabs [data-related-content].active");return b.length>0?"study="+L(b.data("relatedContent")):null}function N(){return d().length>0&&(F(S),e(),!0)}function O(){var b=a("#article.bible");b.find(".cl, .vl").on("click",i),b.find(".fn").on("click",k),b.find(".m").on("click",l)}function P(){var c=a("#study");c.find(".group.collapsible .header").on("click",I),c.find(".item.collapsible").on("click",J),c.find("div.overview.chapterOnly").on("click",function(){a(this).toggleClass("expanded",250,"easeOutExpo")}),c.find("div.overview.chapterOnly a").on("click",function(a){a.stopPropagation()}),c.find(".marginalExpander").each(function(){a(this).on("click",n)}),c.find("li.footnote").on("click",o),c.find("a.galleryItem").on("click",b.gallery.handleGalleryItem),a("#studyDiscover").find(".section").on("click",m)}function Q(){var b=a("#article.bible");b.find(".cl").each(function(){a(this).append('<span class="tt cl"></span>')}),b.find(".vl").each(function(){a(this).append('<span class="tt vl"></span>')}),b.find("a.fn").each(function(){a(this).append('<span class="tt fn"></span>')}),b.find("a.b").each(function(){a(this).append('<span class="tt m"></span>')})}function R(){Q(),O(),P()}var S="studyDiscover",T="selected",U="collapsed",V={discover:"studyDiscover",parallel:"studyParallel",marginal:"studyMarginals"};b.studyPane={init:R,wireHandlers:O,wireStudyPaneHandlers:O,handleVerseSelect:j,createSectionKeyFromVerseKey:H,getStudyPaneScrollOffset:q,getSelectionUrlFragment:r,processSelectUrlFragment:s,getNavigationTabFragment:M,jumpToSelectedVerse:N,processStudyUrlFragment:t}}(jQuery,app),function(a,b){function c(c,d){var c=a(c),f=c.find("img").data("src"),g=c.find("a").attr("href"),h=a(".itemContainer");return k(!0),h.addClass("faded"),a.ajax(f).done(function(c){h.html(c).removeClass("faded").show(250,"easeOutExpo",function(){var c=a(".gallerySelectedItem");b.video.setupEmbeddedVideoPlayer(c)}),k(!1),b.setupTooltip(h),e(d,!d),b.utilities.isGalleryNav()&&Modernizr.history&&window.history.pushState(null,"",g)}),!1}function d(){s(),g()}function e(b,c){a("#galleryModal")&&(i(),j(),k(!1),b&&h(),c&&l())}function f(){window.onpopstate=function(b){if("gallery"===URI().segment(2)&&Modernizr.history){var d=a(".carouselItems .tile"),e=d.find('a[href="'+document.location.pathname+'"]');if(e[0]){return c(e[0].parentElement,!0)}}}}function g(){var d=a(".carouselItems .tile");d.on("click",function(){return d.find(".jwplayer").each(function(a,c){b.video.destroyPlayers(c.id)}),c(this,!0)})}function h(){a(".mediaCaption").addClass("hidden"),a(".mediaContent").imagesLoaded().then(function(){
a(".mediaCaption").removeClass("hidden");var c=a(".mediaContent img"),d=b.images.setupLightboxItems(c);a(c).on("click",this,function(){b.images.callLightbox(this,d)}).css("cursor","pointer")})}function i(){a(".gallerySelectedItem").find(".mediaCaption").find("a.b.citationWithMedia").each(function(b,c){a(c).prepend('<span class="icon"></span>'),c.href=c.href+"/media"})}function j(){var b=a(".gallerySelectedItem").data("mmidx"),c=a(".carouselItems");c.find(".selected").removeClass("selected"),c.find("[data-mmidx='"+b+"']").addClass("selected").scrollIntoView()}function k(b){var c=a("#galleryModal").find(".loading");b?c.removeClass("hidden"):c.addClass("hidden")}function l(){a("#galleryModal").find(".closeBtn").on("click",p)}function m(c){var d=this.href,e=d+"?snip=yes";return q(),a.ajax(e).done(function(c){n(c);var e=a(".gallerySelectedItem");b.video.setupEmbeddedVideoPlayer(e),b.setupTooltip(e),g(),b.gallery.setupGalleryMediaReload(),b.gallery.initGalleryItem(!0,!0),b.utilities.isGalleryNav()&&Modernizr.history&&(window.history.pushState(null,"",d),window.scroll(0,0))}),c.preventDefault(),!1}function n(b){a("#galleryModal").find(".contents").append(b)}function o(){var b=a("#galleryModalContainer");a("body").addClass("noscroll"),a("#galleryModal").find(".contents").on("click",function(){return!1}),b.on("click",p),b.fadeIn(250)}function p(){var c=a("#galleryModalContainer");if(c.find("#galleryModal").hasClass("hiding"))return!1;if(a("#galleryModal").find(".closeBtn").unbind("click"),r(),a("body").removeClass("noscroll"),c.fadeOut(100),c.off("click",p),b.utilities.isGalleryNav())if(t)window.history.back();else{var d=window.location.href.split("/");d.pop();var e=d.join("/");window.history.replaceState(null,"",e)}}function q(){var b=a("#galleryModal");b.find(".contents").empty(),b.find(".loading").removeClass("hidden"),o(),b.show()}function r(){var c=a("#galleryModal");c.addClass("hiding"),c.fadeOut(100,function(){c.removeClass("hiding"),c.find(".jwplayer").each(function(a,c){b.video.destroyPlayers(c.id)})})}function s(){a(".gallery").find("a.galleryItem").on("click",b.gallery.handleGalleryItem)}var t=!1;b.gallery={setupGalleryMediaReload:f,scrollCarouselIntoView:j,initGallery:d,initGalleryItem:e,handleGalleryItem:m}}(jQuery,app),function(a,b){"use strict";function c(a){var b=!1,c=a;if("string"!=typeof c)return!1;do{a=c,b|=function(a){var b=/(&#x0*3(c|e))|(&#0*6(0|2))|(\\u003(c|e))/i;return-1!==a.indexOf("<")||-1!==a.indexOf(">")||b.test(a)}(a),c=decodeURIComponent(a)}while(a!==c);return!b}function d(a){return/^[\w\-]{2,10}$/.test(a)}function e(a){return/^[\w\-]{2,10}$/.test(a)}function f(a){return/^[\w\-]{2,10}$/.test(a)}b.validator={containsNoTags:c,isValidLocale:d,isValidRsconf:e,isValidLib:f}}(jQuery,app),Handlebars.registerHelper("getUrl",function(a,b,c){"use strict";var d=URI().query(!0).url;return d&&d.length>0?new Handlebars.SafeString(d.replaceToken("locale",a).replaceToken("rsconf",b).replaceToken("library",c)):""}),Handlebars.registerHelper("getLocale",function(){"use strict";return app.getUILanguage()}),Handlebars.registerHelper("getRsconf",function(){"use strict";return app.getRsConfigSymbol()}),Handlebars.registerHelper("getLib",function(){"use strict";return app.getLibrarySymbol()}),Handlebars.registerHelper("toLower",function(a){"use strict";return a.toLowerCase()}),Handlebars.registerHelper("isNotCurrentRsconfLib",function(a,b){"use strict";return app.getRsConfigSymbol()!=="r"+a&&app.getLibrarySymbol()!==b}),Handlebars.registerHelper("getValueByPath",function(){"use strict";for(var a=arguments[arguments.length-1],b=a.data.root,c=0;c<arguments.length-1;c++)try{b=b[arguments[c]]}catch(a){return null}return b}),Handlebars.registerHelper({isArray:function(a){"use strict";return Array.isArray(a)},isBoolean:function(a){"use strict";return"boolean"==typeof a},isString:function(a){"use strict";return"string"==typeof a}}),Handlebars.registerHelper({add:function(){"use strict";for(var a=0,b=arguments.length;b--;)"number"==typeof arguments[b]&&(a+=arguments[b]);return a},subtract:function(){"use strict";for(var a=0,b=arguments.length;b--;)"number"==typeof arguments[b]&&(a-=arguments[b]);return a},multiply:function(){"use strict";for(var a=0,b=arguments.length;b--;)"number"==typeof arguments[b]&&(a*=arguments[b]);return a},divide:function(){"use strict";for(var a=0,b=arguments.length;b--;)"number"==typeof arguments[b]&&(a/=arguments[b]);return a},modulus:function(){"use strict";for(var a=0,b=arguments.length;b--;)"number"==typeof arguments[b]&&(a%=arguments[b]);return a}}),Handlebars.registerHelper({eq:function(a,b){"use strict";return a===b},ne:function(a,b){"use strict";return a!==b},lt:function(a,b){"use strict";return a<b},gt:function(a,b){"use strict";return a>b},lte:function(a,b){"use strict";return a<=b},gte:function(a,b){"use strict";return a>=b},and:function(a,b){"use strict";return a&&b},or:function(a,b){"use strict";return a||b},not:function(a){"use strict";return!a}}),this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.LibraryInfo=Handlebars.template({1:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{},j=c.helperMissing,k=a.escapeExpression;return'\t<li role="row" data-lang="'+k((c.toLower||b&&b.toLower||j).call(i,null!=b?b.englishName:b,{name:"toLower",hash:{},data:e}))+" "+k((c.toLower||b&&b.toLower||j).call(i,null!=b?b.asciiEnglishName:b,{name:"toLower",hash:{},data:e}))+" "+k((c.toLower||b&&b.toLower||j).call(i,null!=b?b.vernacularName:b,{name:"toLower",hash:{},data:e}))+" "+k((c.toLower||b&&b.toLower||j).call(i,null!=b?b.asciiVernacularName:b,{name:"toLower",hash:{},data:e}))+'">\n'+(null!=(h=c.each.call(i,null!=b?b.libs:b,{name:"each",hash:{},fn:a.program(2,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\t</li>\n"},2:function(a,b,c,d,e,f,g){var h,i,j=a.lambda,k=a.escapeExpression,l=null!=b?b:a.nullContext||{},m=c.helperMissing,n="function";return'\t\t\t<a href="'+k(j(null!=g[1]?g[1].appRoot:g[1],b))+k(j(null!=g[1]?g[1].locale:g[1],b))+"/wol/pref/"+k((i=null!=(i=c.researchConfigurationID||(null!=b?b.researchConfigurationID:b))?i:m,typeof i===n?i.call(l,{name:"researchConfigurationID",hash:{},data:e}):i))+"/"+k((i=null!=(i=c.symbol||(null!=b?b.symbol:b))?i:m,typeof i===n?i.call(l,{name:"symbol",hash:{},data:e}):i))+"?newrsconf="+k((i=null!=(i=c.researchConfigurationID||(null!=b?b.researchConfigurationID:b))?i:m,typeof i===n?i.call(l,{name:"researchConfigurationID",hash:{},data:e}):i))+"&newlib="+k((i=null!=(i=c.symbol||(null!=b?b.symbol:b))?i:m,typeof i===n?i.call(l,{name:"symbol",hash:{},data:e}):i))+"&url="+k((c.getUrl||b&&b.getUrl||m).call(l,null!=g[1]?g[1].locale:g[1],null!=b?b.researchConfigurationID:b,null!=b?b.symbol:b,{name:"getUrl",hash:{},data:e}))+'" data-rsconf="'+k((i=null!=(i=c.researchConfigurationID||(null!=b?b.researchConfigurationID:b))?i:m,typeof i===n?i.call(l,{name:"researchConfigurationID",hash:{},data:e}):i))+'" data-lib="'+k((i=null!=(i=c.symbol||(null!=b?b.symbol:b))?i:m,typeof i===n?i.call(l,{name:"symbol",hash:{},data:e}):i))+'" data-locale="'+k(j(null!=g[1]?g[1].locale:g[1],b))+'" data-lang="'+k(j(null!=g[1]?g[1].vernacularName:g[1],b))+'" data-meps-symbol="'+k(j(null!=g[1]?g[1].mepsSymbol:g[1],b))+'" data-meps-script="'+k(j(null!=g[1]?g[1].mepsScript:g[1],b))+'" data-dir="'+k(j(null!=g[1]?g[1].direction:g[1],b))+'">\n\t\t\t\t<ul>\n\t\t\t\t\t<li class="language'+(null!=(h=c.if.call(l,null!=g[1]?g[1].isSignLanguage:g[1],{name:"if",hash:{},fn:a.program(3,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'">\n                            <span class="meps-script-ROMAN meps-lang-E" dir="ltr" data-lang="E" lang="en">\n                                <span class="icon"></span>\n                                <span>'+k(j(null!=g[1]?g[1].englishName:g[1],b))+'</span>\n                            </span>\n\t\t\t\t\t\t<span>&nbsp;-&nbsp;</span>\n                            <span class="'+k(j(null!=g[1]?g[1].libLangClasses:g[1],b))+'" '+(null!=(h=j(null!=g[1]?g[1].libLangAttributes:g[1],b))?h:"")+">\n                                <span>"+k(j(null!=g[1]?g[1].vernacularName:g[1],b))+"</span>\n                            </span>\n"+(null!=(h=c.if.call(l,null!=b?b.uitransBlessStatus:b,{name:"if",hash:{},fn:a.program(5,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'\t\t\t\t\t</li>\n\t\t\t\t\t<li class="library">\n                        <span class="'+k(j(null!=g[1]?g[1].libLangClasses:g[1],b))+'" '+(null!=(h=j(null!=g[1]?g[1].libLangAttributes:g[1],b))?h:"")+">"+k((i=null!=(i=c.title||(null!=b?b.title:b))?i:m,typeof i===n?i.call(l,{name:"title",hash:{},data:e}):i))+"</span>\n"+(null!=(h=c.if.call(l,null!=b?b.indexedTimeStamp:b,{name:"if",hash:{},fn:a.program(7,e,0,f,g),inverse:a.noop,data:e}))?h:"")+(null!=(h=c.if.call(l,null!=b?b.libraryBlessStatus:b,{name:"if",hash:{},fn:a.program(9,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</a>\n"},3:function(a,b,c,d,e){return" signLanguage"},5:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'\t\t\t\t\t\t\t<div class="blessContainer '+i((f=null!=(f=c.uitransBlessStatusCssClass||(null!=b?b.uitransBlessStatusCssClass:b))?f:h,"function"==typeof f?f.call(g,{name:"uitransBlessStatusCssClass",hash:{},data:e}):f))+'">\n                                <span class="blessedStatus meps-script-ROMAN meps-lang-E" dir="ltr" data-lang="E" lang="en">\n                                    <span class="status '+i((f=null!=(f=c.uitransBlessStatus||(null!=b?b.uitransBlessStatus:b))?f:h,"function"==typeof f?f.call(g,{name:"uitransBlessStatus",hash:{},data:e}):f))+'">UI: '+i((f=null!=(f=c.uitransBlessStatusDisplayWebMessage||(null!=b?b.uitransBlessStatusDisplayWebMessage:b))?f:h,"function"==typeof f?f.call(g,{name:"uitransBlessStatusDisplayWebMessage",hash:{},data:e}):f))+'</span>\n                                    <span class="date">'+i((f=null!=(f=c.uitransModifiedDate||(null!=b?b.uitransModifiedDate:b))?f:h,"function"==typeof f?f.call(g,{name:"uitransModifiedDate",hash:{},data:e}):f))+" UTC</span>\n                                </span>\n\t\t\t\t\t\t\t</div>\n"},7:function(a,b,c,d,e){var f;return'\t\t\t\t\t\t\t<span class="details">Indexed '+a.escapeExpression((f=null!=(f=c.indexedTimeStamp||(null!=b?b.indexedTimeStamp:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"indexedTimeStamp",hash:{},data:e}):f))+" UTC</span>\n"},9:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=c.helperMissing,j=a.escapeExpression;return'                                <div class="blessContainer '+j((g=null!=(g=c.libraryBlessStatusCssClass||(null!=b?b.libraryBlessStatusCssClass:b))?g:i,"function"==typeof g?g.call(h,{name:"libraryBlessStatusCssClass",hash:{},data:e}):g))+'">\n                                    <span class="blessedStatus meps-script-ROMAN meps-lang-E" dir="ltr" data-lang="E" lang="en">\n                                        <span class="status"> Lib: '+j((g=null!=(g=c.libraryBlessStatusDisplayWebMessage||(null!=b?b.libraryBlessStatusDisplayWebMessage:b))?g:i,"function"==typeof g?g.call(h,{name:"libraryBlessStatusDisplayWebMessage",hash:{},data:e}):g))+"</span>\n"+(null!=(f=c.if.call(h,(c.not||b&&b.not||i).call(h,null!=b?b.libraryIsOnHold:b,{name:"not",hash:{},data:e}),{name:"if",hash:{},fn:a.program(10,e,0),inverse:a.noop,data:e}))?f:"")+(null!=(f=c.if.call(h,(c.and||b&&b.and||i).call(h,null!=b?b.libraryIsOnHold:b,null!=b?b.libraryDisplayHoldDate:b,{name:"and",hash:{},data:e}),{name:"if",hash:{},fn:a.program(12,e,0),inverse:a.noop,data:e}))?f:"")+"                                    </span>\n                                </div>\n"},10:function(a,b,c,d,e){var f;return'                                            <span class="date">'+a.escapeExpression((f=null!=(f=c.libraryModifiedDate||(null!=b?b.libraryModifiedDate:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"libraryModifiedDate",hash:{},data:e}):f))+" UTC</span>\n"},12:function(a,b,c,d,e){var f;return'\t\t\t\t\t\t                    <span class="date">'+a.escapeExpression((f=null!=(f=c.libraryHoldDate||(null!=b?b.libraryHoldDate:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"libraryHoldDate",hash:{},data:e}):f))+" UTC</span>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h;return null!=(h=c.each.call(null!=b?b:a.nullContext||{},null!=b?b.items:b,{name:"each",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:""},useData:!0,useDepths:!0}),this.Handlebars.templates.LibraryName=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=c.helperMissing,j="function",k=a.escapeExpression;return'<a class="library '+k((g=null!=(g=c.localizationCssClasses||(null!=b?b.localizationCssClasses:b))?g:i,typeof g===j?g.call(h,{name:"localizationCssClasses",hash:{},data:e}):g))+'" '+(null!=(g=null!=(g=c.localizationHtmlAttributes||(null!=b?b.localizationHtmlAttributes:b))?g:i,f=typeof g===j?g.call(h,{name:"localizationHtmlAttributes",hash:{},data:e}):g)?f:"")+' href="/'+k((g=null!=(g=c.locale||(null!=b?b.locale:b))?g:i,typeof g===j?g.call(h,{name:"locale",hash:{},data:e}):g))+"/wol/"+k((g=null!=(g=c.route||(null!=b?b.route:b))?g:i,typeof g===j?g.call(h,{name:"route",hash:{},data:e}):g))+"/"+k((g=null!=(g=c.rsconf||(null!=b?b.rsconf:b))?g:i,typeof g===j?g.call(h,{name:"rsconf",hash:{},data:e}):g))+"/"+k((g=null!=(g=c.lib||(null!=b?b.lib:b))?g:i,typeof g===j?g.call(h,{name:"lib",hash:{},data:e}):g))+k((g=null!=(g=c.queryString||(null!=b?b.queryString:b))?g:i,typeof g===j?g.call(h,{name:"queryString",hash:{},data:e}):g))+'">'+k((g=null!=(g=c.libraryName||(null!=b?b.libraryName:b))?g:i,typeof g===j?g.call(h,{name:"libraryName",hash:{},data:e}):g))+"</a>\n"},useData:!0}),this.Handlebars.templates.SynchronizeSelection=Handlebars.template({1:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{},j=c.helperMissing,k=a.escapeExpression;return'\t<li role="row" data-lang="'+k((c.toLower||b&&b.toLower||j).call(i,null!=b?b.englishName:b,{name:"toLower",hash:{},data:e}))+" "+k((c.toLower||b&&b.toLower||j).call(i,null!=b?b.asciiEnglishName:b,{name:"toLower",hash:{},data:e}))+" "+k((c.toLower||b&&b.toLower||j).call(i,null!=b?b.vernacularName:b,{name:"toLower",hash:{},data:e}))+" "+k((c.toLower||b&&b.toLower||j).call(i,null!=b?b.asciiVernacularName:b,{name:"toLower",hash:{},data:e}))+'">\n'+(null!=(h=c.each.call(i,null!=b?b.libs:b,{name:"each",hash:{},fn:a.program(2,e,0,f,g),inverse:a.noop,data:e}))?h:"")+"\t</li>\n"},2:function(a,b,c,d,e,f,g){var h,i=null!=b?b:a.nullContext||{};return null!=(h=c.if.call(i,(c.isNotCurrentRsconfLib||b&&b.isNotCurrentRsconfLib||c.helperMissing).call(i,null!=b?b.researchConfigurationID:b,null!=b?b.symbol:b,{name:"isNotCurrentRsconfLib",hash:{},data:e}),{name:"if",hash:{},fn:a.program(3,e,0,f,g),inverse:a.noop,data:e}))?h:""},3:function(a,b,c,d,e,f,g){var h,i,j=a.lambda,k=a.escapeExpression,l=null!=b?b:a.nullContext||{},m=c.helperMissing,n="function";return'\t\t\t\t<a href="'+k(j(null!=g[1]?g[1].appRoot:g[1],b))+k((i=null!=(i=c.getLocale||(null!=b?b.getLocale:b))?i:m,typeof i===n?i.call(l,{name:"getLocale",hash:{},data:e}):i))+"/wol/sysl/"+k((i=null!=(i=c.getRsconf||(null!=b?b.getRsconf:b))?i:m,typeof i===n?i.call(l,{name:"getRsconf",hash:{},data:e}):i))+"/"+k((i=null!=(i=c.getLib||(null!=b?b.getLib:b))?i:m,typeof i===n?i.call(l,{name:"getLib",hash:{},data:e}):i))+"?syncrsconf="+k((i=null!=(i=c.researchConfigurationID||(null!=b?b.researchConfigurationID:b))?i:m,typeof i===n?i.call(l,{name:"researchConfigurationID",hash:{},data:e}):i))+"&synclib="+k((i=null!=(i=c.symbol||(null!=b?b.symbol:b))?i:m,typeof i===n?i.call(l,{name:"symbol",hash:{},data:e}):i))+"&url="+k((c.getUrl||b&&b.getUrl||m).call(l,null,null!=b?b.researchConfigurationID:b,null!=b?b.symbol:b,{name:"getUrl",hash:{},data:e}))+'" data-rsconf="'+k((i=null!=(i=c.researchConfigurationID||(null!=b?b.researchConfigurationID:b))?i:m,typeof i===n?i.call(l,{name:"researchConfigurationID",hash:{},data:e}):i))+'" data-lib="'+k((i=null!=(i=c.symbol||(null!=b?b.symbol:b))?i:m,typeof i===n?i.call(l,{name:"symbol",hash:{},data:e}):i))+'" data-locale="'+k(j(null!=g[1]?g[1].locale:g[1],b))+'" data-lang="'+k(j(null!=g[1]?g[1].vernacularName:g[1],b))+'" data-meps-symbol="'+k(j(null!=g[1]?g[1].mepsSymbol:g[1],b))+'" data-meps-script="'+k(j(null!=g[1]?g[1].mepsScript:g[1],b))+'" data-dir="'+k(j(null!=g[1]?g[1].direction:g[1],b))+'">\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li class="language'+(null!=(h=c.if.call(l,null!=g[1]?g[1].isSignLanguage:g[1],{name:"if",hash:{},fn:a.program(4,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'">\n                            <span class="meps-script-ROMAN meps-lang-E" dir="ltr" data-lang="E" lang="en">\n                                <span class="icon"></span>\n                                <span>'+k(j(null!=g[1]?g[1].englishName:g[1],b))+'</span>\n                            </span>\n\t\t\t\t\t\t\t<span>&nbsp;-&nbsp;</span>\n                            <span class="'+k(j(null!=g[1]?g[1].libLangClasses:g[1],b))+'" '+(null!=(h=j(null!=g[1]?g[1].libLangAttributes:g[1],b))?h:"")+">\n                                <span>"+k(j(null!=g[1]?g[1].vernacularName:g[1],b))+'</span>\n                            </span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="library">\n\t\t\t\t\t\t\t<span class="'+k(j(null!=g[1]?g[1].libLangClasses:g[1],b))+'" '+(null!=(h=j(null!=g[1]?g[1].libLangAttributes:g[1],b))?h:"")+">"+k((i=null!=(i=c.title||(null!=b?b.title:b))?i:m,typeof i===n?i.call(l,{name:"title",hash:{},data:e}):i))+"</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</a>\n"},4:function(a,b,c,d,e){return" signLanguage"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h;return null!=(h=c.each.call(null!=b?b:a.nullContext||{},null!=b?b.items:b,{name:"each",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:""},useData:!0,useDepths:!0}),this.Handlebars.templates.Tooltip=Handlebars.template({1:function(a,b,c,d,e,f){var g,h=null!=b?b:a.nullContext||{},i=c.helperMissing;return'        <li class="tooltipListItem">\n'+(null!=(g=c.if.call(h,(c.or||b&&b.or||i).call(h,null!=b?b.content:b,(c.isArray||b&&b.isArray||i).call(h,null!=b?b.mediaHtml:b,{name:"isArray",hash:{},data:e,blockParams:f}),{name:"or",hash:{},data:e,blockParams:f}),{name:"if",hash:{},fn:a.program(2,e,0,f),inverse:a.program(23,e,0,f),data:e,blockParams:f}))?g:"")+"        </li>\n"},2:function(a,b,c,d,e,f){var g,h,i=null!=b?b:a.nullContext||{},j=c.helperMissing;return(null!=(g=c.if.call(i,null!=b?b.title:b,{name:"if",hash:{},fn:a.program(3,e,0,f),inverse:a.program(5,e,0,f),data:e,blockParams:f}))?g:"")+(null!=(g=c.if.call(i,null!=b?b.substitutes:b,{name:"if",hash:{},fn:a.program(12,e,0,f),inverse:a.noop,data:e,blockParams:f}))?g:"")+'                <div class="tooltipContent">\n                    <div class="'+a.escapeExpression((h=null!=(h=c.articleClasses||(null!=b?b.articleClasses:b))?h:j,"function"==typeof h?h.call(i,{name:"articleClasses",hash:{},data:e,blockParams:f}):h))+'">\n'+(null!=(g=c.if.call(i,(c.isArray||b&&b.isArray||j).call(i,null!=b?b.mediaHtml:b,{name:"isArray",hash:{},data:e,blockParams:f}),{name:"if",hash:{},fn:a.program(15,e,0,f),inverse:a.noop,data:e,blockParams:f}))?g:"")+(null!=(g=c.if.call(i,null!=b?b.content:b,{name:"if",hash:{},fn:a.program(18,e,0,f),inverse:a.noop,data:e,blockParams:f}))?g:"")+"                    </div>\n                </div>\n"+(null!=(g=c.if.call(i,(c.isArray||b&&b.isArray||j).call(i,null!=b?b.multimediaItems:b,{name:"isArray",hash:{},data:e,blockParams:f}),{name:"if",hash:{},fn:a.program(20,e,0,f),inverse:a.noop,data:e,blockParams:f}))?g:"")},3:function(a,b,c,d,e){var f;return'                    <div class="card infoCard chrome">\n                        <div class="cardTitle">\n                            <span class="docTitle">'+a.escapeExpression((f=null!=(f=c.title||(null!=b?b.title:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"title",hash:{},data:e}):f))+'</span>\n                        </div>\n                        <div class="icon"></div>\n                    </div>\n'},5:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=c.helperMissing,j=a.escapeExpression;return'                    <a class="lnk" href="'+j((g=null!=(g=c.url||(null!=b?b.url:b))?g:i,"function"==typeof g?g.call(h,{name:"url",hash:{},data:e}):g))+'">\n'+(null!=(f=c.if.call(h,(c.ne||b&&b.ne||i).call(h,(c.getValueByPath||b&&b.getValueByPath||i).call(h,"items",(c.add||b&&b.add||i).call(h,e&&e.index,-1,{name:"add",hash:{},data:e}),"source",{name:"getValueByPath",hash:{},data:e}),null!=b?b.source:b,{name:"ne",hash:{},data:e}),{name:"if",hash:{},fn:a.program(6,e,0),inverse:a.program(10,e,0),data:e}))?f:"")+'                    <span class="docTitle">'+j((g=null!=(g=c.caption||(null!=b?b.caption:b))?g:i,"function"==typeof g?g.call(h,{name:"caption",hash:{},data:e}):g))+'</span>\n                </div>\n                        <div class="icon"></div>\n                </div>\n                    </a>\n'},6:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{};return'                        <div class="card linkCard chrome">\n'+(null!=(f=c.if.call(h,null!=b?b.imageUrl:b,{name:"if",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+'                    <div class="cardTitle">\n                        <span class="pubTitle">'+a.escapeExpression((g=null!=(g=c.source||(null!=b?b.source:b))?g:c.helperMissing,"function"==typeof g?g.call(h,{name:"source",hash:{},data:e}):g))+"</span>\n"},7:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{};return'                            <img class="thumbnail'+(null!=(f=c.if.call(h,null!=b?b.englishSymbol:b,{name:"if",hash:{},fn:a.program(8,e,0),inverse:a.noop,data:e}))?f:"")+'" src="'+a.escapeExpression((g=null!=(g=c.imageUrl||(null!=b?b.imageUrl:b))?g:c.helperMissing,"function"==typeof g?g.call(h,{name:"imageUrl",hash:{},data:e}):g))+'"/>\n'},8:function(a,b,c,d,e){var f;return" placeholder-"+a.escapeExpression((f=null!=(f=c.englishSymbol||(null!=b?b.englishSymbol:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"englishSymbol",hash:{},data:e}):f))},10:function(a,b,c,d,e){return'                        <div class="card linkCard continued chrome">\n                    <div class="cardTitle">\n'},12:function(a,b,c,d,e){var f;return'                    <div class="alternatePresentation clickable">\n'+(null!=(f=c.each.call(null!=b?b:a.nullContext||{},null!=b?b.substitutes:b,{name:"each",hash:{},fn:a.program(13,e,2),inverse:a.noop,data:e}))?f:"")+"                    </div>\n"},13:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i="function",j=a.escapeExpression;return'                            <div class="option clearfix">\n                                <span class="title">'+j((f=null!=(f=c.title||(null!=b?b.title:b))?f:h,typeof f===i?f.call(g,{name:"title",hash:{},data:e}):f))+'</span>\n                                <img src="'+j((f=null!=(f=c.thumbnailUrl||(null!=b?b.thumbnailUrl:b))?f:h,typeof f===i?f.call(g,{name:"thumbnailUrl",hash:{},data:e}):f))+'" class="lightbox hiddenThumbnail"\n                                     data-alt-src="'+j((f=null!=(f=c.targetUrl||(null!=b?b.targetUrl:b))?f:h,typeof f===i?f.call(g,{name:"targetUrl",hash:{},data:e}):f))+'" data-alt-type="'+j((f=null!=(f=c.targetType||(null!=b?b.targetType:b))?f:h,typeof f===i?f.call(g,{name:"targetType",hash:{},data:e}):f))+'"/>\n                                <span class="altIcon icon-'+j((f=null!=(f=c.targetType||(null!=b?b.targetType:b))?f:h,typeof f===i?f.call(g,{name:"targetType",hash:{},data:e}):f))+'"><span class="icon"></span></span>\n                                <span class="spinner"></span>\n                            </div>\n'},15:function(a,b,c,d,e,f){var g;return null!=(g=c.each.call(null!=b?b:a.nullContext||{},null!=b?b.mediaHtml:b,{name:"each",hash:{},fn:a.program(16,e,2,f),inverse:a.noop,data:e,blockParams:f}))?g:""},16:function(a,b,c,d,e,f){var g;return"                                "+(null!=(g=a.lambda(f[0][0],b))?g:"")+"\n"},18:function(a,b,c,d,e){var f,g;return'                            <div class="tooltipText">\n                                '+(null!=(g=null!=(g=c.content||(null!=b?b.content:b))?g:c.helperMissing,f="function"==typeof g?g.call(null!=b?b:a.nullContext||{},{name:"content",hash:{},data:e}):g)?f:"")+"\n                            </div>\n"},20:function(a,b,c,d,e,f){var g;return'                    <ul class="mediaItems">\n'+(null!=(g=c.each.call(null!=b?b:a.nullContext||{},null!=b?b.multimediaItems:b,{name:"each",hash:{},fn:a.program(21,e,2,f),inverse:a.noop,data:e,blockParams:f}))?g:"")+"                    </ul>\n"},21:function(a,b,c,d,e,f){var g,h=a.lambda;return'                            <li>\n                                <a href="'+(null!=(g=h(null!=(g=f[0][0])?g.navigateUrl:g,b))?g:"")+'">\n                                    <div class="mediaTile">\n                                        <div class="link"><span class="title">'+(null!=(g=h(null!=(g=f[0][0])?g.title:g,b))?g:"")+'</span><span\n                                                class="icon"></span></div>\n                                        <img class="responsiveLoadingPlaceholder placeholder-1x1">\n                                        <img src="'+(null!=(g=h(null!=(g=f[0][0])?g.sqsUrl:g,b))?g:"")+'" class="preview responsiveLoadingImage imageFadeIn">\n                                    </div>\n                                </a>\n                            </li>\n'},23:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i=a.escapeExpression;return'                <a class="lnk" href="'+i((f=null!=(f=c.url||(null!=b?b.url:b))?f:h,"function"==typeof f?f.call(g,{name:"url",hash:{},data:e}):f))+'">\n                    <span class="source">'+i((f=null!=(f=c.source||(null!=b?b.source:b))?f:h,"function"==typeof f?f.call(g,{name:"source",hash:{},data:e}):f))+'</span>\n                    <span class="title">'+i((f=null!=(f=c.caption||(null!=b?b.caption:b))?f:h,"function"==typeof f?f.call(g,{name:"caption",hash:{},data:e}):f))+"</span>\n                </a>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f){var g;return'<div class="tooltipClose">\n    <div class="closeBtn"><span class="icon"></span></div>\n</div>\n<ul class="tooltipList">\n'+(null!=(g=c.each.call(null!=b?b:a.nullContext||{},null!=b?b.items:b,{name:"each",hash:{},fn:a.program(1,e,2,f),inverse:a.noop,data:e,blockParams:f}))?g:"")+"</ul>\n"},useData:!0,useBlockParams:!0}),this.Handlebars.templates.Video=Handlebars.template({1:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=c.helperMissing,j="function";return'    <video id="'+(null!=(g=null!=(g=c.mediaPlayerId||(null!=b?b.mediaPlayerId:b))?g:i,f=typeof g===j?g.call(h,{name:"mediaPlayerId",hash:{},data:e}):g)?f:"")+'" class="slVideo" data-start-time="'+(null!=(g=null!=(g=c.mediaStartTime||(null!=b?b.mediaStartTime:b))?g:i,f=typeof g===j?g.call(h,{name:"mediaStartTime",hash:{},data:e}):g)?f:"")+'"\n           data-duration="'+(null!=(g=null!=(g=c.mediaDuration||(null!=b?b.mediaDuration:b))?g:i,f=typeof g===j?g.call(h,{name:"mediaDuration",hash:{},data:e}):g)?f:"")+'" data-json-src="'+(null!=(g=null!=(g=c.mediaSrc||(null!=b?b.mediaSrc:b))?g:i,f=typeof g===j?g.call(h,{name:"mediaSrc",hash:{},data:e}):g)?f:"")+'"\n           data-img-src="'+(null!=(g=null!=(g=c.mediaUrl||(null!=b?b.mediaUrl:b))?g:i,f=typeof g===j?g.call(h,{name:"mediaUrl",hash:{},data:e}):g)?f:"")+'"></video>\n'},3:function(a,b,c,d,e){var f;return'    <p class="noVideoAvailable">'+a.escapeExpression(a.lambda(null!=(f=null!=b?b.i18n:b)?f.multimediaNotAvailableForSelection:f,b))+"</p>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return'<p class="videoErrorNotice hidden">'+a.escapeExpression(a.lambda(null!=(f=null!=b?b.i18n:b)?f.multimediaErrorLoadingVideo:f,b))+"</p>\n\n"+(null!=(f=c.if.call(g,(c.isString||b&&b.isString||c.helperMissing).call(g,null!=b?b.mediaPlayerId:b,{name:"isString",hash:{},data:e}),{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.program(3,e,0),data:e}))?f:"")},useData:!0}),function(a,b){"use strict";function c(b){a("#searchFilterContainer").find("input").each(function(){this.checked=b}),b&&a("#searchRefineForm").submit()}function d(){a("#searchRefineForm").submit()}function e(){"s"===b.getCommand()&&(a("#proximitySelector").show().change(function(){a("#searchResultsForm").submit()}),a("#rankSelector").show().change(function(){a("#searchResultsForm").submit()}),a("#menuSearchHitNext").show(),0!==a("#searchRefineForm").length&&a("#searchFilterContainer").find("input[type=checkbox]").change(d),Modernizr.sessionstorage&&a("[data-nav-scope-data]").each(function(b,c){c=a(c);var d=c.data("nav-scope-data");c.length>0&&!0===d.isBibleDocument&&c.closest("a").on("click",function(){return a.ajax({url:d.navScopeDataUrl,success:function(a){sessionStorage.setItem("nav-scope-data",JSON.stringify(a)),window.location=a[0]||c.closest("a").attr("href")}}),!1})}))}b.search={setupSearch:e,categoryFilterToggleAll:c}}(jQuery,app),$(function(){"use strict";app.images.placeholders(),"undefined"!=typeof HANDJS&&(HANDJS.doNotProcessCSS=!0),app.images.setupImages(),app.utilities.isGalleryNav()&&app.gallery.initGallery(),app.gallery.setupGalleryMediaReload(),app.gallery.initGalleryItem(!1,!0),$("#waypoints").val()&&app.scrollHandler.activateSubheadingTracking(),$("#audioMultiselect").val()&&$("#regionMain").on("pointerup.selectedtext",function(){var a=app.utilities.getSelectedText();a&&!a.collapsed&&a.toString().length>0?$(document).trigger("textselected"):$(document).trigger("textunselected")}),app.layout.setupSyncLinks(),app.layout.setupNextSearchHitButton(),app.menu.setupMenu(),app.documentMenu.makeDocumentMenu(),app.layout.applyFontSize(),app.studyPane.processStudyUrlFragment(),app.layout.applyStudyPaneCollapse(),app.layout.setupSecondaryNav(),app.layout.displaySyncState(),app.layout.setupScrollHandler(),app.layout.setupResizeHandler(),app.layout.setupKeymapping(),app.layout.setupBibleVerseHighlight(),app.layout.setupAlternatePublicationClick(),app.video.setupVideoPlaceHolder(),app.bibleAudioCheck.checkBibleAudio(),app.layout.contentPositionAdjuster(),app.documentMenu.positionMenu(),$("input[name=p]").val([app.utilities.getSearchProximity()]),$("input[name=r]").val([app.utilities.getSearchRank()]),app.studyPane.init(),app.tabs.wireTabs($(".tabItem"));var a;a=app.isBibleDocument()?"[id^=v]":"[data-pid]",$(".article:not(.contentOnly, .search)").find(a).on("click",function(a){if($(a.target).closest("a, input, img, label").length>0);else{var b=app.utilities.getSelectedText();if(b&&!b.collapsed&&b.toString().length>0);else{var c=$(a.currentTarget).data("pid")||a.currentTarget.id;app.highlightManager.enabled&&(app.highlightManager.toggleHighlight(c),app.url.matchUrlToHighlight())}}}),app.layout.setupShowHideBibleOutline(),$(window).on("hashchange",function(a){app.jumpHighlight.internalLinkHandler(a),app.url.setFragmentToPropagate()}),$("#article").hasClass("document")?$("#secondaryNavContent").find(".documentNavigation a").on("click",function(a){return app.layout.toggleNavigation(),app.jumpHighlight.hashJump(a),!1}):$("#secondaryNavContent .verseItem, #secondaryNavContent .documentNavigation a").on("click",function(a){if(app.layout.toggleNavigation(),app.highlightManager.removeHighlight(!0),app.utilities.isContentLibraryHTML5())app.highlightManager.highlight($(this).attr("href"),function(){app.jumpHighlight.hashJump(a)});else{var b=app.getVerseNumberFromIDAttribute($(this).attr("href"));app.highlightManager.highlightBibleVerseAsync(b,function(){app.jumpHighlight.hashJump(a)})}return!1}),document.addEventListener?document.addEventListener("click",function(a){app.lastClickEvent=a
},!0):document.attachEvent&&document.attachEvent("onclick",function(a){app.lastClickEvent=a}),$("html, body").on("mousewheel DOMMouseScroll touchmove",function(){return $("html, body").stop(!0,!1),!0}),app.media.initMedia(),$(document).on("texthighlighted",function(a){$(":animated").promise().done(function(){0===$("#playerplaylist").filter(":visible").length&&app.contextMenu.drawMenu(a)})}),$(document).on("textunhighlighted",function(){app.contextMenu.removeContextMenu(!0,!0)}),app.jumpHighlight.highlightUrlFragment(),app.url.setFragmentToPropagate(),app.url.disableDisabledNextPrevButtons(),app.isOldIE()||app.utilities.isContentLibraryHTML5()&&$(document).on("texthighlighted textunhighlighted",function(){app.url.matchUrlToHighlight()}),app.setupTooltip($(".article:not(.bible)")),app.setupTooltip($("#study")),app.layout.setupLibraryColor(),app.search.setupSearch(),app.text.setupText(),app.utilities.externalizeLinks(),$(window).load(function(){app.layout.setupStudyPaneCollapse(),app.layout.setupSecondaryNavToggle(),setTimeout(function(){app.layout.sideBarSizing()},0),app.studyPane.processSelectUrlFragment(),app.images.setupLightboxItems(),$(".alternatePresentation").on("click",this,function(){return $(this).find("img").click(),!1}),$(".article img").not(".noLightbox").on("click",this,function(){return app.images.callLightbox(this)}).css("cursor","pointer"),app.jumpHighlight.initialJump(),app.scrollHandler.addBottomPadding($("#subheadings").find("a").last()),app.utilities.isSignLanguage()?app.video.setupSharedPlayer():app.media.audioNavigationSetup(),app.video.setupEmbeddedVideoPlayer($("#article"))})});
